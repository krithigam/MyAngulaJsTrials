/**
 * @license TruCode Encoder Essentials 3.1.0.363 Copyright (c) 2013 TruCode, LLC
 * This file contains works from other authors. See the included license-agreements
 * folder that is distributed alongside this file.
 * See https://wsstage.trucode.com/help for more information
 */
(function(){var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(
i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config
[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1
){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(
){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("vendor/require/almond",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof 
exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x),x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(
e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(
e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call
(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math
.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e)
{return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(
e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(
e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply
(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,
i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply
(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.
apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,
arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in 
e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(
t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.
multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[
],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"
}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;"
,">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})}
;var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+
n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop"
,"push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),define("jql",[],function(){return $}),function(
e,t){typeof exports!="undefined"?t(e,exports,require("underscore")):typeof define=="function"&&define.amd?define("Backbone",["underscore","jql","exports"],function(n,r,i){t(e,i,n,r)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.0.0",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,
context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this
},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e
[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=n.uniqueId("l"));return s[o
]=t,typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r,i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},n.extend(this,n.pick(t,v)),t.parse&&(i=this.parse(i,t)||{});if(r=n.result(this,"defaults"))i=n.defaults({},i,r);this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},v=["url","urlRoot","collection"];n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments
)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]
:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=!0);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this
.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,r
){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t;if(i&&(!r||!r.wait)&&!this.set(i,r))return!1;r=n.extend({validate:!0},r);if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},F(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy
:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;F(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==
null},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t||{},{validationError:r})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var g=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&
(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},y={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};n.extend(g.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.defaults(t||{},b))},remove:function(e,t){e=n.isArray(e)?e.slice():[e],t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=this.get(e[r]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid]
,s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},set:function(e,t){t=n.defaults(t||{},y),t.parse&&(e=this.parse(e,t)),n.isArray(e)||(e=e?[e]:[]);var r,i,s,u,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=n.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(r=0,i=e.length;r<i;r++){if(!(s=this._prepareModel(e[r],t)))continue;(f=this.get(s))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(s.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(s),s.on("all",this._onModelEvent,this
),this._byId[s.cid]=s,s.id!=null&&(this._byId[s.id]=s))}if(t.remove){for(r=0,i=this.length;r<i;++r)m[(s=this.models[r]).cid]||v.push(s);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?a.apply(this.models,[c,0].concat(d)):o.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(r=0,i=d.length;r<i;r++)(s=d[r]).trigger("add",s,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r]);return t.previousModels=this.models,this._reset(),this.add(e,n.
extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:
[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,r){t||(t=this.comparator);var i=n.isFunction(t)?t:function(e){return e.get(t)};return n.sortedIndex(this.models,e,i,r)},pluck:function(
e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.
models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});
var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(w,function(e){g.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var E=["groupBy","countBy","sortBy"];n.each(E,function(e){g.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n
[e](this.models,i,r)}});var S=t.View=function(e){this.cid=n.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(S.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0
],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(x),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=n.extend({},n.result(this,"options"),e)),n.extend(this,n.pick(e,T)),this.options=e},_ensureElement:function(){if(!this.el){var e=n.extend
({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||j()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded"
,o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var N={create:"POST",update:"PUT",patch:"PATCH"
,"delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);i&&i.apply(s,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o
),t.history.trigger("route",s,r,o)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e){return e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[
],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/;M.started=!1,n.extend(M.prototype,f,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(H,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started"
);M.started=!0,this.options=n.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/"),s&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState?t.$(window
).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var o=this.location,u=o.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&o.hash&&(this.fragment=this.getHash().replace(_,""),this.history
.replaceState({},document.title,this.root+this.fragment+o.search));if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment
(e),r=n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return r},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location
,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var B=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=g.extend=C.extend=S.extend=M.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t)
{var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e){function l(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function h(e){for(t in i)i[t]=e[c[t]]}function p(e,t){var n,s,u,a,c;n=e.keyCode,l(f,n)==-1&&f.push(n);if(n==93||n==224)n=91;if(n in i){i[n]=!0;for(u in o)o[u]==n&&(b[u]=!0);return}h(e);if(!b.filter.call(this,e))return;if(!(n in r))return;for(a=0;a<r[n].length;a++){s=r[n][a];if(s.scope==t||s.scope=="all"){c=s.mods.length>0;for(u in i)if(!i[u]&&l(s.mods,+u)>-1||i[u]&&l(s.mods,+u)==-1)c=!1;(s.mods.length==0&&!i[16]&&!i[18]&&!i[17]&&!
i[91]||c)&&s.method(e,s)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function d(e){var t=e.keyCode,n,r=l(f,t);r>=0&&f.splice(r,1);if(t==93||t==224)t=91;if(t in i){i[t]=!1;for(n in o)o[n]==t&&(b[n]=!1)}}function v(){for(t in i)i[t]=!1;for(t in o)b[t]=!1}function m(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function g(e){var t=e.slice(0,e.length-1);for(var n=0;n<t.length;n++)t[n]=o[t[n]];return t}function y(e,t){if(e.length!=t.length)return!1;for(var n=0
;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b(e,t,n){var i=m(e),s;n===undefined&&(n=t,t="all");for(var o=0;o<i.length;o++)s=[],e=i[o].split("+"),e.length>1&&(s=g(e),e=[e[e.length-1]]),e=e[0],e=a(e),e in r||(r[e]=[]),r[e].push({shortcut:i[o],scope:t,method:n,key:i[o],mods:s})}function w(e){return typeof e=="string"&&(e=a(e)),l(f,e)!=-1}function E(){return f.slice(0)}function S(e){if(T().indexOf("searchbar")!==-1||T().indexOf("codebooks:tabular")!==-1)return!0;var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function x(e){s=e||"all"}function T(){return s||"all"
}function N(e,t){var n=e.split("+"),i=[],s,o;n.length>1&&(i=g(n),e=n[n.length-1]),e=a(e),t===undefined&&(t=T());if(!r[e])return;for(s in r[e])o=r[e][s],o.scope===t&&y(o.mods,i)&&(r[e][s]={})}function C(e){var t,n,i;for(t in r){n=r[t];for(i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++}}function k(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function A(){var t=e.key;return e.key=L,t}var t,n,r={},i={16:!1,18:!1,17:!1,91:!1},s="all",o={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91
,command:91},u={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},a=function(e){return u[e]||e.toUpperCase().charCodeAt(0)},f=[];for(t=1;t<20;t++)o["f"+t]=111+t;var c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(t in o)b[t]=!1;k(document,"keydown",function(e){p(e,s)}),k(document,"keyup",d),k(window,"focus",v);var L=e.key;n=b,n.setScope=x,n.getScope=T,n.deleteScope=C,n.filter=S,n.isPressed=
w,n.getPressedKeyCodes=E,n.noConflict=A,n.unbind=N,typeof define=="function"&&define.amd?define("keymaster",[],function(){return n}):e.key=n,typeof module!="undefined"&&(module.exports=n)}(this),define("vendor/backbone/plugins/backbone.shortcuts",["keymaster","Backbone","underscore"],function(e,t,n){var r;r=function(e){return this.cid=n.uniqueId("backbone.shortcuts"),this.initialize.apply(this,arguments),this.delegateShortcuts()},n.extend(r.prototype,t.Events,{initialize:function(){},delegateShortcuts:function(){var t,r,i,s,o,u,a,f;if(!this.shortcuts)return;a=this.shortcuts,f=[];for(o in a){t=a
[o],n.isFunction(t)||(i=this[t]);if(!i)throw new Error("Method "+t+" does not exist");r=o.match(/^(\S+)\s*(.*)$/),u=r[1],s=r[2]===""?"all":r[2],i=n.bind(i,this),f.push(e(u,s,i))}return f},undelegateShortcuts:function(){if(!this.shortcuts)return;var t,n,r,i,s;t=this.shortcuts;for(n in t)r=n.match(/^(\S+)\s*(.*)$/),i=r[1],s=r[2]===""?"all":r[2],e.unbind(i,s)}}),t.Shortcuts=r,t.Shortcuts.extend=t.View.extend}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im
,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined"
)return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!
s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+
s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("\ufeff")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0
);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);c.onXhr&&c.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u
.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!controls/codebooks/templates/codebooks.html",[],function(){return'<div class="k-content codebooks">\r\n    <div class="codebooks-wrap splitter-wrap">\r\n        <div>\r\n            <div class="searchbar" data-pane-index="10"></div>\r\n        </div>\r\n        <div class="bottom-wrap">\r\n            <div class="results-wrap">\r\n                <div class="index-wrap">\r\n                    <div>\r\n                        <div class="index-header"></div>\r\n                    </div>\r\n                    <div class="index-mid-wrap pane-scrollable">\r\n                        <div class="index-results" data-pane-index="20">\r\n                            <div class="pane-content pane-text pane-slim-n default-pane<% if (!hideResearch) { print(\' pane-slim-e\'); } %>"></div>\r\n                            <div class="pane-content pane-text pane-slim-n pcs-pane<% if (!hideResearch) { print(\' pane-slim-e\'); } %>" style="display:none"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="tabular-wrap">\r\n                    <div>\r\n                        <div class="tabular-header"></div>\r\n                    </div>\r\n                    <div>\r\n                        <div class="tabular-results pane-scrollable" data-pane-index="30">\r\n                            <div class="pane-content pane-text pane-slim-n<% if (!hideResearch) { print(\' pane-slim-e\'); } %>"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <% if (!hideResearch) { %>\r\n            <div>\r\n                <div class="research-outer-wrap">\r\n                    <!-- splitter -->\r\n                    <div class="research-wrap">\r\n                        <div class="pane-content pane-slim-e pane-slim-s pane-slim-w">\r\n                            <div class="heading-slim">Research</div>\r\n                        </div>\r\n                        <div class="research-mid-wrap pane-scrollable">\r\n                            <div class="research-pane-wrap pane-content pane-slim" data-pane-index="40"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <% } %>\r\n        </div>\r\n    </div>\r\n</div>'
}),define("text!controls/codebooks/templates/searchbar/searchbar.html",[],function(){return'<% var randomId = Math.random().toString().replace(\'0.\',\'\'); %>\r\n<div class="pane-content form-inline">\r\n    <label for="search-box-<%= randomId %>" class="pad-right">Search for</label>\r\n    <input class="search-box k-input" id="search-box-<%= randomId %>" type="text" placeholder="search terms or code...">\r\n    <span class="pad-right pad-left">in</span>\r\n    <select class="book-list">\r\n        <% this.codeBooks.each(function(item) { %>\r\n        <option value="<%= item.get(\'id\') %>"><%= item.get(\'title\') %></option>\r\n        <% }); %>\r\n    </select>\r\n    <button type="submit" class="search-btn k-button pad-left" disabled="disabled">Search</button>\r\n    <div class="search-options">\r\n        <label class="checkbox find-all" style="display:none">\r\n            <input type="checkbox" value="FindAll" /> Find All\r\n        </label>\r\n        <label class="checkbox use-anesthesia" style="display:none">\r\n            <input type="checkbox" value="UseAnesthesiaCodes" /> Include Anesthesia Codes\r\n        </label>\r\n    </div>\r\n    <div class="additional-reference">\r\n        <a href="javascript:void(0)" class="show-modifiers" style="display:none">Modifiers</a>\r\n    </div>\r\n    <span class="tc-loading k-loading k-icon">Loading</span>\r\n</div>'
}),define("text!controls/codebooks/templates/searchbar/codebooks-error.html",[],function(){return'<span class="alert alert-error codebooks-error">Trouble listing books. <a href="javascript:void(0)" class="codebooks-retry">Try again.</a></span>'});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/searchbarViewModel",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults={codeBooks:null,bookValue:null,searchOption:null},e.call(this,t)}return __extends(
t,e),t}(r.Model);t.SearchbarViewModel=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/codebook",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults=function(){return{id:-1,title:-1}},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){},t}(r.Model);t.CodeBook=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/codebookCollection"
,["require","exports","Backbone","controls/codebooks/models/codebook"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(){e.apply(this,arguments),this.model=s.CodeBook}return __extends(t,e),t}(i.Collection);t.CodeBookCollection=o}),define("kendoui/kendo.core",["jql"],function(e){function k(){}function C(e){return typeof e=="function"}function P(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),r=e.substring(1);return n==="="?"+("+r+")+":n===":"?"+e("+r+")+":";"+e+";o+="}function L(
e,t,n){return e+="",t=t||2,n=t-e.length,n?U[t].substring(0,n)+e:e}function j(n){var r=c.browser,i,s=n.css("direction")=="rtl";if(!n.parent().hasClass("k-animation-container")){var o=n.css(t.support.transitions.css+"box-shadow")||n.css("box-shadow"),a=o?o.match(m)||[0,0,0,0,0]:[0,0,0,0,0],f=u.max(+a[3],+(a[4]||0)),l=-a[1]+f,h=+a[1]+f,p=+a[2]+f,v=n[0].style.width,g=n[0].style.height,y=d.test(v),b=d.test(g);r.opera&&(l=h=p=5),i=y||b,y||(v=n.outerWidth()),b||(g=n.outerHeight()),n.wrap(e("<div/>").addClass("k-animation-container").css({width:v,height:g,marginLeft:l*(s?1:-1),paddingLeft:l,paddingRight
:h,paddingBottom:p})),i&&n.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}else{var w=n.parent(".k-animation-container"),E=w[0].style;w.is(":hidden")&&w.show(),i=d.test(E.width)||d.test(E.height),i||w.css({width:n.outerWidth(),height:n.outerHeight()})}return r.msie&&u.floor(r.version)<=7&&(n.css({zoom:1}),n.children(".k-menu").width(n.width())),n.parent()}function R(e){var t=1,n=arguments.length;for(t=1;t<n;t++)B(e,arguments[t]);return e}function B(e,n){var r=t.data.ObservableArray,i=t.data.DataSource,s,o,u,a;for(s in n)o=n[s],u=typeof 
o,u===w&&o!==null&&o.constructor!==Array&&o.constructor!==r&&o.constructor!==i?o instanceof Date?e[s]=new Date(o.getTime()):(a=e[s],typeof a===w?e[s]=a||{}:e[s]={},B(e[s],o)):u!==S&&(e[s]=o);return e}function J(e,t,n){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return n!==undefined?n:e}function Y(n,r){var i={},s;return document.defaultView&&document.defaultView.getComputedStyle?(s=document.defaultView.getComputedStyle(n,""),r&&e.each(r,function(e,t){i[t]=s.getPropertyValue(t)})):(s=n.currentStyle,r&&e.each(r,function(e,t){i[t]=s[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase
()})]})),t.size(i)||(i=s),i}function $(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&n!="toJSON"&&t++;return t}function V(e,n,r){n||(n="offset");var i=e[n](),s=c.mobileOS;if(c.touch&&s.ios&&s.flatVersion<410){var o=n=="offset"?i:e.offset(),u=i.left==o.left&&i.top==o.top;if(u)return{top:i.top-window.scrollY,left:i.left-window.scrollX}}return(t.support.pointers||t.support.msPointers)&&!r&&(i.top-=window.pageYOffset-document.documentElement.scrollTop,i.left-=window.pageXOffset-document.documentElement.scrollLeft),i}function q(e){var t={};return i(typeof e=="string"?e.split(" "):e,function(e){t[e]=this
}),t}function K(e){return new t.effects.Element(e)}function X(e,t,n,i){return typeof e===v&&(C(t)&&(i=t,t=400,n=!1),C(n)&&(i=n,n=!1),typeof t===M&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),r({effects:{},duration:400,reverse:!1,init:a,teardown:a,hide:!1},e,{completeCallback:e.complete,complete:a})}function Z(t,n,r,i,s){var o=0,u=t.length,a;for(;o<u;o++)a=e(t[o]),a.queue(function(){Q.promise(a,X(n,r,i,s))});return t}function et(e,t,n,r,i,s){return Q.transitionPromise(e,t,X(n,r,i,s))}function tt(e,t,n,r){return t&&(t=t.split(" "),i(t,function(t,n){e.toggleClass(n,r)})),e}function ot
(e){return(""+e).replace(nt,"&amp;").replace(rt,"&lt;").replace(it,"&gt;")}function mt(e,r){var i;return r.indexOf("data")===0&&(r=r.substring(4),r=r.charAt(0).toLowerCase()+r.substring(1)),r=r.replace(pt,"-$1"),i=e.getAttribute("data-"+t.ns+r),i===null?i=undefined:i==="null"?i=null:i==="true"?i=!0:i==="false"?i=!1:h.test(i)?i=parseFloat(i):ct.test(i)&&!dt.test(i)&&(i=n("("+i+")")),i}function ht(n,r){var i={},s,o;for(s in r)o=mt(n,s),o!==undefined&&(lt.test(s)&&(o=t.template(e("#"+o).html())),i[s]=o);return i}function yt(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/
.test(n)?!e.disabled:"a"===n?e.href||t:t)&&wt(e)}function wt(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}function kt(e,t){return new kt.fn.init(e,t)}var t={cultures:{}},n=eval,r=e.extend,i=e.each,o=e.proxy,s=e.isArray,a=e.noop,u=Math,f,l=window.JSON||{},c={},d=/%/,p=/\{(\d+)(:[^\}]+)?\}/g,m=/(\d+?)px\s*(\d+?)px\s*(\d+?)px\s*(\d+?)?/i,h=/^(\+|-?)\d+(\.?)\d*$/,g="function",v="string",y="number",w="object",b="null",M="boolean",S="undefined",T={},x={},O=[].slice,D=window.Globalize;t.version="2013.2.918",k.extend=
function(e){var t=function(){},n,i=this,s=e&&e.init?e.init:function(){i.apply(this,arguments)},o;t.prototype=i.prototype,o=s.fn=s.prototype=new t;for(n in e)typeof e[n]!==w||e[n]instanceof Array||e[n]===null?o[n]=e[n]:o[n]=r(!0,{},t.prototype[n],e[n]);return o.constructor=s,s.extend=i.extend,s},t.isFunction=C;var z=function(){this._defaultPrevented=!0},H=function(){return this._defaultPrevented===!0},E=k.extend({init:function(){this._events={}},bind:function(e,t,n){var r=this,i,s=typeof e===v?[e]:e,o,u,a,f=typeof t===g,l;if(t===undefined){for(i in e)r.bind(i,e[i]);return r}for(i=0,o=s.length;i<
o;i++)e=s[i],a=f?t:t[e],a&&(n&&(u=a,a=function(){r.unbind(e,a),u.apply(r,arguments)}),l=r._events[e]=r._events[e]||[],l.push(a));return r},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n=this,r,i=typeof e===v?[e]:e,s,o,u=typeof t===g,a;for(r=0,s=i.length;r<s;r++)e=i[r],o=u?t:t[e],o&&(a=n._events[e]=n._events[e]||[],a.unshift(o));return n},trigger:function(e,t){var n=this,r=n._events[e],i,s;if(r){t=t||{},t.sender=n,t._defaultPrevented=!1,t.preventDefault=z,t.isDefaultPrevented=H,r=r.slice();for(i=0,s=r.length;i<s;i++)r[i].call(n,t);return t._defaultPrevented===!0}return!1},
unbind:function(e,t){var n=this,r=n._events[e],i;if(e===undefined)n._events={};else if(r)if(t)for(i=r.length-1;i>=0;i--)r[i]===t&&r.splice(i,1);else n._events[e]=[];return n}}),A=/^\w+/,N=/\$\{([^}]*)\}/g,F=/\\\}/g,_=/__CURLY__/g,I=/\\#/g,W=/__SHARP__/g,U=["","0","00","000","0000"];f={paramName:"data",useWithBlock:!0,render:function(e,t){var n,r,i="";for(n=0,r=t.length;n<r;n++)i+=e(t[n]);return i},compile:function(n,i){var s=r({},this,i),o=s.paramName,u=o.match(A)[0],a=s.useWithBlock,f='var o,e=function (value){return ("" + value).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");};'
,l,c,h;if(C(n))return n.length===2?function(t){return n(e,{data:t}).join("")}:n;f+=a?"with("+o+"){":"",f+="o=",c=n.replace(F,"__CURLY__").replace(N,"#=e($1)#").replace(_,"}").replace(I,"__SHARP__").split("#");for(h=0;h<c.length;h++)f+=P(c[h],h%2===0);f+=a?";}":";",f+="return o;",f=f.replace(W,"#");try{return l=new Function(u,f),l._slotCount=Math.floor(c.length/2),l}catch(p){throw new Error(t.format("Invalid template:'{0}' Generated code:'{1}'",n,f))}}},!function(){function o(t){return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(e){var t=r[e];return typeof t===v?t:"\\u"+("0000"+e.charCodeAt
(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function u(e,r){var f,l,c,h,p=t,d,m=r[e],E;m&&typeof m===w&&typeof m.toJSON===g&&(m=m.toJSON(e)),typeof i===g&&(m=i.call(r,e,m)),E=typeof m;if(E===v)return o(m);if(E===y)return isFinite(m)?String(m):b;if(E===M||E===b)return String(m);if(E===w){if(!m)return b;t+=n,d=[];if(s.apply(m)==="[object Array]"){h=m.length;for(f=0;f<h;f++)d[f]=u(f,m)||b;return c=d.length===0?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+p+"]":"["+d.join(",")+"]",t=p,c}if(i&&typeof i===w){h=i.length;for(f=0;f<h;f++)typeof i[f]===v&&(l=i[f],c=u(l,m),c&&d.push(o(l)+(t?": ":":")+c))}else for(
l in m)Object.hasOwnProperty.call(m,l)&&(c=u(l,m),c&&d.push(o(l)+(t?": ":":")+c));return c=d.length===0?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+p+"}":"{"+d.join(",")+"}",t=p,c}}var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,n,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i,s={}.toString;typeof Date.prototype.toJSON!==g&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?L(e.getUTCFullYear(),4)+"-"+L(e.getUTCMonth()+1)+"-"+L(e.getUTCDate())+"T"+L(e.getUTCHours(
))+":"+L(e.getUTCMinutes())+":"+L(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof l.stringify!==g&&(l.stringify=function(e,r,s){var o;t="",n="";if(typeof s===y)for(o=0;o<s;o+=1)n+=" ";else typeof s===v&&(n=s);i=r;if(!r||typeof r===g||typeof r===w&&typeof r.length===y)return u("",{"":e});throw new Error("JSON.stringify")})}(),!function(){function g(e){if(e){if(e.numberFormat)return e;if(typeof e===v){var n=t.cultures;return n[e]||n[e.split("-")[0]]||null}return null}return null}function b(e){return e&&
(e=g(e)),e||t.cultures.current}function w(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function E(t,n,r){r=b(r);var i=r.calendars.standard,s=i.days,o=i.months;return n=i.patterns[n]||n,n.replace(e,function(e){var n;return e==="d"?n=t.getDate():e==="dd"?n=L(t.getDate()):e==="ddd"?n=s.namesAbbr[t.getDay()]:e==="dddd"?n=s.names[t.getDay()]:e==="M"?n=t.getMonth()+1:e==="MM"?n=L(t.getMonth()+1):e==="MMM"?n=o.namesAbbr[t.getMonth()]:e==="MMMM"?n=o.names[t.getMonth()]:e==="yy"?n=L(t.getFullYear()%100):e==="yyyy"?n=L(t.getFullYear(),4):
e==="h"?n=t.getHours()%12||12:e==="hh"?n=L(t.getHours()%12||12):e==="H"?n=t.getHours():e==="HH"?n=L(t.getHours()):e==="m"?n=t.getMinutes():e==="mm"?n=L(t.getMinutes()):e==="s"?n=t.getSeconds():e==="ss"?n=L(t.getSeconds()):e==="f"?n=u.floor(t.getMilliseconds()/100):e==="ff"?n=u.floor(t.getMilliseconds()/10):e==="fff"?n=t.getMilliseconds():e==="tt"&&(n=t.getHours()<12?i.AM[0]:i.PM[0]),n!==undefined?n:e.slice(1,e.length-1)})}function S(e,t,o){o=b(o);var u=o.numberFormat,p=u.groupSize[0],d=u[f],v=u[a],m=u.decimals,g=u.pattern[0],y=[],w,E,S,T,N,C=e<0,k,L,A,O,M=s,_=s,D,P,H,B,j,F,I,q,R,U,z,W,X,V=-1,$;
if(e===undefined)return s;if(!isFinite(e))return e;if(!t)return o.name.length?e.toLocaleString():e.toString();N=n.exec(t);if(N){t=N[1].toLowerCase(),E=t==="c",S=t==="p";if(E||S)u=E?u.currency:u.percent,p=u.groupSize[0],d=u[f],v=u[a],m=u.decimals,w=u.symbol,g=u.pattern[C?0:1];T=N[2],T&&(m=+T);if(t==="e")return T?e.toExponential(m):e.toExponential();S&&(e*=100),e=x(e,m),e=e.split(a),k=e[0],L=e[1],C&&(k=k.substring(1)),_=k,A=k.length;if(A>=p){_=s;for(D=0;D<A;D++)D>0&&(A-D)%p===0&&(_+=d),_+=k.charAt(D)}L&&(_+=v+L);if(t==="n"&&!C)return _;e=s;for(D=0,P=g.length;D<P;D++)H=g.charAt(D),H==="n"?e+=_:H==="$"||
H==="%"?e+=w:e+=H;return e}C&&(e=-e);if(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)t=t.replace(r,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return y.push(n),h});t=t.split(";");if(C&&t[1])t=t[1],j=!0;else if(e===0){t=t[2]||t[0];if(t.indexOf(l)==-1&&t.indexOf(c)==-1)return t}else t=t[0];z=t.indexOf("%"),W=t.indexOf("$"),S=z!=-1,E=W!=-1,S&&(e*=100),E&&t[W-1]==="\\"&&(t=t.split("\\").join(""),E=!1);if(E||S)u=E?u.currency:u.percent,p=u.groupSize[0],d=u[f],v=u[a],m=u.decimals,w=u.symbol;B=t.indexOf(f)>-1,B&&(t=t.replace(i,s)),F=t.indexOf(a),P=t.length,F!=-1?
(L=e.toString().split("e"),L[1]?L=x(e,Math.abs(L[1])):L=L[0],L=L.split(a)[1]||s,q=t.lastIndexOf(c)-F,I=t.lastIndexOf(l)-F,R=q>-1,U=I>-1,D=L.length,!R&&!U&&(t=t.substring(0,F)+t.substring(F+1),P=t.length,F=-1,D=0),R&&q>I?D=q:I>q&&(U&&D>I?D=I:R&&D<q&&(D=q)),D>-1&&(e=x(e,D))):e=x(e),I=t.indexOf(l),X=q=t.indexOf(c),I==-1&&q!=-1?V=q:I!=-1&&q==-1?V=I:V=I>q?q:I,I=t.lastIndexOf(l),q=t.lastIndexOf(c),I==-1&&q!=-1?$=q:I!=-1&&q==-1?$=I:$=I>q?I:q,V==P&&($=V);if(V!=-1){_=e.toString().split(a),k=_[0],L=_[1]||s,A=k.length,O=L.length;if(B)if(A===p&&A<F-X)k=d+k;else if(A>p){_=s;for(D=0;D<A;D++)D>0&&(A-D)%p===0&&
(_+=d),_+=k.charAt(D);k=_}e=t.substring(0,V),C&&!j&&(e+="-");for(D=V;D<P;D++){H=t.charAt(D);if(F==-1){if($-D<A){e+=k;break}}else{q!=-1&&q<D&&(M=s),F-D<=A&&F-D>-1&&(e+=k,D=F);if(F===D){e+=(L?v:s)+L,D+=$-F+1;continue}}H===c?(e+=H,M=H):H===l&&(e+=M)}$>=V&&(e+=t.substring($+1));if(E||S){_=s;for(D=0,P=e.length;D<P;D++)H=e.charAt(D),_+=H==="$"||H==="%"?w:H;e=_}P=y.length;if(P)for(D=0;D<P;D++)e=e.replace(h,y[D])}return e}var e=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,n=/^(n|c|p|e)(\d*)$/i,r=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,i=/\,/g,s="",a=".",f=",",l="#"
,c="0",h="??",d="en-US",m={}.toString;t.cultures["en-US"]={name:d,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September"
,"October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},t.culture=function(e){var n=t.cultures,r;if(e===undefined)return n.current;r=g(e)||n[d],r.calendar=r.calendars.standard
,n.current=r,D&&w(r.numberFormat)},t.findCulture=g,t.getCulture=b,t.culture(d);var x=function(e,t){var n=Math.pow(10,t||0);return(Math.round(e*n)/n).toFixed(t)},T=function(e,t,n){if(t){if(m.call(e)==="[object Date]")return E(e,t,n);if(typeof e===y)return S(e,t,n)}return e!==undefined?e:""};D&&(T=o(D.format,D)),t.format=function(e){var t=arguments;return e.replace(p,function(e,n,r){var i=t[parseInt(n,10)+1];return T(i,r?r.substring(1):"")})},t._extractFormat=function(e){return e.slice(0,3)==="{0:"&&(e=e.slice(3,e.length-1)),e},t._activeElement=function(){try{return document.activeElement}catch(e
){return document.documentElement.activeElement}},t._round=x,t.toString=T}(),!function(){function c(e,t,n){return!(e>=t&&e<=n)}function h(e){return e.charAt(0)}function p(t){return e.map(t,h)}function d(e,t){!t&&e.getHours()===23&&e.setHours(e.getHours()+2)}function v(e){var t=0,n=e.length,r=[];for(;t<n;t++)r[t]=(e[t]+"").toLowerCase();return r}function m(e){var t={},n;for(n in e)t[n]=v(e[n]);return t}function g(e,t,n){if(!e)return null;var r=function(e){var n=0;while(t[S]===e)n++,S++;return n>0&&(S-=1),n},s=function(t){var n=f[t]||new RegExp("^\\d{1,"+t+"}"),r=e.substr(x,t).match(n);return r?(
r=r[0],x+=r.length,parseInt(r,10)):null},u=function(t,n){var r=0,i=t.length,s,o,u;for(;r<i;r++){s=t[r],o=s.length,u=e.substr(x,o),n&&(u=u.toLowerCase());if(u==s)return x+=o,r+1}return null},a=function(){var n=!1;return e.charAt(x)===t[S]&&(x++,n=!0),n},l=n.calendars.standard,h=null,v=null,g=null,y=null,b=null,w=null,E=null,S=0,x=0,T=!1,N=new Date,C=l.twoDigitYearMax||2029,k=N.getFullYear(),L,A,O,M,_,D,P,H,B,j,F,I;t||(t="d"),M=l.patterns[t],M&&(t=M),t=t.split(""),O=t.length;for(;S<O;S++){L=t[S];if(T)L==="'"?T=!1:a();else if(L==="d"){A=r("d"),l._lowerDays||(l._lowerDays=m(l.days)),g=A<3?s(2):u(l.
_lowerDays[A==3?"namesAbbr":"names"],!0);if(g===null||c(g,1,31))return null}else if(L==="M"){A=r("M"),l._lowerMonths||(l._lowerMonths=m(l.months)),v=A<3?s(2):u(l._lowerMonths[A==3?"namesAbbr":"names"],!0);if(v===null||c(v,1,12))return null;v-=1}else if(L==="y"){A=r("y"),h=s(A);if(h===null)return null;A==2&&(typeof C=="string"&&(C=k+parseInt(C,10)),h=k-k%100+h,h>C&&(h-=100))}else if(L==="h"){r("h"),y=s(2),y==12&&(y=0);if(y===null||c(y,0,11))return null}else if(L==="H"){r("H"),y=s(2);if(y===null||c(y,0,23))return null}else if(L==="m"){r("m"),b=s(2);if(b===null||c(b,0,59))return null}else if(L==="s"
){r("s"),w=s(2);if(w===null||c(w,0,59))return null}else if(L==="f"){A=r("f"),E=s(A),E!==null&&A>3&&(E=parseInt(E.toString().substring(0,3),10));if(E===null||c(E,0,999))return null}else if(L==="t"){A=r("t"),B=l.AM,j=l.PM,A===1&&(B=p(B),j=p(j)),_=u(j);if(!_&&!u(B))return null}else if(L==="z"){D=!0,A=r("z");if(e.substr(x,1)==="Z"){if(!P)return null;a();continue}H=e.substr(x,6).match(A>2?o:i);if(!H)return null;H=H[0],x=H.length,H=H.split(":"),F=parseInt(H[0],10);if(c(F,-12,13))return null;if(A>2){I=parseInt(H[1],10);if(isNaN(I)||c(I,0,59))return null}}else if(L==="T")P=a();else if(L==="'")T=!0,a();
else if(!a())return null}return h===null&&(h=k),_&&y<12&&(y+=12),g===null&&(g=1),D?(F&&(y+=-F),I&&(b+=-I),e=new Date(Date.UTC(h,v,g,y,b,w,E))):(e=new Date(h,v,g,y,b,w,E),d(e,y)),h<100&&e.setFullYear(h),e.getDate()!==g&&D===undefined?null:e}var n=/\u00A0/g,r=/[eE][\-+]?[0-9]+/,i=/[+|\-]\d{1,2}/,o=/[+|\-]\d{1,2}:\d{2}/,u=/^\/Date\((.*?)\)\/$/,a=["G","g","d","F","D","y","m","T","t"],f={2:/^\d{1,2}/,4:/^\d{4}/},l={}.toString;t.parseDate=function(e,n,r){if(l.call(e)==="[object Date]")return e;var i=0,o=null,f,c;if(e&&e.indexOf("/D")===0){o=u.exec(e);if(o)return new Date(parseInt(o[1],10))}r=t.getCulture
(r);if(!n){n=[],c=r.calendar.patterns,f=a.length;for(;i<f;i++)n[i]=c[a[i]];i=0,n.push("yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd")}n=s(n)?n:[n],f=n.length;for(;i<f;i++){o=g(e,n[i],r);if(o)return o}return o},t.parseInt=function(e,n){var r=t.parseFloat(e,n);return r&&(r|=0),r},t.parseFloat=function(e,i,s){if(!e&&e!==0)return null;if(typeof 
e===y)return e;e=e.toString(),i=t.getCulture(i);var o=i.numberFormat,u=o.percent,a=o.currency,f=a.symbol,l=u.symbol,c=e.indexOf("-"),h,p;return r.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):c>0?null:(c=c>-1,e.indexOf(f)>-1||s&&s.toLowerCase().indexOf("c")>-1?(o=a,h=o.pattern[0].replace("$",f).split("n"),e.indexOf(h[0])>-1&&e.indexOf(h[1])>-1&&(e=e.replace(h[0],"").replace(h[1],""),c=!0)):e.indexOf(l)>-1&&(p=!0,o=u,f=l),e=e.replace("-","").replace(f,"").replace(n," ").split(o[","].replace(n," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:c&&(e*=-1),e&&p&&
(e/=100),e)},D&&(t.parseDate=function(e,t,n){return l.call(e)==="[object Date]"?e:D.parseDate(e,t,n)},t.parseFloat=function(e,t){return typeof e===y?e:e===undefined||e===null?null:(e=D.parseFloat(e,t),isNaN(e)?null:e)})}(),!function(){c.scrollbar=function(){var e=document.createElement("div"),t;return e.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",e.innerHTML="&nbsp;",document.body.appendChild(e),t=e.offsetWidth-e.scrollWidth,document.body.removeChild(e),t},c.isRtl=function(t){return e(t).closest(".k-rtl").length>0};var t=document.createElement("table");try{t.innerHTML="<tr><td></td></tr>"
,c.tbodyInnerHtml=!0}catch(n){c.tbodyInnerHtml=!1}c.touch="ontouchstart"in window,c.msPointers=navigator.msPointerEnabled,c.pointers=navigator.pointerEnabled;var r=c.transitions=!1,s=c.transforms=!1,o="HTMLElement"in window?HTMLElement.prototype:[];c.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,i(["Moz","webkit","O","ms"],function(){var e=this.toString(),n=typeof t.style[e+"Transition"]===v;if(n||typeof t.style[e+"Transform"]===v){var i=e.toLowerCase();return s={css:i!="ms"?"-"+
i+"-":"",prefix:e,event:i==="o"||i==="webkit"?i:""},n&&(r=s,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1}}),c.transforms=s,c.transitions=r,c.devicePixelRatio=window.devicePixelRatio===undefined?1:window.devicePixelRatio;try{c.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,c.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(n){c.screenWidth=window.screen.availWidth,c.screenHeight=window.screen.availHeight}c.detectOS=function(e){var t=!1,n,r=[],i=!/mobile safari/i.test(e),s={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/
,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i
,windows:/windows/,wp:/wp/,meego:/meego|ffos/},u={tablet:/playbook|ipad|fire/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,chrome:/chrome/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i};for(var f in s)if(s.hasOwnProperty(f)){r=e.match(s[f]);if(r){if(f=="windows"&&"plugins"in navigator)return!1;t={},t.device=f,t.tablet=J(f,u,!1),t.browser=J(e,a,"default"),t.name=J(f,o),t[t.name]=!0,t.majorVersion=r[2],t.minorVersion=r[3].replace("_","."),n=t.minorVersion.replace(".","").substr(0,2),t.flatVersion=t.majorVersion+n+(new Array(3-(n.length<3?
n.length:2))).join("0"),t.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||typeof window.PhoneGap!==S||typeof window.cordova!==S,t.android&&(c.devicePixelRatio<1.5&&t.flatVersion<400||i)&&(c.screenWidth>800||c.screenHeight>800)&&(t.tablet=f);break}}return t};var u=c.mobileOS=c.detectOS(navigator.userAgent);c.wpDevicePixelRatio=u.wp?screen.width/320:0,c.kineticScrollNeeded=u&&(c.touch||c.msPointers||c.pointers),c.hasNativeScrolling=!1;if(u.ios&&u.majorVersion>4||u.android&&u.majorVersion>2||u.wp)c.hasNativeScrolling=u;c.mouseAndTouchPresent=c.touch&&!c.mobileOS
.ios&&!c.mobileOS.android,c.detectBrowser=function(e){var t=!1,n=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var i in r)if(r.hasOwnProperty(i)){n=e.match(r[i]);if(n){t={},t[i]=!0,t[n[1].toLowerCase()]=!0,t.version=parseInt(document.documentMode||n[2],10);break}}return t},c.browser=c.detectBrowser(navigator.userAgent),c.zoomLevel=function(){try{return c.touch?document.documentElement.clientWidth/window.innerWidth:c.browser.msie&&c.browser.version>=10?
(top||window).outerWidth/(top||window).innerWidth:1}catch(e){return 1}},c.cssBorderSpacing=typeof document.documentElement.style.borderSpacing!="undefined"&&!(c.browser.msie&&c.browser.version<8),!function(t){var n,r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&e(document.documentElement).addClass("k-"+n+" k-"+n+r)}(c.browser),c.eventCapture=document.documentElement.addEventListener,c.placeholder="placeholder"in document.createElement("input"),c.stableSort=function(){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12].sort(function(){return 0
});return e[0]===0&&e[1]===1&&e[2]===2&&e[3]===3&&e[4]===4&&e[5]===5&&e[6]===6&&e[7]===7&&e[8]===8&&e[9]===9&&e[10]===10&&e[11]===11&&e[12]===12}(),c.matchesSelector=o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.matchesSelector||function(t){var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),r=n.length;while(r--)if(n[r]==this)return!0;return!1},c.pushState=window.history&&window.history.pushState;var a=document.documentMode;c.hashChange="onhashchange"in window&&(!c.browser.msie||!(!a||a<=8))}();var G={left:{reverse
:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},Q={};e.extend(Q,{Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},transitionPromise:function(e,n,r){var i=t.wrap(e);return i.append(n),e.hide(),n.show(),r.completeCallback&&r.completeCallback(e),e}}),"kendoAnimate"in e.fn||r
(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,r){return Z(this,e,t,n,r)},kendoAnimateTo:function(e,t,n,r,i){return et(this,e,t,n,r,i)},kendoAddClass:function(e,n){return t.toggleClass(this,e,n,!0)},kendoRemoveClass:function(e,n){return t.toggleClass(this,e,n,!1)},kendoToggleClass:function(e,n,r){return t.toggleClass(this,e,n,r)}});var nt=/&/g,rt=/</g,it=/>/g,st=function(e){return e.target};c.touch&&(st=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX
,t[0].clientY):e.target},i(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),c.touch?c.mobileOS?(c.mousedown="touchstart",c.mouseup="touchend",c.mousemove="touchmove",c.mousecancel="touchcancel",c.click="touchend",c.resize="orientationchange"):(c.mousedown="mousedown touchstart",c.mouseup="mouseup touchend",c.mousemove="mousemove touchmove",c.mousecancel="mouseleave touchcancel",c.click="click",c.resize="resize"):c.pointers?(c.mousemove="pointermove",c.mousedown="pointerdown",c.mouseup="pointerup",c.mousecancel="pointercancel"
,c.click="pointerup",c.resize="orientationchange resize"):c.msPointers?(c.mousemove="MSPointerMove",c.mousedown="MSPointerDown",c.mouseup="MSPointerUp",c.mousecancel="MSPointerCancel",c.click="MSPointerUp",c.resize="orientationchange resize"):(c.mousemove="mousemove",c.mousedown="mousedown",c.mouseup="mouseup",c.mousecancel="mouseleave",c.click="click",c.resize="resize");var at=function(e,t){var n=t||"d",r,i,s,o,u=1;for(i=0,s=e.length;i<s;i++)o=e[i],o!==""&&(r=o.indexOf("["),r!==0&&(r==-1?o="."+o:(u++,o="."+o.substring(0,r)+" || {})"+o.substring(r))),u++,n+=o+(i<s-1?" || {})":")"));return(new Array
(u)).join("(")+n},ut=/^([a-z]+:)?\/\//i;r(t,{ui:t.ui||{},fx:t.fx||K,effects:t.effects||Q,mobile:t.mobile||{},data:t.data||{},dataviz:t.dataviz||{ui:{roles:{}}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123},support:t.support||c,animate:t.animate||Z,ns:"",attr:function(e){return"data-"+t.ns+e},wrap:j,deepExtend:R,getComputedStyles:Y,size:$,getOffset:t.getOffset||V,parseEffects:t.parseEffects||q,toggleClass:t.toggleClass||tt,directions:t.directions||G,Observable:E,Class:k,Template:
f,template:o(f.compile,f),render:o(f.render,f),stringify:o(l.stringify,l),eventTarget:st,htmlEncode:ot,isLocalUrl:function(e){return e&&!ut.test(e)},expr:function(e,t,n){return e=e||"",typeof t==v&&(n=t,t=!1),n=n||"d",e&&e.charAt(0)!=="["&&(e="."+e),t?e=at(e.split("."),n):e=n+e,e},getter:function(e,n){return T[e]=T[e]||new Function("d","return "+t.expr(e,n))},setter:function(e){return x[e]=x[e]||new Function("d,value",t.expr(e)+"=value")},accessor:function(e){return{get:t.getter(e),set:t.setter(e)}},guid:function(){var e="",t,n;for(t=0;t<32;t++){n=u.random()*16|0;if(t==8||t==12||t==16||t==20)e+="-"
;e+=(t==12?4:t==16?n&3|8:n).toString(16)}return e},roleSelector:function(e){return e.replace(/(\S+)/g,"["+t.attr("role")+"=$1],").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var t=window.console;typeof t!="undefined"&&t.log&&t.log(e)}});var ft=E.extend({init:function(e,n){var i=this;i.element=t.jQuery(e).handler(i),E.fn.init.call(i),n=i.options=r(!0,{},i.options,n),i.element.attr(t.attr("role"))||i.element.attr(t.attr("role"),(n.name||"").toLowerCase()),i.element.data("kendo"+n.prefix+n.name,i),i.bind(i.events
,n)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",r=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(r)?0:r)},setOptions:function(t){var n=this,r=0,i=n.events.length,s;for(;r<i;r++)s=n.events[r],n.options[s]&&t[s]&&n.unbind(s,n.options[s]);e.extend(n.options,t),n.bind(n.events,t)},destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()}});t.notify=a;var lt=/template$/i,ct=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/
,dt=/^\{(\d+)(:[^\}]+)?\}/,pt=/([A-Z])/g;t.initWidget=function(n,r,i){var s,o,u,a,f,l,c,h;i?i.roles&&(i=i.roles):i=t.ui.roles,n=n.nodeType?n:n[0],l=n.getAttribute("data-"+t.ns+"role");if(!l)return;l.indexOf(".")===-1?u=i[l]:u=t.getter(l)(window);if(!u)return;h=mt(n,"dataSource"),r=e.extend({},ht(n,u.fn.options),r),h&&(typeof h===v?r.dataSource=t.getter(h)(window):r.dataSource=h);for(a=0,f=u.fn.events.length;a<f;a++)o=u.fn.events[a],c=mt(n,o),c!==undefined&&(r[o]=t.getter(c)(window));return s=e(n).data("kendo"+u.fn.options.prefix+u.fn.options.name),s?s.setOptions(r):s=new u(n,r),s},t.rolesFromNamespaces=
function(e){var n=[],i,s;e[0]||(e=[t.ui,t.dataviz.ui]);for(i=0,s=e.length;i<s;i++)n[i]=e[i].roles;return r.apply(null,[{}].concat(n.reverse()))},t.init=function(n){var r=t.rolesFromNamespaces(O.call(arguments,1));e(n).find("[data-"+t.ns+"role]").andSelf().each(function(){t.initWidget(this,{},r)})},t.destroy=function(n){e(n).find("[data-"+t.ns+"role]").andSelf().each(function(){var n=e(this),r=t.widgetInstance(n,t.ui)||t.widgetInstance(n,t.mobile.ui)||t.widgetInstance(n,t.dataviz.ui);r&&r.destroy()})},t.parseOptions=ht,r(t.ui,{Widget:ft,roles:{},progress:function(n,r){var i=n.find(".k-loading-mask"
),s=t.support,o=s.browser,u,a,f,l;r?i.length||(u=s.isRtl(n),a=u?"right":"left",l=n.scrollLeft(),f=o.webkit?u?n[0].scrollWidth-n.width()-2*l:0:0,i=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",n.scrollTop()).css(a,Math.abs(l)+f).prependTo(n)):i&&i.remove()},plugin:function(n,r,i){var s=n.fn.options.name,o;r=r||t.ui,i=i||"",r[s]=n,r.roles[s.toLowerCase()]=n,o="getKendo"+i+s,s="kendo"+i+s,e.fn[s]=function(r){var i=this,o;return typeof r===v?(o=O.call(arguments,1
),this.each(function(){var n=e.data(this,s),u,a;if(!n)throw new Error(t.format("Cannot call method '{0}' of {1} before it is initialized",r,s));u=n[r];if(typeof u!==g)throw new Error(t.format("Cannot find method '{0}' of {1}",r,s));a=u.apply(n,o);if(a!==undefined)return i=a,!1})):this.each(function(){new n(this,r)}),i},e.fn[o]=function(){return this.data(s)}}});var gt={bind:function(){return this}},vt=ft.extend({init:function(e,t){ft.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){ft.fn.destroy.call(this),this.element
.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(t.roleSelector("view splitview modalview drawer"));return t.widgetInstance(e,t.mobile.ui)},container:function(){var e=this.element.closest(t.roleSelector("view layout modalview drawer"));return t.widgetInstance(e,t.mobile.ui)||gt}});r(t.mobile,{init:function(e){t.init(e,t.mobile.ui,t.ui,t.dataviz.ui)},ui:{Widget:vt,roles:{},plugin:function(e){t.ui.plugin(e,t.mobile.ui,"Mobile")}}}),t.touchScroller=function(n,r){return e(n).map(function(n,i){return i=e(i),c.kineticScrollNeeded&&t.mobile.ui.Scroller&&!
i.data("kendoMobileScroller")?(i.kendoMobileScroller(r),i.data("kendoMobileScroller")):!1})[0]},t.preventDefault=function(e){e.preventDefault()},t.widgetInstance=function(e,n){var r=n.roles[e.data(t.ns+"role")];if(r)return e.data("kendo"+r.fn.options.prefix+r.fn.options.name)},t.onResize=function(t){var n=t;return c.mobileOS.android&&(n=function(){setTimeout(t,600)}),e(window).on(c.resize,n),n},t.unbindResize=function(t){e(window).off(c.resize,t)},t.attrValue=function(e,n){return e.data(t.ns+n)},t.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"]
,{focusable:function(t){var n=e.attr(t,"tabindex");return yt(t,!isNaN(n)&&n>-1)}});var bt=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],Mt="label, input, [data-rel=external]",St={setupMouseMute:function(){var t=0,n=bt.length,r=document.documentElement;if(St.mouseTrap||!c.eventCapture)return;St.mouseTrap=!0,St.bustClick=!1,St.captureMouse=!1;var i=function(t){St.captureMouse&&(t.type==="click"?St.bustClick&&!e(t.target).is(Mt)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};for(;t<n;t++)r.addEventListener(bt[t],i,!0)},muteMouse:function(
e){St.captureMouse=!0,e.data.bustClick&&(St.bustClick=!0),clearTimeout(St.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(St.mouseTrapTimeoutID),St.mouseTrapTimeoutID=setTimeout(function(){St.captureMouse=!1,St.bustClick=!1},400)}},Tt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};c.touch&&(c.mobileOS.ios||c.mobileOS.android)?Tt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:c.pointers?Tt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"
}:c.msPointers&&(Tt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),c.msPointers&&!("onmspointerenter"in window)&&e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,i=this,s=t.relatedTarget,o=t.handleObj;if(!s||s!==i&&!e.contains(i,s))t.type=o.origType,r=o.handler.apply(this,arguments),t.type=n;return r}}});var xt=function(e){return Tt[e]||e},Ot=/([^ ]+)/g;t.applyEventMap=function(e,t){return e=e.replace(Ot,xt),t&&(e=e.replace(Ot,"$1."+t))
,e};var Dt=e.fn.on;r(!0,kt,e),kt.fn=kt.prototype=new e,kt.fn.constructor=kt,kt.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof kt)&&(n=kt(n)),e.fn.init.call(this,t,n,Ct)},kt.fn.init.prototype=kt.fn;var Ct=kt(document);return r(kt.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||t.guid()),this},on:function(){var e=this,n=e.data("kendoNS");if(arguments.length===1)return Dt.call(e,arguments[0]);var r=e,i=O.call(arguments);typeof i[i.length-1]===S&&i.pop();var s=i[i.length-1],o=t.applyEventMap(i[0],n);if(c.mouseAndTouchPresent&&
o.search(/mouse|click/)>-1&&this[0]!==document.documentElement){St.setupMouseMute();var u=i.length===2?null:i[1],a=o.indexOf("click")>-1&&o.indexOf("touchend")>-1;Dt.call(this,{touchstart:St.muteMouse,touchend:St.unMuteMouse},u,{bustClick:a})}return typeof s===v&&(r=e.data("handler"),s=r[s],i[i.length-1]=function(e){s.call(r,e)}),i[0]=o,Dt.apply(e,i),e},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),t.jQuery=kt,t.eventMap=Tt,t.timezone=function(){function n(n,r){var i,s,o,u=r[3],a=r[4],f=r[5],l=r[8];return l||(r[8]=l={}),l[n]?l[n]:(isNaN(a)?a.indexOf("last"
)===0?(i=new Date(Date.UTC(n,e[u]+1,1,f[0]-24,f[1],f[2],0)),s=t[a.substr(4,3)],o=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+s-o-(s>o?7:0))):a.indexOf(">=")>=0&&(i=new Date(Date.UTC(n,e[u],a.substr(5),f[0],f[1],f[2],0)),s=t[a.substr(0,3)],o=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+s-o+(s<o?7:0))):i=new Date(Date.UTC(n,e[u],a,f[0],f[1],f[2],0)),l[n]=i)}function r(e,t,r){t=t[r];if(!t){var i=r.split(":"),s=0;return i.length>1&&(s=i[0]*60+Number(i[1])),[-1e6,"max","-","Jan",1,[0,0,0],s,"-"]}var o=(new Date(e)).getUTCFullYear();return t=jQuery.grep(t,function(e){var t=e[0],n=e[1];return t<=o&&(n>=o||
t==o&&n=="only"||n=="max")}),t.push(e),t.sort(function(e,t){return typeof e!="number"&&(e=Number(n(o,e))),typeof t!="number"&&(t=Number(n(o,t))),e-t}),t[jQuery.inArray(e,t)-1]}function i(e,t,n){t=t[n];if(!t)throw new Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var r=t.length-1;r>=0;r--){var i=t[r][3];if(i&&e>i)break}var s=t[r+1];if(!s)throw new Error('Timezone "'+n+'" not found on '+e+".");return s}function s(e,t,n,s){typeof e!=y&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())
);var o=i(e,t,s);return{zone:o,rule:r(e,n,o[1])}}function o(e,t){if(t=="Etc/UTC"||t=="Etc/GMT")return 0;var n=s(e,this.zones,this.rules,t),r=n.zone,i=n.rule;return i?r[0]-i[6]:r[0]}function u(e,t){var n=s(e,this.zones,this.rules,t),r=n.zone,i=n.rule,o=r[2];return o.indexOf("/")>=0?o.split("/")[i&&i[6]?1:0]:o.indexOf("%s")>=0?o.replace("%s",!i||i[7]=="-"?"":i[7]):o}function a(e,t,n){typeof t==v&&(t=this.offset(e,t)),typeof n==v&&(n=this.offset(e,n));var r=e.getTimezoneOffset();e=new Date(e.getTime()+(t-n)*6e4);var i=e.getTimezoneOffset();return new Date(e.getTime()+(i-r)*6e4)}function f(e,t){return this
.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}var e={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},t={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:o,convert:a,apply:f,remove:l,abbr:u}}(),t.date=function(){function n(e,t){return t===0&&e.getHours()===23?(e.setHours(e.getHours()+2),!0):!1}function r(e,t,r){var i=e.getHours();r=r||1,t=(t-e.getDay()+7*r)%7,e.setDate(e.getDate()+t),n(e,i)}function i(e,t,n){return e=new Date(e),r(e,t,n),e}function s(e){return new Date(e.getFullYear(),e.getMonth
(),1)}function o(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=s(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t}function u(e){return e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n(e,0),e}function a(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function f(e){return e.getTime()-u(e)}function l(e,n,r){var i=f(n),s=f(r),o;return!e||i==s?!0:(n>=r&&(r+=t),o=f(e),i>o&&(o+=t),s<i&&(s+=t),o>=i&&o<=s)}function c(e,n,r){var i=n.getTime(),s=r.getTime(),o;
return i>=s&&(s+=t),o=e.getTime(),o>=i&&o<=s}function h(e,r){var i=e.getHours();return e=new Date(e),p(e,r*t),n(e,i),e}function p(t,n,r){var i=t.getTimezoneOffset(),s;t.setTime(t.getTime()+n),r||(s=t.getTimezoneOffset()-i,t.setTime(t.getTime()+s*e))}function d(){return u(new Date)}function v(e){return u(e).getTime()==d().getTime()}function m(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var e=6e4,t=864e5;return{adjustDST:n,dayOfWeek:i,setDayOfWeek:r,getDate:u,isInDateRange:c,isInTimeRange:l,isToday:v,nextDay:function(e){
return h(e,1)},previousDay:function(e){return h(e,-1)},toUtcTime:a,MS_PER_DAY:t,MS_PER_MINUTE:e,setTime:p,addDays:h,today:d,toInvariantTime:m,firstDayOfMonth:s,lastDayOfMonth:o,getMilliseconds:f}}(),t.stripWhitespace=function(e){var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);while(t.nextNode())t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode)},t}),define("kendoui/kendo.jquery",["kendoui/kendo.core"],function(e){return e.jQuery}),define("kendoui/kendo.data"
,["kendoui/kendo.jquery","kendoui/kendo.core"],function(e,t){function V(e,t,n,r){return function(i){var s={},o;for(o in i)s[o]=i[o];r?s.field=n+"."+i.field:s.field=n,t==E&&e._notifyChange&&e._notifyChange(s),e.trigger(t,s)}}function J(t,n){if(t===n)return!0;var r=e.type(t),i=e.type(n),s;if(r!==i)return!1;if(r==="date")return t.getTime()===n.getTime();if(r!=="object"&&r!=="array")return!1;for(s in t)if(!J(t[s],n[s]))return!1;return!0}function G(e,t){var n,r;for(r in e){n=e[r];if(s(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function nt(e){this.data=e||[]}function rt(e,t){if(e
){var n=typeof e===v?{field:e,dir:t}:e,r=u(n)?n:n!==undefined?[n]:[];return a(r,function(e){return!!e.dir})}}function st(e){var t,n,r,i,s=e.filters;if(s)for(t=0,n=s.length;t<n;t++)r=s[t],i=r.operator,i&&typeof i===v&&(r.operator=it[i.toLowerCase()]||i),st(r)}function ot(e){if(e&&!o(e)){if(u(e)||!e.filters)e={logic:"and",filters:u(e)?e:[e]};return st(e),e}}function ut(e){return u(e)?e:[e]}function at(e,t){var n=typeof e===v?{field:e,dir:t}:e,r=u(n)?n:n!==undefined?[n]:[];return l(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function ft(e,t){return e&&e.getTime&&
t&&t.getTime?e.getTime()===t.getTime():e===t}function lt(e,n,r,i,s){n=n||[];var o,u,a,f=n.length;for(o=0;o<f;o++){u=n[o],a=u.aggregate;var l=u.field;e[l]=e[l]||{},e[l][a]=ct[a.toLowerCase()](e[l][a],r,t.accessor(l),i,s)}}function ht(e){return typeof e=="number"&&!isNaN(e)}function pt(e){var t,n=e.length,r=new Array(n);for(t=0;t<n;t++)r[t]=e[t].toJSON();return r}function dt(e,t){t=t||{};var n=new nt(e),r=t.aggregate,i=t.filter;return i&&(n=n.filter(i)),n.aggregate(r)}function yt(e,t,n,r,i){var s,o,u,a,f;for(a=0,f=e.length;a<f;a++){s=e[a];for(o in t)u=i[o],u&&u!==o&&(s[u]=t[o](s),delete s[o])}}function bt
(e,t,n,r,i){var s,o,u,a,f;for(a=0,f=e.length;a<f;a++){s=e[a];for(o in t)s[o]=n._parse(o,t[o](s)),u=i[o],u&&u!==o&&delete s[u]}}function wt(e,t,n,r,i){var s,o,u,a;for(o=0,a=e.length;o<a;o++)s=e[o],u=r[s.field],u&&u!=s.field&&(s.field=u),s.value=n._parse(s.field,s.value),s.hasSubgroups?wt(s.items,t,n,r,i):bt(s.items,t,n,r,i)}function Et(e,t,n,r,i,s){return function(u){return u=e(u),u&&!o(r)&&(q.call(u)!=="[object Array]"&&!(u instanceof X)&&(u=[u]),n(u,r,new t,i,s)),u||[]}}function xt(e,t,n,r){var i,s=0,o;while(t.length&&r){i=t[s],o=i.items,e&&e.field===i.field&&e.value===i.value?(e.hasSubgroups&&
e.items.length?xt(e.items[e.items.length-1],i.items,n,r):(o=o.slice(n,r),r-=o.length,e.items=e.items.concat(o)),t.splice(s--,1)):(o=o.slice(n,r),r-=o.length,i.items=o,i.items.length||(t.splice(s--,1),r-=n)),n=0;if(++s>=t.length)break}s<t.length&&t.splice(s,t.length-s)}function Tt(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].hasSubgroups?r=r.concat(Tt(e[t].items)):r=r.concat(e[t].items.slice());return r}function Nt(e,t){var n,r,i,s;if(t)for(n=0,r=e.length;n<r;n++)i=e[n],s=i.items,i.hasSubgroups?Nt(s,t):s.length&&!(s[0]instanceof t)&&(s.type=t,s.wrapAll(s,s))}function Ct(e,t){var n,r;for(n=0,r=
e.length;n<r;n++)if(e[n].hasSubgroups){if(Ct(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function kt(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n].uid==t.uid)return t=e[n],e.splice(n,1),t}function Lt(e,t){var n,r,i,s;for(i=e.length-1,s=0;i>=s;i--)r=e[i],n={value:t.get(r.field),field:r.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function At(e,t){return t?Mt(e,function(e){return e[t.idField]===t.id}):-1}function Ot(e,t){return t?Mt(e,function(e){return e.uid==t.uid}):-1}function Mt(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1}function _t
(e,t){if(e&&!o(e)){var n=e[t],r;return s(n)?r=n.from||n.field||t:r=e[t]||t,i(r)?t:r}return t}function Dt(e,t){var n,r,i={};for(var s in e)s!=="filters"&&(i[s]=e[s]);if(e.filters){i.filters=[];for(n=0,r=e.filters.length;n<r;n++)i.filters[n]=Dt(e.filters[n],t)}else i.field=_t(t.fields,i.field);return i}function Pt(e,t){var n,r,i=[],s,o;for(n=0,r=e.length;n<r;n++){s={},o=e[n];for(var a in o)s[a]=o[a];s.field=_t(t.fields,s.field),s.aggregates&&u(s.aggregates)&&(s.aggregates=Pt(s.aggregates,t)),i.push(s)}return i}function jt(t,n){var r=e(t)[0].children,i,s,o=[],u,a=n[0],f=n[1],l,c;for(i=0,s=r.length
;i<s;i++){u={},c=r[i];if(c.disabled)continue;u[a.field]=c.text,l=c.attributes.value,l&&l.specified?l=c.value:l=c.text,u[f.field]=l,o.push(u)}return o}function Ft(t,n){var r=e(t)[0].tBodies[0],i=r?r.rows:[],s,o,u,a=n.length,f=[],l,c,h,p;for(s=0,o=i.length;s<o;s++){c={},p=!0,l=i[s].cells;for(u=0;u<a;u++)h=l[u],h.nodeName.toLowerCase()!=="th"&&(p=!1,c[n[u].field]=h.innerHTML);p||f.push(c)}return f}function qt(e){return function(){var t=this._data,n=Ht.fn[e].apply(this,F.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function Ut(t,n){var r=e(t).children(),i,s,o=[],u,a=n[0].field
,f=n[1]&&n[1].field,l=n[2]&&n[2].field,c=n[3]&&n[3].field,h,p,d,v,m;for(i=0,s=r.length;i<s;i++)u={_loaded:!0},h=r.eq(i),d=h[0].firstChild,m=h.children(),t=m.filter("ul"),m=m.filter(":not(ul)"),p=h.attr("data-id"),p&&(u.id=p),d&&(u[a]=d.nodeType==3?d.nodeValue:m.text()),f&&(u[f]=m.find("a").attr("href")),c&&(u[c]=m.find("img").attr("src")),l&&(v=m.find(".k-sprite").prop("className"),u[l]=v&&e.trim(v.replace("k-sprite",""))),t.length&&(u.items=Ut(t.eq(0),n)),h.attr("data-hasChildren")=="true"&&(u.hasChildren=!0),o.push(u);return o}var n=e.extend,r=e.proxy,i=e.isFunction,s=e.isPlainObject,o=e.isEmptyObject
,u=e.isArray,a=e.grep,f=e.ajax,l,c=e.each,h=e.noop,p=t.Observable,d=t.Class,v="string",m="function",g="create",y="read",b="update",w="destroy",E="change",S="sync",x="get",T="error",N="requestStart",C="progress",k="requestEnd",L=[g,y,b,w],A=function(e){return e},O=t.getter,M=t.stringify,_=Math,D=[].push,P=[].join,H=[].pop,B=[].splice,j=[].shift,F=[].slice,I=[].unshift,q={}.toString,R=t.support.stableSort,U=/^\/Date\((.*?)\)\/$/,z=/(\r+|\n+)/g,W=/(?=['\\])/g,X=p.extend({init:function(e,t){var n=this;n.type=t||$,p.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},toJSON:function(){var e,t=this.length
,n,r=new Array(t);for(e=0;e<t;e++)n=this[e],n instanceof $&&(n=n.toJSON()),r[e]=n;return r},parent:h,wrapAll:function(e,t){var n=this,r,i,s=function(){return n};t=t||[];for(r=0,i=e.length;r<i;r++)t[r]=n.wrap(e[r],s);return t},wrap:function(e,t){var n=this,r;return e!==null&&q.call(e)==="[object Object]"&&(r=e instanceof n.type||e instanceof Y,r||(e=e instanceof $?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(E,function(e){n.trigger(E,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e=this.length,t=this
.wrapAll(arguments),n;return n=D.apply(this,t),this.trigger(E,{action:"add",index:e,items:t}),n},slice:F,join:P,pop:function(){var e=this.length,t=H.apply(this);return e&&this.trigger(E,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var r=this.wrapAll(F.call(arguments,2)),i,s,o;i=B.apply(this,[e,t].concat(r));if(i.length){this.trigger(E,{action:"remove",index:e,items:i});for(s=0,o=i.length;s<o;s++)i[s].children&&i[s].unbind(E)}return n&&this.trigger(E,{action:"add",index:e,items:r}),i},shift:function(){var e=this.length,t=j.apply(this);return e&&this.trigger(E,{action:"remove"
,index:0,items:[t]}),t},unshift:function(){var e=this.wrapAll(arguments),t;return t=I.apply(this,e),this.trigger(E,{action:"add",index:0,items:e}),t},indexOf:function(e){var t=this,n,r;for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(e){var t=0,n=this.length;for(;t<n;t++)e(this[t],t,this)},map:function(e){var t=0,n=[],r=this.length;for(;t<r;t++)n[t]=e(this[t],t,this);return n},filter:function(e){var t=0,n=[],r,i=this.length;for(;t<i;t++)r=this[t],e(r,t,this)&&(n[n.length]=r);return n},find:function(e){var t=0,n,r=this.length;for(;t<r;t++){n=this[t];if(e(n,t,this))return n
}},every:function(e){var t=0,n,r=this.length;for(;t<r;t++){n=this[t];if(!e(n,t,this))return!1}return!0},some:function(e){var t=0,n,r=this.length;for(;t<r;t++){n=this[t];if(e(n,t,this))return!0}return!1},remove:function(e){this.splice(this.indexOf(e),1)}}),$=p.extend({init:function(e){var n=this,r,i,s=function(){return n};p.fn.init.call(this);for(i in e)r=e[i],i.charAt(0)!="_"&&(r=n.wrap(r,i,s)),n[i]=r;n.uid=t.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&e!=="_events"&&typeof this[e]!==m&&e!=="uid"},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)
},toJSON:function(){var e={},t,n;for(n in this)if(this.shouldSerialize(n)){t=this[n];if(t instanceof $||t instanceof X)t=t.toJSON();e[n]=t}return e},get:function(e){var n=this,r;return n.trigger(x,{field:e}),e==="this"?r=n:r=t.getter(e,!0)(n),r},_set:function(e,n){var r=this,i=e.indexOf(".")>=0;if(i){var s=e.split("."),o="";while(s.length>1){o+=s.shift();var u=t.getter(o,!0)(r);if(u instanceof $)return u.set(s.join("."),n),i;o+="."}}return t.setter(e)(r,n),i},set:function(e,n){var r=this,i=t.getter(e,!0)(r);i!==n&&(r.trigger("set",{field:e,value:n})||(!r._set(e,r.wrap(n,e,function(){return r}))||
e.indexOf("(")>=0||e.indexOf("[")>=0)&&r.trigger(E,{field:e}))},parent:h,wrap:function(e,t,n){var r=this,i=q.call(e);if(e!=null&&(i==="[object Object]"||i==="[object Array]")){var s=e instanceof X,o=e instanceof Ht;if(i==="[object Object]"&&!o&&!s)e instanceof $||(e=new $(e)),e.parent()!=n()&&(e.bind(x,V(r,x,t,!0)),e.bind(E,V(r,E,t,!0)));else if(i==="[object Array]"||s||o)!s&&!o&&(e=new X(e)),e.parent()!=n()&&e.bind(E,V(r,E,t,!1));e.parent=n}return e}}),K={number:function(e){return t.parseFloat(e)},date:function(e){return t.parseDate(e)},"boolean":function(e){return typeof e===v?e.toLowerCase()==="true"
:e!=null?!!e:e},string:function(e){return e!=null?e+"":e},"default":function(e){return e}},Q={string:"",number:0,date:new Date,"boolean":!1,"default":""},Y=$.extend({init:function(t){var n=this;if(!t||e.isEmptyObject(t))t=e.extend({},n.defaults,t);$.fn.init.call(n,t),n.dirty=!1,n.idField&&(n.id=n.get(n.idField),n.id===undefined&&(n.id=n._defaultId))},shouldSerialize:function(e){return $.fn.shouldSerialize.call(this,e)&&e!=="uid"&&(this.idField==="id"||e!=="id")&&e!=="dirty"&&e!=="_accessors"},_parse:function(e,t){var n=this,r=e,i=n.fields||{},s;return e=i[e],e||(e=G(i,r)),e&&(s=e.parse,!s&&e.type&&
(s=K[e.type.toLowerCase()])),s?s(t):t},_notifyChange:function(e){var t=e.action;if(t=="add"||t=="remove")this.dirty=!0},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),J(t,r.get(e))||(r.dirty=!0,$.fn.set.call(r,e,t,n)))},accept:function(e){var t=this,n=function(){return t},r;for(r in e)t._set(r,t.wrap(e[r],r,n));t.idField&&(t.id=t.get(t.idField)),t.dirty=!1},isNew:function(){return this.id===this._defaultId}});Y.define=function(e,t){t===undefined&&(t=e,e=Y);var r,i=n({defaults:{}},t),s,o,u,a,f,l,c={},h,p=i.id
;p&&(i.idField=p),i.id&&delete i.id,p&&(i.defaults[p]=i._defaultId="");if(q.call(i.fields)==="[object Array]"){for(f=0,l=i.fields.length;f<l;f++)o=i.fields[f],typeof o===v?c[o]={}:o.field&&(c[o.field]=o);i.fields=c}for(s in i.fields)o=i.fields[s],u=o.type||"default",a=null,h=s,s=typeof o.field===v?o.field:s,o.nullable||(a=i.defaults[h!==s?h:s]=o.defaultValue!==undefined?o.defaultValue:Q[u.toLowerCase()]),t.id===s&&(i._defaultId=a),i.defaults[h!==s?h:s]=a,o.parse=o.parse||K[u];return r=e.extend(i),r.define=function(e){return Y.define(r,e)},i.fields&&(r.fields=i.fields,r.idField=i.idField),r};var Z=
{selector:function(e){return i(e)?e:O(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),e==null&&n==null?0:e==null?-1:n==null?1:e.localeCompare?e.localeCompare(n):e>n?1:e<n?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return e.dir=="desc"?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var r=e[0](t,n),i,s;for(i=1,s=e.length;i<s;i++)r=r||e[i](t,n);return r}}},et=n({},Z,{asc:function(e){var t=this.selector(e);return function(e,n){var r=t(e),i=t(n);return r&&r.getTime&&i&&i.getTime&&(r=r.getTime(),i=i.getTime())
,r===i?e.__position-n.__position:r==null?-1:i==null?1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var r=t(e),i=t(n);return r&&r.getTime&&i&&i.getTime&&(r=r.getTime(),i=i.getTime()),r===i?e.__position-n.__position:r==null?1:i==null?-1:i.localeCompare?i.localeCompare(r):r<i?1:-1}},create:function(e){return this[e.dir](e.field)}});l=function(e,t){var n,r=e.length,i=new Array(r);for(n=0;n<r;n++)i[n]=t(e[n],n,e);return i};var tt=function(){function e(e){return e.replace(W,"\\").replace(z,"")}function t(t,n,r,i){var s;return r!=null&&(typeof 
r===v&&(r=e(r),s=U.exec(r),s?r=new Date(+s[1]):i?(r="'"+r.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):r="'"+r+"'"),r.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",r=r.getTime())),n+" "+t+" "+r}return{eq:function(e,n,r){return t("==",e,n,r)},neq:function(e,n,r){return t("!=",e,n,r)},gt:function(e,n,r){return t(">",e,n,r)},gte:function(e,n,r){return t(">=",e,n,r)},lt:function(e,n,r){return t("<",e,n,r)},lte:function(e,n,r){return t("<=",e,n,r)},startswith:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith
:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,r){return r&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}();nt.filterExpr=function(e){var n=[],r={and:" && ",or:" || "},i,s,o,u,a=[],f=[],l,c,h=e.filters;for(i=0,s=h.length;i<s;i++)o=h[i],l=o.field,c=o.operator,o.filters?(u=nt.
filterExpr(o),o=u.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(f.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(a.length+t)+"]"}),f.push.apply(f,u.operators),a.push.apply(a,u.fields)):(typeof l===m?(u="__f["+a.length+"](d)",a.push(l)):u=t.expr(l),typeof c===m?(o="__o["+f.length+"]("+u+", "+o.value+")",f.push(c)):o=tt[(c||"eq").toLowerCase()](u,o.value,o.ignoreCase!==undefined?o.ignoreCase:!0)),n.push(o);return{expression:"("+n.join(r[e.logic])+")",fields:a,operators:f}};var it={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq"
,ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};nt.normalizeFilter=ot,nt.prototype={toArray:function(){return this.data},range:function(e,t){return new nt(this.data.slice(e,e+t))},skip:function(e){return new nt(this.data.slice(e))},take:function(e){return new nt(this.data.slice(0,e))},select:function(
e){return new nt(l(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new nt(this.data.slice(0).sort(Z.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var r,i,s=rt(e,t),o=[];n=n||Z;if(s.length){for(r=0,i=s.length;r<i;r++)o.push(n.create(s[r]));return this.orderBy({compare:n.combine(o)})}return this},filter:function(e){var t,n,r,i,s,o=this.data,u,a,f=[],l;e=ot(e);if(!e||e.filters.length===0)return this;i=nt.filterExpr(e),u=i.fields,a=i.operators,s=l=new Function
("d, __f, __o","return "+i.expression);if(u.length||a.length)l=function(e){return s(e,u,a)};for(t=0,r=o.length;t<r;t++)n=o[t],l(n)&&f.push(n);return new nt(f)},group:function(e,t){e=at(e||[]),t=t||this.data;var n=this,r=new nt(n.data),i;return e.length>0&&(i=e[0],r=r.groupBy(i).select(function(n){var r=(new nt(t)).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:e.length>1?(new nt(n.items)).group(e.slice(1),r.toArray()).toArray():n.items,hasSubgroups:e.length>1,aggregates:r.aggregate(i.aggregates)}})),r},groupBy:function(e){if(o(e)||!this
.data.length)return new nt([]);var n=e.field,r=this._sortForGrouping(n,e.dir||"asc"),i=t.accessor(n),s,u=i.get(r[0],n),a={field:n,value:u,items:[]},f,l,c,h=[a];for(l=0,c=r.length;l<c;l++)s=r[l],f=i.get(s,n),ft(u,f)||(u=f,a={field:n,value:u,items:[]},h.push(a)),a.items.push(s);return new nt(h)},_sortForGrouping:function(e,t){var n,r,i=this.data;if(!R){for(n=0,r=i.length;n<r;n++)i[n].__position=n;i=(new nt(i)).sort(e,t,et).toArray();for(n=0,r=i.length;n<r;n++)delete i[n].__position;return i}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,r={};if(e&&e.length)for(t=0,n=this.data.length
;t<n;t++)lt(r,e,this.data[t],t,n);return r}};var ct={sum:function(e,t,n){return(e||0)+n.get(t)},count:function(e){return(e||0)+1},average:function(e,t,n,r,i){return e=(e||0)+n.get(t),r==i-1&&(e/=i),e},max:function(e,t,n){var r=n.get(t);return e=e||0,e<r&&(e=r),e},min:function(e,t,n){var r=n.get(t);return ht(e)||(e=r),e>r&&ht(r)&&(e=r),e}};nt.process=function(e,t){t=t||{};var n=new nt(e),r=t.group,i=at(r||[]).concat(rt(t.sort||[])),s,o=t.filter,u=t.skip,a=t.take;return o&&(n=n.filter(o),s=n.toArray().length),i&&(n=n.sort(i),r&&(e=n.toArray())),u!==undefined&&a!==undefined&&(n=n.range(u,a)),r&&(n=
n.group(r,e)),{total:s,data:n.toArray()}};var vt=d.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),mt=d.extend({init:function(e){var t=this,r;e=t.options=n({},t.options,e),c(L,function(t,n){typeof e[n]===v&&(e[n]={url:e[n]})}),t.cache=e.cache?gt.create(e.cache):{find:h,add:h},r=e.parameterMap,t.parameterMap=i(r)?r:function(e){var t={};return c(e,function(e,n){e in r&&(e=r[e],s(e)&&(n=e.value(n),e=e.key)),t[e]=n}),t}},options:{parameterMap:A},create
:function(e){return f(this.setup(e,g))},read:function(t){var n=this,r,i,s,o=n.cache;t=n.setup(t,y),r=t.success||h,i=t.error||h,s=o.find(t.data),s!==undefined?r(s):(t.success=function(e){o.add(t.data,e),r(e)},e.ajax(t))},update:function(e){return f(this.setup(e,b))},destroy:function(e){return f(this.setup(e,w))},setup:function(e,t){e=e||{};var r=this,s,o=r.options[t],u=i(o.data)?o.data(e.data):o.data;return e=n(!0,{},o,e),s=n(!0,{},u,e.data),e.data=r.parameterMap(s,t),i(e.url)&&(e.url=e.url(s)),e}}),gt=d.extend({init:function(){this._store={}},add:function(e,t){e!==undefined&&(this._store[M(e)]=
t)},find:function(e){return this._store[M(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[M(e)]}});gt.create=function(e){var t={inmemory:function(){return new gt}};return s(e)&&i(e.find)?e:e===!0?new gt:t[e]()};var St=d.extend({init:function(e){var t=this,n,i,o,u;e=e||{};for(n in e)i=e[n],t[n]=typeof i===v?O(i):i;u=e.modelBase||Y,s(t.model)&&(t.model=o=u.define(t.model));if(t.model){var a=r(t.data,t),f=r(t.groups,t),l=r(t.serialize,t),h={},p={},d={},m={},g=!1,y;o=t.model,o.fields&&(c(o.fields,function(e,t){var n;y=e,s(t)&&t.field?y=t.field:typeof t===v&&(y=t),s(t)&&t
.from&&(n=t.from),g=g||n&&n!==e||y!==e,p[e]=O(n||y),d[e]=O(e),h[n||y]=e,m[e]=n||y}),!e.serialize&&g&&(t.serialize=Et(l,o,yt,d,h,m))),t.data=Et(a,o,bt,p,h,m),t.groups=Et(f,o,wt,p,h,m)}},errors:function(e){return e?e.errors:null},parse:A,data:A,total:function(e){return e.length},groups:A,aggregates:function(){return{}},serialize:function(e){return e}}),Ht=p.extend({init:function(e){var r=this,i,s;e&&(s=e.data),e=r.options=n({},r.options,e),r._map={},r._prefetch={},r._data=[],r._pristineData=[],r._ranges=[],r._view=[],r._pristine=[],r._destroyed=[],r._pageSize=e.pageSize,r._page=e.page||(e.pageSize?1
:undefined),r._sort=rt(e.sort),r._filter=ot(e.filter),r._group=at(e.group),r._aggregate=e.aggregate,r._total=e.total,p.fn.init.call(r),r.transport=Bt.create(e,s),r.reader=new t.data.readers[e.schema.type||"json"](e.schema),i=r.reader.model||{},r._data=r._observe(r._data),r.bind([T,E,N,S,k,C],e)},options:{data:[],schema:{modelBase:Y},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_flatData:function(e){return this._isServerGrouped()?Tt(e):e},parent:
h,get:function(e){var t,n,r=this._flatData(this._data);for(t=0,n=r.length;t<n;t++)if(r[t].id==e)return r[t]},getByUid:function(e){var t,n,r=this._flatData(this._data);if(!r)return;for(t=0,n=r.length;t<n;t++)if(r[t].uid==e)return r[t]},indexOf:function(e){return Ot(this._data,e)},at:function(e){return this._data[e]},data:function(e){var t=this;if(e===undefined)return t._data;t._data=this._observe(e),t._ranges=[],t._addRange(t._data),t._total=t._data.length,t._process(t._data)},view:function(){return this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){
return this.reader.model?new this.reader.model(e):new $(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Y||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,Lt(this.group(),t)):this._data.splice(e,0,t),t},remove:function(e){var t,n=this,r=n._isServerGrouped();return this._eachItem(n._data,function(i){t=kt(i,e);if(t&&r)return(!t.isNew||!t.isNew())&&n._destroyed.push(t),!0}),e},sync:function(){var t=this,n,r,i=[],s=[],o=t._destroyed,u=t._flatData(t._data);if(!t.reader.model)return;for(n=0,r=u.length;n<r;n++)u[n].isNew()?i.push(u[n]):u[n].dirty&&s.push(u[n]);var a=
t._send("create",i);a.push.apply(a,t._send("update",s)),a.push.apply(a,t._send("destroy",o)),e.when.apply(null,a).then(function(){var e,n;for(e=0,n=arguments.length;e<n;e++)t._accept(arguments[e]);t._change({action:"sync"}),t.trigger(S)})},cancelChanges:function(e){var n=this;e instanceof t.data.Model?n._cancelModel(e):(n._destroyed=[],n._data=n._observe(n._pristineData),n.options.serverPaging&&(n._total=n.reader.total(n._pristine)),n._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;e<t;e++)if(n[e].isNew()||n[e].dirty)return!0;return!1
},_accept:function(t){var n=this,r=t.models,i=t.response,s=0,u=n._isServerGrouped(),a=n._pristineData,f=t.type,l;n.trigger(k,{response:i,type:f});if(i&&!o(i)){i=n.reader.parse(i);if(n._handleCustomErrors(i))return;i=n.reader.data(i),e.isArray(i)||(i=[i])}else i=e.map(r,function(e){return e.toJSON()});f==="destroy"&&(n._destroyed=[]);for(s=0,l=r.length;s<l;s++)f!=="destroy"?(r[s].accept(i[s]),f==="create"?a.push(u?Lt(n.group(),r[s]):i[s]):f==="update"&&n._updatePristineForModel(r[s],i[s])):n._removePristineForModel(r[s])},_updatePristineForModel:function(e,n){this._executeOnPristineForModel(e,function(
e,r){t.deepExtend(r[e],n)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(n){var r=At(n,e);if(r>-1)return t(r,n),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t(e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?Ct(e,t):t(e))},_pristineForModel:function(e){var t,n,r=function(r){n=At(r,e);if(n>-1)return t=r[n],!0};return this._eachPristineItem
(r),t},_cancelModel:function(e){var t=this._pristineForModel(e),n;this._eachItem(this._data,function(r){n=Ot(r,e),n!=-1&&(!e.isNew()&&t?r[n].accept(t):r.splice(n,1))})},_promise:function(t,r,i){var s=this,o=s.transport;return e.Deferred(function(e){s.trigger(N,{type:i}),o[i].call(o,n({success:function(t){e.resolve({response:t,models:r,type:i})},error:function(t,n,r){e.reject(t),s.error(t,n,r)}},t))}).promise()},_send:function(e,t){var n=this,r,i,s=[],o=n.reader.serialize(pt(t));if(n.options.batch)t.length&&s.push(n._promise({data:{models:o}},t,e));else for(r=0,i=t.length;r<i;r++)s.push(n._promise
({data:o[r]},[t[r]],e));return s},read:function(e){var t=this,n=t._params(e);t._queueRequest(n,function(){t.trigger(N,{type:"read"})?t._dequeueRequest():(t.trigger(C),t._ranges=[],t.transport.read({data:n,success:r(t.success,t),error:r(t.error,t)}))})},success:function(t){var n=this,r=n.options;n.trigger(k,{response:t,type:"read"}),t=n.reader.parse(t);if(n._handleCustomErrors(t)){n._dequeueRequest();return}n._pristine=s(t)?e.extend(!0,{},t):t.slice?t.slice(0):t,n._total=n.reader.total(t),n._aggregate&&r.serverAggregates&&(n._aggregateResult=n.reader.aggregates(t)),t=n._readData(t),n._pristineData=
t.slice(0),n._data=n._observe(t),n._addRange(n._data),n._process(n._data),n._dequeueRequest()},_addRange:function(e){var t=this,n=t._skip||0,r=n+t._flatData(e).length;t._ranges.push({start:n,end:r,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(k,{}),this.trigger(T,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,r=n({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete r.take,delete r.skip
,delete r.page,delete r.pageSize),t.options.serverGrouping?t.reader.model&&r.group&&(r.group=Pt(r.group,t.reader.model)):delete r.group,t.options.serverFiltering?t.reader.model&&r.filter&&(r.filter=Dt(r.filter,t.reader.model)):delete r.filter,t.options.serverSorting?t.reader.model&&r.sort&&(r.sort=Pt(r.sort,t.reader.model)):delete r.sort,t.options.serverAggregates?t.reader.model&&r.aggregate&&(r.aggregate=Pt(r.aggregate,t.reader.model)):delete r.aggregate,r},_queueRequest:function(e,t){var n=this;n._requestInProgress?n._pending={callback:r(t,n),options:e}:(n._requestInProgress=!0,n._pending=undefined
,t())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(T,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t=this,n=t.reader.model,i=!1;return n&&e.length&&(i=!(e[0]instanceof n)),e instanceof X?i&&(e.type=t.reader.model,e.wrapAll(e,e)):(e=new X(e,t.reader.model),e.parent=function(){return t.parent()}),t._isServerGrouped()&&Nt(e,n),t._changeHandler&&t
._data&&t._data instanceof X?t._data.unbind(E,t._changeHandler):t._changeHandler=r(t._change,t),e.bind(E,t._changeHandler)},_change:function(e){var t=this,n,r,i=e?e.action:"";if(i==="remove")for(n=0,r=e.items.length;n<r;n++)(!e.items[n].isNew||!e.items[n].isNew())&&t._destroyed.push(e.items[n]);if(!t.options.autoSync||i!=="add"&&i!=="remove"&&i!=="itemchange"){var s=parseInt(t._total||t.reader.total(t._pristine),10);i==="add"?s+=e.items.length:i==="remove"?s-=e.items.length:i!=="itemchange"&&i!=="sync"&&!t.options.serverPaging&&(s=t.reader.total(t._pristine)),t._total=s,t._process(t._data,e)}else t
.sync()},_process:function(e,t){var n=this,r={},i;n.options.serverPaging!==!0&&(r.skip=n._skip,r.take=n._take||n._pageSize,r.skip===undefined&&n._page!==undefined&&n._pageSize!==undefined&&(r.skip=(n._page-1)*n._pageSize)),n.options.serverSorting!==!0&&(r.sort=n._sort),n.options.serverFiltering!==!0&&(r.filter=n._filter),n.options.serverGrouping!==!0&&(r.group=n._group),n.options.serverAggregates!==!0&&(r.aggregate=n._aggregate,n._aggregateResult=dt(e,r)),i=nt.process(e,r),n._view=i.data,i.total!==undefined&&!n.options.serverFiltering&&(n._total=i.total),t=t||{},t.items=t.items||n._view,n.trigger
(E,t)},_mergeState:function(e){var t=this;return e!==undefined&&(t._pageSize=e.pageSize,t._page=e.page,t._sort=e.sort,t._filter=e.filter,t._group=e.group,t._aggregate=e.aggregate,t._skip=e.skip,t._take=e.take,t._skip===undefined&&(t._skip=t.skip(),e.skip=t.skip()),t._take===undefined&&t._pageSize!==undefined&&(t._take=t._pageSize,e.take=t._take),e.sort&&(t._sort=e.sort=rt(e.sort)),e.filter&&(t._filter=e.filter=ot(e.filter)),e.group&&(t._group=e.group=at(e.group)),e.aggregate&&(t._aggregate=e.aggregate=ut(e.aggregate))),e},query:function(e){var t=this,n,r=t.options.serverSorting||t.options.serverPaging||
t.options.serverFiltering||t.options.serverGrouping||t.options.serverAggregates;r||(t._data===undefined||t._data.length===0)&&!t._destroyed.length?t.read(t._mergeState(e)):t.trigger(N,{type:"read"})||(t.trigger(C),n=nt.process(t._data,t._mergeState(e)),t.options.serverFiltering||(n.total!==undefined?t._total=n.total:t._total=t._data.length),t._view=n.data,t._aggregateResult=dt(t._data,e),t.trigger(k,{}),t.trigger(E,{items:n.data}))},fetch:function(t){var n=this;return e.Deferred(function(e){var r=function(r){n.unbind(T,i),e.resolve(),t&&t.call(n,r)},i=function(t){e.reject(t)};n.one(E,r),n.one(T
,i),n._query()}).promise()},_query:function(e){var t=this;t.query(n({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var t=this,n=t.page(),r=t.total();e=e||{};if(!n||r&&n+1>t.totalPages())return;return t._skip=n*t.take(),n+=1,e.page=n,t._query(e),n},prev:function(e){var t=this,n=t.page();e=e||{};if(!n||n===1)return;return t._skip=t._skip-t.take(),n-=1,e.page=n,t._query(e),n},page:function(e){var t=this,n;if(e!==undefined){e=_.max(_.min(_.max(e,1),t.totalPages()),1),t._query({page:e});return}return n=t.skip(),n!==
undefined?_.round((n||0)/(t.take()||1))+1:undefined},pageSize:function(e){var t=this;if(e!==undefined){t._query({pageSize:e,page:1});return}return t.take()},sort:function(e){var t=this;if(e!==undefined){t._query({sort:e});return}return t._sort},filter:function(e){var t=this;if(e===undefined)return t._filter;t._query({filter:e,page:1})},group:function(e){var t=this;if(e!==undefined){t._query({group:e});return}return t._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var t=this;if(e!==undefined){t._query({aggregate:e});return}return t._aggregate},aggregates:function(
){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return _.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,r=_.min(e+t,n.total());return!n.options.serverPaging&&n.data.length>0?!0:n._findRange(e,r).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},range:function(e,t){e=_.min(e||0,this.total());var n=this,r=_.max(_.floor(e/t),0)*t,i=_.min(r+t,n.total()),s;s=n._findRange(e,_.min(e+t,n.total()));if(s.length)
{n._skip=e>n.skip()?_.min(i,(n.totalPages()-1)*n.take()):r,n._take=t;var o=n.options.serverPaging,u=n.options.serverSorting,a=n.options.serverFiltering;try{n.options.serverPaging=!0,n.options.serverSorting=!0,n.options.serverFiltering=!0,o&&(n._data=s=n._observe(s)),n._process(s)}finally{n.options.serverPaging=o,n.options.serverSorting=u,n.options.serverFiltering=a}return}t!==undefined&&(n._rangeExists(r,i)?r<e&&n.prefetch(i,t,function(){n.range(e,t)}):n.prefetch(r,t,function(){e>r&&i<n.total()&&!n._rangeExists(i,_.min(i+t,n.total()))?n.prefetch(i,t,function(){n.range(e,t)}):n.range(e,t)}))},_findRange
:function(e,t){var n=this,r=n._ranges,i,s=[],o,u,a,f,l,c,h,p=n.options,d=p.serverSorting||p.serverPaging||p.serverFiltering||p.serverGrouping||p.serverAggregates,v,m,g;for(o=0,g=r.length;o<g;o++){i=r[o];if(e>=i.start&&e<=i.end){m=0;for(u=o;u<g;u++){i=r[u],v=n._flatData(i.data);if(v.length&&e+m>=i.start){l=i.data,c=i.end;if(!d){var y=at(n.group()||[]).concat(rt(n.sort()||[]));h=nt.process(i.data,{sort:y,filter:n.filter()}),v=l=h.data,h.total!==undefined&&(c=h.total)}a=0,e+m>i.start&&(a=e+m-i.start),f=v.length,c>t&&(f-=c-t),m+=f-a,s=n._mergeGroups(s,l,a,f);if(t<=i.end&&m==t-e)return s}}break}}return[
]},_mergeGroups:function(e,t,n,r){if(this._isServerGrouped()){var i=t.toJSON(),s;return e.length&&(s=e[e.length-1]),xt(s,i,n,r),e.concat(i)}return e.concat(t.slice(n,r))},skip:function(){var e=this;return e._skip===undefined?e._page!==undefined?(e._page-1)*(e.take()||1):undefined:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n){var r=this;return function(i){var s=!1,o={start:e,end:t,data:[]},u,a;r._dequeueRequest();for(u=0,a=r._ranges.length;u<a;u++)if(r._ranges[u].start===e){s=!0,o=r._ranges[u];break}s||r._ranges.push(o),r.trigger(k,{response:
i,type:"read"}),i=r.reader.parse(i),o.data=r._observe(r._readData(i)),o.end=o.start+r._flatData(o.data).length,r._ranges.sort(function(e,t){return e.start-t.start}),r._total=r.reader.total(i),n&&n()}},prefetch:function(e,t,n){var r=this,i=_.min(e+t,r.total()),s={take:t,skip:e,page:e/t+1,pageSize:t,sort:r._sort,filter:r._filter,group:r._group,aggregate:r._aggregate};r._rangeExists(e,i)?n&&n():(clearTimeout(r._timeout),r._timeout=setTimeout(function(){r._queueRequest(s,function(){r.trigger(N,{type:"read"})?r._dequeueRequest():r.transport.read({data:r._params(s),success:r._prefetchSuccessHandler(e
,i,n)})})},100))},_rangeExists:function(e,t){var n=this,r=n._ranges,i,s;for(i=0,s=r.length;i<s;i++)if(r[i].start<=e&&r[i].end>=t)return!0;return!1}}),Bt={};Bt.create=function(e,r){var o,u=e.transport;return u?(u.read=typeof u.read===v?{url:u.read}:u.read,e.type&&(t.data.transports[e.type]&&!s(t.data.transports[e.type])?o=new t.data.transports[e.type](n(u,{data:r})):u=n(!0,{},t.data.transports[e.type],u),e.schema=n(!0,{},t.data.schemas[e.type],e.schema)),o||(o=i(u.read)?u:new mt(u))):o=new vt({data:e.data}),o},Ht.create=function(e){e=e&&e.push?{data:e}:e;var r=e||{},i=r.data,s=r.fields,u=r.table
,a=r.select,f,l,c={},h;!i&&s&&!r.transport&&(u?i=Ft(u,s):a&&(i=jt(a,s)));if(t.data.Model&&s&&(!r.schema||!r.schema.model)){for(f=0,l=s.length;f<l;f++)h=s[f],h.type&&(c[h.field]=h);o(c)||(r.schema=n(!0,r.schema,{model:{fields:c}}))}return r.data=i,r instanceof Ht?r:new Ht(r)};var It=Y.define({init:function(e){var r=this,s=r.hasChildren||e&&e.hasChildren,o="items",u={};t.data.Model.fn.init.call(r,e),typeof r.children===v&&(o=r.children),u={schema:{data:o,model:{hasChildren:s,id:r.idField}}},typeof r.children!==v&&n(u,r.children),u.data=e,s||(s=u.schema.data),typeof s===v&&(s=t.getter(s)),i(s)&&(r
.hasChildren=!!s.call(r,r)),r._childrenOptions=u,r.hasChildren&&r._initChildren(),r._loaded=!(!e||!e[o]&&!e._loaded)},_initChildren:function(){var e=this,t,n,r;e.children instanceof Rt||(t=e.children=new Rt(e._childrenOptions),n=t.transport,r=n.parameterMap,n.parameterMap=function(t){return t[e.idField||"id"]=e.id,r&&(t=r(t)),t},t.parent=function(){return e},t.bind(E,function(t){t.node=t.node||e,e.trigger(E,t)}),t.bind(T,function(t){var n=e.parent();n&&(t.node=t.node||e,n.trigger(T,t))}),e._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren
:!1,level:function(){var e=this.parentNode(),t=0;while(e&&e.parentNode)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},load:function(){var e=this,t={};e.hasChildren&&(e._initChildren(),t[e.idField||"id"]=e.id,e._loaded||(e.children._data=undefined),e.children.one(E,function(){e._loaded=!0,e._updateChildrenField()})._query(t))},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){if(e===undefined)return this._loaded;this._loaded=e},shouldSerialize:function(e)
{return Y.fn.shouldSerialize.call(this,e)&&e!=="children"&&e!=="_loaded"&&e!=="hasChildren"&&e!=="_childrenOptions"}}),Rt=Ht.extend({init:function(e){var t=It.define({children:e});Ht.fn.init.call(this,n(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(T,function(t){e.trigger(T,t)})},remove:function(e){var t=e.parentNode(),n=this,r;return t&&t._initChildren&&(n=t.children),r=Ht.fn.remove.call(n,e),t&&!n.data().length&&(t.hasChildren=!1),r},success:qt("success"),data:qt("data"),insert:function(e,t){var n=this.parent();
return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),Ht.fn.insert.call(this,e,t)},_find:function(e,t){var n,r,i,s,o;i=Ht.fn[e].call(this,t);if(i)return i;s=this._flatData(this.data());if(!s)return;for(n=0,r=s.length;n<r;n++){o=s[n].children;if(!(o instanceof Rt))continue;i=o[e](t);if(i)return i}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});Rt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,r=t.fields,i=t.list;return n&&n._dataSource?n._dataSource:(!n&&r&&!t.transport&&i&&(n=Ut(i,r)),t.data=n,t instanceof Rt?t:new 
Rt(t))};var zt=t.Observable.extend({init:function(e,n,r){t.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!r;var i=this;e.bind("change",function(){i._change()}),this._syncWithDataSource(),this.setViewSize(n)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var t=this.pageSize;if(e>=this.total()){this.trigger("endreached",{index:e});return}if(e<this.dataOffset||e>this.skip+t){var n=Math.floor(e/t)*t;this.range(n)}e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange):e===this.nextPageThreshold?
this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange));var r=this.dataSource.at(e-this.dataOffset);return r===undefined&&this.trigger("endreached",{index:e}),r},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,r=this.dataSource;!r.inRange(n,t)&&!this._prefetching&&this.prefetch&&(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),r.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched"
,{skip:n,take:t})}))},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize,r=_.max(_.floor(n/t),0)*t+t;this.offset=n,this.dataSource.prefetch(r,t,function(){e._goToRange(n,!0)})},range:function(e){if(this.offset===e)return;var t=this,n=this.pageSize,r=_.max(_.floor(e/n),0)*n+n,i=this.dataSource;this.offset=e,this._recalculate(),i.inRange(e,n)?this._goToRange(e):this.prefetch&&i.prefetch(r,n,function(){t._goToRange(e,!0)})},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},_goToRange:function(e,t){if(this
.offset!==e)return;this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize)},_change:function(){var e=this.dataSource,t=e.firstItemUid();this.length=e.lastRange().end,this._firstItemUid!==t&&(this._syncWithDataSource(),this._recalculate(),this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip(),this.pageSize=e.pageSize()},_recalculate:function(){var e=this.pageSize,t=this.offset,n=
this.viewSize,r=Math.ceil(t/e)*e;this.skip=r,this.midPageThreshold=r+e-1,this.nextPageThreshold=r+n-1,this.prefetchThreshold=r+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=r+e-n,this.nextFullRange=r,this.previousMidRange=t-n,this.previousFullRange=r-e}}),Wt=t.Observable.extend({init:function(e,n){var r=this;t.Observable.fn.init.call(r),this.dataSource=e,this.batchSize=n,this._total=0,this.buffer=new zt(e,n*3),this.buffer.bind({endreached:function(e){r.trigger("endreached",{index:e.index})},prefetching:function(e){r.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched
:function(e){r.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){r._total=0,r.trigger("reset")},resize:function(){r._total=this.length/r.batchSize,r.trigger("resize",{total:r.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t=this.buffer,n=e*this.batchSize,r=this.batchSize,i=[],s;t.offset>n&&t.at(t.offset-1);for(var o=0;o<r;o++){s=t.at(n+o);if(s===undefined)return;i.push(s)}return i},total:function(){return this._total}});n(!0,t.data,{readers:{json:St},Query:nt,DataSource:Ht,HierarchicalDataSource:Rt,Node:It,ObservableObject
:$,ObservableArray:X,LocalTransport:vt,RemoteTransport:mt,Cache:gt,DataReader:St,Model:Y,Buffer:zt,BatchBuffer:Wt})}),define("kendoui/kendo.fx",["kendoui/kendo.jquery","kendoui/kendo.core"],function(e,t){function X(e){return parseInt(e,10)}function V(e,t){return X(e.css(t))}function $(e){var n=e.effects;return n==="zoom"&&(n="zoom:in fade:in"),n==="fade"&&(n="fade:in"),n==="slide"&&(n="tile:left"),/^slide:(.+)$/.test(n)&&(n="tile:"+RegExp.$1),n==="overlay"&&(n="slideIn:left"),/^overlay:(.+)$/.test(n)&&(n="slideIn:"+RegExp.$1),e.effects=t.parseEffects(n),U&&n=="tile:left"&&(e.previousDivisor=3),
e}function J(e){var t=[];for(var n in e)t.push(n);return t}function K(e){for(var t in e)b.indexOf(t)!=-1&&w.indexOf(t)==-1&&delete e[t];return e}function Q(e,t){var n=[],r={},i,s,u,f;for(s in t)i=s.toLowerCase(),f=a&&b.indexOf(i)!=-1,!o.hasHW3D&&f&&w.indexOf(i)==-1?delete t[s]:(u=t[s],f?n.push(s+"("+u+")"):r[s]=u);return n.length&&(r[j]=n.join(" ")),r}function G(e,t){if(a){var n=e.css(j);if(n==C)return t=="scale"?1:0;var r=n.match(new RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),i=0;return r?i=X(r[1]):(r=n.match(p)||[0,0,0,0,0],t=t.toLowerCase(),v.test(t)?i=parseFloat(r[3]/r[2]):t=="translatey"?i=parseFloat
(r[4]/r[2]):t=="scale"?i=parseFloat(r[2]):t=="rotate"&&(i=parseFloat(Math.atan2(r[2],r[1])))),i}return parseFloat(e.css(t))}function et(e){return e.charAt(0).toUpperCase()+e.substring(1)}function tt(e,t){var i=Z.extend(t),s=i.prototype.directions;n[et(e)]=i,n.Element.prototype[e]=function(e,t,n,r){return new i(this.element,e,t,n,r)},r(s,function(t,r){n.Element.prototype[e+et(r)]=function(e,t,n){return new i(this.element,r,e,t,n)}})}function it(e,t,n,r){tt(e,{directions:rt,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(
){return this._shouldHide},prepare:function(e,i){var s=this,o,u,a=this._direction==="out",f=s.element.data(t),l=!isNaN(f)&&f!=n;l?o=f:typeof this._startValue!="undefined"?o=this._startValue:o=a?n:r,typeof this._endValue!="undefined"?u=this._endValue:u=a?r:n,this._reverse?(e[t]=u,i[t]=o):(e[t]=o,i[t]=u),s._shouldHide=i[t]===r}})}function at(e,n){var r=t.directions[n].vertical,i=e[r?A:L]()/2+"px";return ot[n].replace("$size",i)}var n=t.effects,r=e.each,i=e.extend,s=e.proxy,o=t.support,u=o.browser,a=o.transforms,f=o.transitions,l={scale:0,scalex:0,scaley:0,scale3d:0},c={translate:0,translatex:0,translatey
:0,translate3d:0},h=typeof document.documentElement.style.zoom!="undefined"&&!a,p=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,d=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,v=/translatex?$/i,m=/(zoom|fade|expand)(\w+)/,g=/(zoom|fade|expand)/,y=/[xy]$/i,b=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],w=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate"
,"translatex","translatey","matrix"],E={rotate:"deg",scale:"",skew:"px",translate:"px"},S=a.css,x=Math.round,T="",N="px",C="none",k="auto",L="width",A="height",O="hidden",M="origin",_="abortId",D="overflow",P="translate",H="completeCallback",B=S+"transition",j=S+"transform",F=S+"backface-visibility",I=S+"perspective",q="1500px",R="perspective("+q+")",U=o.mobileOS&&o.mobileOS.majorVersion==7,z={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top"
,transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};t.directions=z,i(e.fn,{kendoStop:function(e,t){return f?n.stopQueue(this,e||!1,t||!1):this.stop(e,t)}});if(a&&!f){r(w,function(t,n){e.fn[n]=function(t){if(typeof t=="undefined")return G(this,n);var r=e(this)[0],i=n+"("+t+E[n.replace(y,"")]+")";return r.style.cssText.indexOf(j)==-1?e(this).css(j
,i):r.style.cssText=r.style.cssText.replace(new RegExp(n+"\\(.*?\\)","i"),i),this},e.fx.step[n]=function(t){e(t.elem)[n](t.now)}});var W=e.fx.prototype.cur;e.fx.prototype.cur=function(){return w.indexOf(this.prop)!=-1?parseFloat(e(this.elem)[this.prop]()):W.apply(this,arguments)}}t.toggleClass=function(e,t,n,s){return t&&(t=t.split(" "),f&&(n=i({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(B,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(B,"").css(A)},n.duration)),r(t,function(t,n){e.toggleClass(n,s)})),e},t.parseEffects=function(e,t){var n={};return typeof e=="string"?
r(e.split(" "),function(e,r){var i=!g.test(r),s=r.replace(m,function(e,t,n){return t+":"+n.toLowerCase()}),o=s.split(":"),u=o[1],a={};o.length>1&&(a.direction=t&&i?z[u].reverse:u),n[o[0]]=a}):r(e,function(e){var r=this.direction;r&&t&&!g.test(e)&&(this.direction=z[r].reverse),n[e]=this}),n},f&&i(n,{transition:function(t,n,r){var s,o=0,u=t.data("keys")||[],a;r=i({duration:200,ease:"ease-out",complete:null,exclusive:"all"},r);var l=!1,c=function(){l||(l=!0,a&&(clearTimeout(a),a=null),t.removeData(_).dequeue().css(B,"").css(B),r.complete.call(t))};r.duration=e.fx?e.fx.speeds[r.duration]||r.duration
:r.duration,s=Q(t,n),e.merge(u,J(s)),t.data("keys",e.unique(u)).height(),t.css(B,r.exclusive+" "+r.duration+"ms "+r.ease).css(B),t.css(s).css(j),f.event&&(t.one(f.event,c),r.duration!==0&&(o=500)),a=setTimeout(c,r.duration+o),t.data(_,a),t.data(H,c)},stopQueue:function(e,n,r){var i,s=e.data("keys"),o=!r&&s,u=e.data(H);return o&&(i=t.getComputedStyles(e[0],s)),u&&u(),o&&e.css(i),e.removeData("keys").stop(n)}});var Y=t.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var r=this,s,o,u,l=t.length,c=r.element,h=r.options,p=e.Deferred(),d=
{},v={},m,g,y;r.effects=t,p.then(e.proxy(r,"complete")),c.data("animating",!0);for(o=0;o<l;o++){s=t[o],s.setReverse(h.reverse),s.setOptions(h),r.addRestoreProperties(s.restore),s.prepare(d,v),g=s.children();for(u=0,y=g.length;u<y;u++)g[u].duration(h.duration).run()}for(var b in h.effects)i(v,h.effects[b].properties);c.is(":visible")||i(d,{display:c.data("olddisplay")||"block"}),a&&!h.reset&&(m=c.data("targetTransform"),m&&(d=i(m,d))),d=Q(c,d),a&&!f&&(d=K(d)),c.css(d).css(j);for(o=0;o<l;o++)t[o].setup();return h.init&&h.init(),c.data("targetTransform",v),n.animate(c,v,i({},h,{complete:p.resolve}
)),p.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){var t=this.element,n,r=0,i=e.length;for(;r<i;r++)n=e[r],this.restore.push(n),t.data(n)||t.data(n,t.css(n))},restoreCallback:function(){var e=this.element;for(var t=0,n=this.restore.length;t<n;t++){var r=this.restore[t];e.css(r,e.data(r))}},complete:function(){var t=this,n=0,r=t.element,i=t.options,s=t.effects,o=s.length;r.removeData("animating").dequeue(),i.hide&&r.data("olddisplay",r.css("display")).hide(),this.restoreCallback(),h&&!a&&setTimeout(e.proxy(this,"restoreCallback"),0);for(;n<o;n++)s[
n].teardown();i.completeCallback&&i.completeCallback(r)}});n.promise=function(e,r){var i=[],s,o=new Y(e,r),u=t.parseEffects(r.effects),a;r.effects=u;for(var f in u)s=n[et(f)],s&&(a=new s(e,u[f].direction),i.push(a));i[0]?o.run(i):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),r.init&&r.init(),e.dequeue(),o.complete())},n.transitionPromise=function(e,t,r){return n.animateTo(e,t,r),e},i(n,{animate:function(t,s,o){var h=o.transition!==!1;delete o.transition,f&&"transition"in n&&h?n.transition(t,s,o):a?t.animate(K(s),{queue:!1,show:!1,hide:!1,duration:o.duration,complete
:o.complete}):t.each(function(){var t=e(this),n={};r(b,function(e,r){var o,u=s?s[r]+" ":null;if(u){var f=s;if(r in l&&s[r]!==undefined)o=u.match(d),a&&i(f,{scale:+o[0]});else if(r in c&&s[r]!==undefined){var h=t.css("position"),p=h=="absolute"||h=="fixed";t.data(P)||(p?t.data(P,{top:V(t,"top")||0,left:V(t,"left")||0,bottom:V(t,"bottom"),right:V(t,"right")}):t.data(P,{top:V(t,"marginTop")||0,left:V(t,"marginLeft")||0}));var v=t.data(P);o=u.match(d);if(o){var m=r==P+"y"?0:+o[1],g=r==P+"y"?+o[1]:+o[2];p?(isNaN(v.right)?isNaN(m)||i(f,{left:v.left+m}):isNaN(m)||i(f,{right:v.right-m}),isNaN(v.bottom)?
isNaN(g)||i(f,{top:v.top+g}):isNaN(g)||i(f,{bottom:v.bottom-g})):(isNaN(m)||i(f,{marginLeft:v.left+m}),isNaN(g)||i(f,{marginTop:v.top+g}))}}!a&&r!="scale"&&r in f&&delete f[r],f&&i(n,f)}}),u.msie&&delete n.scale,t.animate(n,{queue:!1,show:!1,hide:!1,duration:o.duration,complete:o.complete})})},animateTo:function(t,n,r){function l(e){n[0].style.cssText="",t.each(function(){this.style.cssText=""}),o.mobileOS.android||a.css(D,f),r.completeCallback&&r.completeCallback.call(t,e)}var s,a=t.parents().filter(n.parents()).first(),f;r=$(r),o.mobileOS.android||(f=a.css(D),a.css(D,"hidden")),e.each(r.effects
,function(e,t){s=s||t.direction}),r.complete=u.msie?function(){setTimeout(l,0)}:l,r.previous=r.reverse?n:t,r.reset=!0,(r.reverse?t:n).each(function(){e(this).kendoAnimate(i(!0,{},r)),r.complete=null,r.previous=null})}});var Z=t.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(
e){return this._duration=e,this},compositeRun:function(){var e=this,t=new Y(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t=this,r=t.element,s=0,o=t.restore,u=o.length,l,c=e.Deferred(),h={},p={},d,v=t.children(),m=v.length;c.then(e.proxy(t,"_complete")),r.data("animating",!0);for(s=0;s<u;s++)l=o[s],r.data(l)||r.data(l,r.css(l));for(s=0;s<m;s++)v[s].duration(t._duration).run();return t.prepare(h,p),r.is(":visible")||i(h,{display:r.data("olddisplay"
)||"block"}),a&&(d=r.data("targetTransform"),d&&(h=i(d,h))),h=Q(r,h),a&&!f&&(h=K(h)),r.css(h).css(j),t.setup(),r.data("targetTransform",p),n.animate(r,p,{duration:t._duration,complete:c.resolve}),c.promise()},stop:function(){var t=0,n=this.children(),r=n.length;for(t=0;t<r;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e=this.element;for(var t=0,n=this.restore.length;t<n;t++){var r=this.restore[t];e.css(r,e.data(r))}},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay"
,n.css("display")).hide(),h&&!a&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){i(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),nt=["left","right","up","down"],rt=["in","out"];tt("slideIn",{directions:nt,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n=this,r,i=n.element,s=z[n._direction],o=-s.modifier*(s.vertical?i.outerHeight():i.outerWidth()),u=o/(n.options&&n.options.divisor||1)+N,f="0px";n._reverse&&
(r=e,e=t,t=r),a?(e[s.transition]=u,t[s.transition]=f):(e[s.property]=u,t[s.property]=f)}}),tt("tile",{directions:nt,init:function(e,t,n){Z.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,n=e._reverse,r=e.options.previous,i=e.options.previousDivisor||1,s=e._direction,o=[t.fx(e.element).slideIn(s).setReverse(n)];return r&&o.push(t.fx(r).slideIn(z[s].reverse).divisor(i).setReverse(!n)),o}}),it("fade","opacity",1,0),it("zoom","scale",1,.01),tt("slideMargin",{prepare:function(e,t){var n=this
,r=n.element,i=n.options,s=r.data(M),o=i.offset,u,a=n._reverse;!a&&s===null&&r.data(M,parseFloat(r.css("margin-"+i.axis))),u=r.data(M)||0,t["margin-"+i.axis]=a?u:u+o}}),tt("slideTo",{prepare:function(e,t){var n=this,r=n.element,i=n.options,s=i.offset.split(","),o=n._reverse;a?(t.translatex=o?0:s[0],t.translatey=o?0:s[1]):(t.left=o?0:s[0],t.top=o?0:s[1]),r.css("left")}}),tt("expand",{directions:["horizontal","vertical"],restore:[D],prepare:function(e,t){var n=this,r=n.element,i=n.options,s=n._reverse,o=n._direction==="vertical"?A:L,u=r[0].style[o],a=r.data(o),f=parseFloat(a||u),l=x(r.css(o,k)[o]
());e.overflow=O,f=i&&i.reset?l||f:f||l,t[o]=(s?0:f)+N,e[o]=(s?f:0)+N,a===undefined&&r.data(o,u)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,n=e._direction==="vertical"?A:L,r=t.data(n);(r==k||r===T)&&setTimeout(function(){t.css(n,k).css(n)},0)}});var st={position:"absolute",marginLeft:0,marginTop:0,scale:1};tt("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,r=n.element,s=n.options,o=n._reverse,u=s.target,a,f=G(r,"scale"),l=u.offset
(),c=u.outerHeight()/r.outerHeight();i(e,st),t.scale=1,r.css(j,"scale(1)").css(j),a=r.offset(),r.css(j,"scale("+f+")");var h=0,p=0,d=l.left-a.left,v=l.top-a.top,m=h+r.outerWidth(),g=p,y=d+u.outerWidth(),b=v,w=(v-p)/(d-h),E=(b-g)/(y-m),S=(p-g-w*h+E*m)/(E-w),x=p+w*(S-h);e.top=a.top,e.left=a.left,e.transformOrigin=S+N+" "+x+N,o?e.scale=c:t.scale=c}});var ot={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ut={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"
},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};tt("turningPage",{directions:nt,init:function(e,t,n){Z.prototype.init.call(this,e,t),this._container=n},prepare:function(e,n){var r=this,i=r._reverse,s=i?z[r._direction].reverse:r._direction,o=ut[s];e.zIndex=1,r._clipInHalf&&(e.clip=at(r._container,t.directions[s].reverse)),e[F]=O,n[j]=R+(i?o.start:o.end),e[j]=R+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!
n||!t&&n},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),tt("staticPage",{directions:nt,init:function(e,t,n){Z.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,r=n._reverse?z[n._direction].reverse:n._direction;e.clip=at(n._container,r),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},face:function(e){return this._face=e,this}}),tt("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,r){Z.prototype
.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=r},children:function(){var e=this,n=e.options,r=e._direction==="horizontal"?"left":"top",i=t.directions[r].reverse,s=e._reverse,o,u=n.face.clone(!0).removeAttr("id"),a=n.back.clone(!0).removeAttr("id"),f=e.element;return s&&(o=r,r=i,i=o),[t.fx(n.face).staticPage(r,f).face(!0).setReverse(s),t.fx(n.back).staticPage(i,f).setReverse(s),t.fx(u).turningPage(r,f).face(!0).clipInHalf(!0).temporary().setReverse(s),t.fx(a).turningPage(i,f).clipInHalf(!0).temporary().setReverse(s)]},prepare:function(e,t){e[I]=q,e.transformStyle="preserve-3d"
,e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),tt("flip",{directions:["horizontal","vertical"],init:function(e,t,n,r){Z.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=r},children:function(){var e=this,n=e.options,r=e._direction==="horizontal"?"left":"top",i=t.directions[r].reverse,s=e._reverse,o,u=e.element;return s&&(o=r,r=i,i=o),[t.fx(n.face).turningPage(r,u).face(!0).setReverse(s),t.fx(n.back).turningPage(i,u).setReverse(s)]},prepare:function(e){e[I]=q,e.transformStyle="preserve-3d"}});var ft=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},lt=t.Class.extend({init:function(){var e=this;e._tickProxy=s(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.done()||(this._started=!0,ft(this._tickProxy))},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;if(!e._started)return;e.tick(),e.done()?(e._started=!1,e.onEnd()):ft(e._tickProxy)}}),ct=lt.extend({init:function(e){var t=this;i(t,e),lt.fn.init
.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,Date.now()-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration=typeof e.duration=="number"?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=Date.now(),t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});i(ct,{easeOutExpo:function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},easeOutBack:function(e,t,n,r,i){return i=1.70158
,n*((e=e/r-1)*e*((i+1)*e+i)+1)+t}}),n.animationFrame=function(e){ft.call(window,e)},n.Animation=lt,n.Transition=ct,n.createEffect=tt}),define("kendoui/kendo.popup",["kendoui/kendo.jquery","kendoui/kendo.core"],function(e,t){function B(t,n){return t===n||e.contains(t,n)}var n=t.ui,r=n.Widget,i=t.support,s=t.getOffset,o=t._activeElement,u="open",a="close",f="deactivate",l="activate",c="center",h="left",p="right",d="top",v="bottom",m="absolute",g="hidden",y="body",b="location",w="position",E="visible",S="effects",x="k-state-active",T="k-state-border",N=/k-state-border-(\w+)/,C=".k-picker-wrap, .k-dropdown-wrap, .k-link"
,k="down",L=e(window),A=e(document.documentElement),O="resize scroll",M=i.transitions.css,_=M+"transform",D=e.extend,P=".kendoPopup",H=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],j=r.extend({init:function(n,i){var s=this,o;i=i||{},i.isRtl&&(i.origin=i.origin||v+" "+p,i.position=i.position||d+" "+p),r.fn.init.call(s,n,i),n=s.element,i=s.options,s.collisions=i.collision?i.collision.split(" "):[],s.collisions.length===1&&s.collisions.push(s.collisions[0]),o=e(s.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo
)[0]||o[0]||y),s.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:m}).appendTo(i.appendTo).on("mouseenter"+P,function(){s._hovered=!0}).on("mouseleave"+P,function(){s._hovered=!1}),s.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),D(i.animation.open,{complete:function(){s.wrapper.css({overflow:E}),s.trigger(l)}}),D(i.animation.close,{complete:function(){s.wrapper.hide();var r=s.wrapper.data(b),o=e(i.anchor),u,a;r&&s.wrapper.css(r),i.anchor!=y&&(u=(o[0].className.match(N)||["","down"])[1],a=T+"-"+u,o.removeClass
(a).children(C).removeClass(x).removeClass(a),n.removeClass(T+"-"+t.directions[u].reverse)),s._closing=!1,s.trigger(f)}}),s._mousedownProxy=function(e){s._mousedown(e)},s._resizeProxy=function(e){s._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+P,e.proxy(s.toggle,s))},events:[u,l,a,f],options:{name:"Popup",toggleEvent:"click",origin:v+" "+h,position:d+" "+h,anchor:y,collision:"flip fit",viewport:window,copyAnchorStyles:!0,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var n=this,i=n.options,s=n.element
.off(P),o;r.fn.destroy.call(n),i.toggleTarget&&e(i.toggleTarget).off(P),i.modal||(A.unbind(k,n._mousedownProxy),L.unbind(O,n._resizeProxy)),i.appendTo[0]===document.body&&(o=s.parent(".k-animation-container"),o[0]?o.remove():s.remove()),t.destroy(n.element.children())},open:function(n,r){var s=this,o={isFixed:!isNaN(parseInt(r,10)),x:n,y:r},a=s.element,f=s.options,l="down",c,h,p=e(f.anchor);if(!s.visible()){f.copyAnchorStyles&&a.css(t.getComputedStyles(p[0],H));if(a.data("animating")||s.trigger(u))return;f.modal||(A.unbind(k,s._mousedownProxy).bind(k,s._mousedownProxy),!i.mobileOS.ios&&!i.mobileOS
.android&&L.unbind(O,s._resizeProxy).bind(O,s._resizeProxy)),s.wrapper=h=t.wrap(a).css({overflow:g,display:"block",position:m}),i.mobileOS.android&&h.add(p).css(_,"translatez(0)"),h.css(w),e(f.appendTo)[0]==document.body&&h.css(d,"-10000px"),c=D(!0,{},f.animation.open),s.flipped=s._position(o),c.effects=t.parseEffects(c.effects,s.flipped),l=c.effects.slideIn?c.effects.slideIn.direction:l;if(f.anchor!=y){var v=T+"-"+l;a.addClass(T+"-"+t.directions[l].reverse),p.addClass(v).children(C).addClass(x).addClass(v)}a.data(S,c.effects).kendoStop(!0).kendoAnimate(c)}},toggle:function(){var e=this;e[e.visible
()?a:u]()},visible:function(){return this.element.is(":"+E)},close:function(){var n=this,r=n.options,i,s,o,u;if(n.visible()){i=n.wrapper[0]?n.wrapper:t.wrap(n.element).hide();if(n._closing||n.trigger(a))return;n.element.find(".k-popup").each(function(){var t=e(this),n=t.data("kendoPopup");n&&n.close()}),A.unbind(k,n._mousedownProxy),L.unbind(O,n._resizeProxy),s=D(!0,{},r.animation.close),o=n.element.data(S),u=s.effects,!u&&!t.size(u)&&o&&t.size(o)&&(s.effects=o,s.reverse=!0),n._closing=!0,n.element.kendoStop(!0),i.css({overflow:g}),n.element.kendoAnimate(s)}},_resize:function(e){var t=this;e.type==="resize"?
(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):!t._hovered&&!B(t.element[0],o())&&t.close()},_mousedown:function(n){var r=this,i=r.element[0],s=r.options,o=e(s.anchor)[0],u=s.toggleTarget,a=t.eventTarget(n),f=e(a).closest(".k-popup"),l=f.parent().parent(".km-shim").length;f=f[0];if(!l&&f&&f!==r.element[0])return;if(e(n.target).closest("a").data("rel")==="popover")return;!B(i,a)&&!B(o,a)&&(!u||!B(e(u)[0],a))&&r.close()},_fit:function(e,t,n){var r=0;return e+t>n&&(r=n-(e+t)),e<0&&(r=-e),r},_flip:function(e,t,n,r,i,s,o){var u=0;return o=
o||t,s!==i&&s!==c&&i!==c&&(e+o>r&&(u+=-(n+t)),e+u<0&&(u+=n+t)),u},_position:function(t){var n=this,r=n.element.css(w,""),o=n.wrapper,u=n.options,a=e(u.viewport),f=e(a).offset(),l=e(u.anchor),c=u.origin.toLowerCase().split(" "),h=u.position.toLowerCase().split(" "),p=n.collisions,d=i.zoomLevel(),v,g,y,E=10002,S=0,x;v=l.parents().filter(o.siblings());if(v[0]){y=Number(e(v).css("zIndex"));if(y)E=y+1;else{g=l.parentsUntil(v);for(x=g.length;S<x;S++)y=Number(e(g[S]).css("zIndex")),y&&E<y&&(E=y+1)}}o.css("zIndex",E),t&&t.isFixed?o.css({left:t.x,top:t.y}):o.css(n._align(c,h));var T=s(o,w,l[0]===o.offsetParent
()[0]),N=s(o),C=l.offsetParent().parent(".k-animation-container,.k-popup,.k-group");C.length&&(T=s(o,w,!0),N=s(o)),a[0]===window?(N.top-=window.pageYOffset||document.documentElement.scrollTop||0,N.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(N.top-=f.top,N.left-=f.left),n.wrapper.data(b)||o.data(b,D({},T));var k=D({},N),L=D({},T);p[0]==="fit"&&(L.top+=n._fit(k.top,o.outerHeight(),a.height()/d)),p[1]==="fit"&&(L.left+=n._fit(k.left,o.outerWidth(),a.width()/d));var A=D({},L);return p[0]==="flip"&&(L.top+=n._flip(k.top,r.outerHeight(),l.outerHeight(),a.height()/d,c[0],h[0],o.
outerHeight())),p[1]==="flip"&&(L.left+=n._flip(k.left,r.outerWidth(),l.outerWidth(),a.width()/d,c[1],h[1],o.outerWidth())),r.css(w,m),o.css(L),L.left!=A.left||L.top!=A.top},_align:function(t,n){var r=this,i=r.wrapper,o=e(r.options.anchor),u=t[0],a=t[1],f=n[0],l=n[1],h=s(o),d=e(r.options.appendTo),m,g=i.outerWidth(),y=i.outerHeight(),b=o.outerWidth(),w=o.outerHeight(),E=h.top,S=h.left,x=Math.round;return d[0]!=document.body&&(m=s(d),E-=m.top,S-=m.left),u===v&&(E+=w),u===c&&(E+=x(w/2)),f===v&&(E-=y),f===c&&(E-=x(y/2)),a===p&&(S+=b),a===c&&(S+=x(b/2)),l===p&&(S-=g),l===c&&(S-=x(g/2)),{top:E,left:
S}}});n.plugin(j)}),define("kendoui/kendo.list",["kendoui/kendo.jquery","kendoui/kendo.core"],function(e,t){function A(t,n){t.filters&&(t.filters=e.grep(t.filters,function(e){return A(e,n),e.filters?e.filters.length:e.field!=n}))}var n=t.ui,r=n.Widget,i=t.keys,s=t.support,o=t.htmlEncode,u=t._activeElement,a="id",f="li",l="change",c="character",h="k-state-focused",p="k-state-hover",d="k-loading",v="open",m="close",g="select",y="selected",b="progress",w="requestEnd",E="width",S=e.extend,x=e.proxy,T=s.browser,N=T.msie&&T.version<9,C=/"/g,k={ComboBox:"DropDownList",DropDownList:"ComboBox"},L=r.extend
({init:function(t,n){var i=this,o=i.ns,u;r.fn.init.call(i,t,n),t=i.element,i._isSelect=t.is(g),i._template(),i.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:s.kineticScrollNeeded?"":"auto"}).on("mouseenter"+o,f,function(){e(this).addClass(p)}).on("mouseleave"+o,f,function(){e(this).removeClass(p)}).on("click"+o,f,x(i._click,i)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),i.list=e("<div class='k-list-container'/>").append(i.ul).on("mousedown"+o,function(e){e.preventDefault()}),u=t.attr(a),u&&(i.list.attr(a,u+"-list"),i.ul.attr(a,u+"_listbox"),i._optionID=u+"_option_selected"
),i._accessors(),i._initValue()},options:{valuePrimitive:!1},setOptions:function(e){r.fn.setOptions.call(this,e),e&&e.enable!==undefined&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===undefined?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===undefined?!0:e)})},_filterSource:function(e){var t=this,n=t.options,r=t.dataSource,i=r.filter()||{};A(i,n.dataTextField),e&&(i=i.filters||[],i.push(e)),r.filter(i)},_initValue:function(){var e=this,t=e.options.value;t?e.element.val(t):t=e.element.val(),e._old=
t},_ignoreCase:function(){var e=this,t=e.dataSource.reader.model,n;t&&t.fields&&(n=t.fields[e.options.dataTextField],n&&n.type&&n.type!=="string"&&(e.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var t=this,n=t._optionID;if(e===undefined)return t._current;t._current&&(t._current.removeClass(h).removeAttr("aria-selected").removeAttr(a),t._focused.removeAttr("aria-activedescendant")),e&&(e.addClass(h),t._scroll(e),n&&(e.attr("id",n),t._focused.attr("aria-activedescendant",n))),t._current=e},destroy:function(){var e=this,t=e.ns;r.fn.destroy.call(e),e._unbindDataSource
(),e.ul.off(t),e.list.off(t),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(e){var t=this;return e===undefined&&(e=t.selectedIndex),t._data()[e]},_accessors:function(){var e=this,n=e.element,r=e.options,i=t.getter,s=n.attr(t.attr("text-field")),o=n.attr(t.attr("value-field"));s&&(r.dataTextField=s),o&&(r.dataValueField=o),e._text=i(r.dataTextField),e._value=i(r.dataValueField)},_aria:function(e){var t=this,n=t.options,r=t._focused;n.suggest!==undefined&&r.attr("aria-autocomplete",n.suggest?"both":"list"),e=e?e+" "+t.ul[0].id:t.ul[0].id,r.attr("aria-owns",e),t
.ul.attr("aria-live",!n.filter||n.filter==="none"?"off":"polite")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e=this,t=e.selectedIndex,n=e.options.value,r=e.value(),i;e._isSelect&&!e._bound&&n&&(r=n),r!==e._old?i=!0:t!==undefined&&t!==e._oldIndex&&(i=!0),i&&(e._old=r,e._oldIndex=t,e.trigger(l),e.element.trigger(l))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,t=e.options,n=e.element.is("[disabled]");t.enable!==undefined&&(t.enabled=t.enable),!t.enabled||n?
e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var t=this;if(t.popup.visible()&&e&&t.trigger(g,{item:e})){t.close();return}t._select(e),t._triggerCascade(),t._blur()},_index:function(e){var t=this,n,r,i=t._data();for(n=0,r=i.length;n<r;n++)if(t._dataValue(i[n])==e)return n;return-1},_dataValue:function(e){var t=this._value(e);return t===undefined&&(t=this._text(e)),t},_height:function(e){if(e){var t=this,n=t.list,r=t.popup.visible(),i=t.options.height;n=n.add(n.parent(".k-animation-container")).show().height(t.ul[0].scrollHeight>i?i:"auto"),r||n.hide()}},_adjustListWidth
:function(){var e=this.list,t=e[0].style.width,n=this.wrapper,r,i;if(!e.data(E)&&t)return;return r=window.getComputedStyle?window.getComputedStyle(n[0],null):0,i=r?parseFloat(r.width):n.outerWidth(),r&&(T.mozilla||T.msie)&&(i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)),t=i-(e.outerWidth()-e.width()),e.css({fontFamily:n.css("font-family"),width:t}).data(E,t),!0},_popup:function(){var e=this,r=e.list,i=e._focused,o=e.options,u=e.wrapper;e.popup=new n.Popup(r,S({},o.popup,{anchor:u,open:function(t){e._adjustListWidth(),e.trigger
(v)?t.preventDefault():(i.attr("aria-expanded",!0),e.ul.attr("aria-hidden",!1))},close:function(t){e.trigger(m)?t.preventDefault():(i.attr("aria-expanded",!1),e.ul.attr("aria-hidden",!0))},animation:o.animation,isRtl:s.isRtl(u)})),e.popup.one(v,function(){e._height(e._data().length)}),e._touchScroller=t.touchScroller(e.popup.element)},_makeUnselectable:function(){N&&this.list.find("*").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(p,t.type==="mouseenter")},_toggle:function(e){var t=this;e=e!==undefined?e:!t.popup.visible(),!s.touch&&t._focused[0]!==u()&&t._focused
.focus(),t[e?v:m]()},_scroll:function(e){if(!e)return;e[0]&&(e=e[0]);var t=this.ul[0],n=e.offsetTop,r=e.offsetHeight,i=t.scrollTop,s=t.clientHeight,o=n+r;t.scrollTop=i>n?n:o>i+s?o-s:i},_template:function(){var e=this,n=e.options,r=n.template,i=n.dataSource;e._isSelect&&e.element[0].length&&(i||(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value")),r?(r=t.template(r),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+r(e)+"</li>"}):e.template=t.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+
t.expr(n.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(){var e=this,t=e.value();(!e._bound&&t||e._old!==t)&&e.trigger("cascade")},_unbindDataSource:function(){var e=this;e.dataSource.unbind(l,e._refreshHandler).unbind(b,e._progressHandler).unbind(w,e._requestEndHandler).unbind("error",e._errorHandler)}});S(L,{caret:function(e){var t,n=e.ownerDocument.selection;return n?t=Math.abs(n.createRange().moveStart(c,-e.value.length)):t=e.selectionStart,t},selectText:function(e,t,n){try{if(e.createTextRange){e.focus();var r=e.createTextRange();r.collapse(!0),r.moveStart(c,t)
,r.moveEnd(c,n-t),r.select()}else e.setSelectionRange(t,n)}catch(i){}},inArray:function(e,t){var n,r,i=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,r=i.length;n<r;n++)if(e===i[n])return n;return-1}}),t.ui.List=L,n.Select=L.extend({init:function(e,t){L.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var t=this;if(e===undefined)return t.selectedIndex;t._select(e),t._triggerCascade(),t._old=t._accessor(),t._oldIndex=
t.selectedIndex},_accessor:function(e,t){var n=this.element[0],r=this._isSelect,i=n.selectedIndex,s;if(e===undefined)return r?i>-1&&(s=n.options[i],s&&(e=s.value)):e=n.value,e;r?(i>-1&&n.options[i].removeAttribute(y),n.selectedIndex=t,s=n.options[t],s&&s.setAttribute(y,y)):n.value=e},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(d),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0;if(e._busy)return;e._busy=setTimeout(function(){e._focused.attr("aria-busy",!0),e._arrow.addClass(d)},100)},_requestEnd:function(){this._request=!1
},_dataSource:function(){var n=this,r=n.element,i=n.options,s=i.dataSource||{},o;s=e.isArray(s)?{data:s}:s,n._isSelect&&(o=r[0].selectedIndex,o>-1&&(i.index=o),s.select=r,s.fields=[{field:i.dataTextField},{field:i.dataValueField}]),n.dataSource&&n._refreshHandler?n._unbindDataSource():(n._refreshHandler=x(n.refresh,n),n._progressHandler=x(n._showBusy,n),n._requestEndHandler=x(n._requestEnd,n),n._errorHandler=x(n._hideBusy,n)),n.dataSource=t.data.DataSource.create(s).bind(l,n._refreshHandler).bind(b,n._progressHandler).bind(w,n._requestEndHandler).bind("error",n._errorHandler)},_get:function(t){
var n=this,r=n._data(),i,s;if(typeof t=="function")for(i=0,s=r.length;i<s;i++)if(t(r[i])){t=i;break}if(typeof t=="number"){if(t<0)return e();t=e(n.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t=this,n=e.keyCode,r=t.ul[0],s=t.popup.visible()?"_select":"_accept",o=t._current,u=n===i.DOWN,a,f;if(n===i.UP||u){if(e.altKey)t.toggle(u);else{a=r.firstChild;if(!a&&!t._accessor()&&t._state!=="filter")return t.dataSource.one(l,function(){t._move(e)}),t._filterSource(),e.preventDefault(),!0;u?(!o||t.selectedIndex===-1&&!t.value()&&o[0]===a?o=a:(o=o[0].nextSibling,!o&&a===r.lastChild&&
(o=a)),t[s](o)):(o=o?o[0].previousSibling:r.lastChild,!o&&a===r.lastChild&&(o=a),t[s](o))}e.preventDefault(),f=!0}else n===i.ENTER||n===i.TAB?(t.popup.visible()&&e.preventDefault(),t._accept(o),f=!0):n===i.ESC&&(t.popup.visible()&&e.preventDefault(),t.close(),f=!0);return f},_selectItem:function(e){var t=this,n=t.options,r=t.selectedIndex;e=t._selectedValue||n.value||t._accessor();if(e)t.value(e);else if(!t._bound||r>-1)t._bound||(r=n.index),t.select(r)},_fetchItems:function(e){var t=this,n=t.ul[0].firstChild;if(t._request)return!0;if(!t._fetch&&!n)return t.options.cascadeFrom?!n:(t.dataSource.
one(l,function(){t.value(e),t._fetch=!1}),t._fetch=!0,t.dataSource.fetch(),!0)},_options:function(t,n){var r=this,i=r.element,s=i[0].selectedIndex,u=t.length,a="",f,l,c,h,p=0;n&&(p=1,a=n,n.indexOf(e(i[0].firstChild).text())===-1&&(s+=1));for(;p<u;p++)f="<option",l=t[p],c=r._text(l),h=r._value(l),h!==undefined&&(h+="",h.indexOf('"')!==-1&&(h=h.replace(C,"&quot;")),f+=' value="'+h+'"'),f+=">",c!==undefined&&(f+=o(c)),f+="</option>",a+=f;i.html(a),i[0].selectedIndex=s===-1?0:s},_reset:function(){var t=this,n=t.element,r=n.attr("form"),i=r?e("#"+r):n.closest("form");i[0]&&(t._resetHandler=function(
){setTimeout(function(){t.value(t._initial)})},t._form=i.on("reset",t._resetHandler))},_cascade:function(){var t=this,n=t.options,r=n.cascadeFrom,i,s,o,u,a;if(r){t._selectedValue=n.value||t._accessor(),s=e("#"+r),i=s.data("kendo"+n.name),i||(i=s.data("kendo"+k[n.name]));if(!i)return;n.autoBind=!1,u=i.options.dataValueField,a=function(){var e=t._selectedValue||t.value();e?(t.value(e),(!t.dataSource.view()[0]||t.selectedIndex===-1)&&t._clearSelection(i,!0)):t.select(n.index),t.enable(),t._triggerCascade()},o=function(){var e=i.dataItem(),n=e?i._value(e):null,r,s;n||n===0?(r=t.dataSource.filter()||
{},A(r,u),s=r.filters||[],s.push({field:u,operator:"eq",value:n}),t.dataSource.one(l,a).filter(s)):(t.enable(!1),t._clearSelection(i),t._triggerCascade())},i.bind("cascade",function(){o()}),i._bound?o():i.value()||t.enable(!1)}}})}),define("kendoui/kendo.dropdownlist",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.data","kendoui/kendo.fx","kendoui/kendo.popup","kendoui/kendo.list"],function(e,t){function b(e,t,n){var r=0,i=t.length-1,s;for(;r<i;++r)s=t[r],s in e||(e[s]={}),e=e[s];e[t[i]]=n}var n=t.ui,r=n.Select,i=t.support.mobileOS,s=".kendoDropDownList",o="disabled",u="readonly",a="change"
,f="k-state-focused",l="k-state-default",c="k-state-disabled",h="aria-disabled",p="aria-readonly",d="k-state-selected",v="mouseenter"+s+" mouseleave"+s,m="tabindex",g=e.proxy,y=r.extend({init:function(n,i){var o=this,u=i&&i.index,a,f,l;o.ns=s,i=e.isArray(i)?{dataSource:i}:i,r.fn.init.call(o,n,i),o._focusHandler=function(){o.wrapper.focus()},i=o.options,n=o.element.on("focus"+s,o._focusHandler),o._reset(),o._word="",o._wrapper(),o._tabindex(),o.wrapper.data(m,o.wrapper.attr(m)),o._aria(),o._span(),o._popup(),o._mobile(),o._dataSource(),o._ignoreCase(),o._enable(),o._oldIndex=o.selectedIndex=-1,o
._cascade(),u!==undefined&&(i.index=u),i.autoBind?o.dataSource.fetch():o.selectedIndex===-1&&(l=i.text||"",l||(a=o._optionLabelText(i.optionLabel),f=a&&i.index===0,o._isSelect?f?l=a:l=n.children(":selected").text():!n[0].value&&f&&(l=a)),o.text(l)),t.notify(o)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",ignoreCase:!0,animation:{}},events:["open","close",a,"select","dataBinding","dataBound","cascade"],setOptions:function(e){r.fn.setOptions.call(this,e),this._template
(),this._accessors(),this._aria()},destroy:function(){var e=this;e.wrapper.off(s),e.element.off(s),e._inputWrapper.off(s),r.fn.destroy.call(e)},open:function(){var e=this;e.ul[0].firstChild?(e.popup.open(),e._scroll(e._current)):(e._open=!0,e._request||e.dataSource.fetch())},toggle:function(e){this._toggle(e)},refresh:function(){var e=this,n=e._data(),r=n.length,i=e.options.optionLabel;e.trigger("dataBinding"),e._current&&e.current(null),e.ul[0].innerHTML=t.render(e.template,n),e._height(r),e.popup.visible()&&e.popup._position(),e._isSelect&&(i&&r&&(i=e._optionLabelText(i),i='<option value="">'+
i+"</option>"),e._options(n,i)),e._open&&(e._open=!1,e.toggle(!!r)),e._hideBusy(),e._makeUnselectable(),!e._fetch&&r&&e._selectItem(),e._bound=!0,e.trigger("dataBound")},search:function(e){if(e){var t=this,n=t.options.ignoreCase;n&&(e=e.toLowerCase()),t._select(function(r){var i=t._text(r);if(i!==undefined)return i+="",n&&(i=i.toLowerCase()),i.indexOf(e)===0})}},text:function(e){var t=this.span;if(e===undefined)return t.text();t.text(e)},value:function(e){var t=this,n,r;if(e===undefined)return t._accessor();e!==null&&(e=e.toString()),t._selectedValue=e,r=e||t.options.optionLabel&&!t.element[0].
disabled&&e==="";if(r&&t._fetchItems(e))return;n=t._index(e),t.select(n>-1?n:0)},_editable:function(e){var n=this,r=n.element,i=e.disable,a=e.readonly,d=n.wrapper.off(s),y=n._inputWrapper.off(v),b=function(){y.addClass(f),n._blured=!1},w=function(){if(!n._blured){n._triggerCascade();var e=window.self!==window.top;t.support.mobileOS.ios&&e?n._change():n._blur(),y.removeClass(f),n._blured=!0,r.blur()}};!a&&!i?(r.removeAttr(o).removeAttr(u),y.addClass(l).removeClass(c).on(v,n._toggleHover),d.attr(m,d.data(m)).attr(h,!1).attr(p,!1).on("click"+s,function(e){n._blured=!1,e.preventDefault(),n.toggle()
}).on("keydown"+s,g(n._keydown,n)).on("keypress"+s,g(n._keypress,n)).on("focusin"+s,b).on("focusout"+s,w)):(i?(d.removeAttr(m),y.addClass(c).removeClass(l)):(y.addClass(l).removeClass(c),d.on("focusin"+s,b).on("focusout"+s,w)),r.attr(o,i).attr(u,a),d.attr(h,i).attr(p,a))},_accept:function(e){this._focus(e)},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&typeof n=="object"?this._text(n):n},_data:function(){var e=this,n=e.options,r=n.optionLabel,i=n.dataTextField,s=n.dataValueField,o=e.dataSource.view(),u=o.length,a=r,f=0;if(r&&u){typeof r=="object"?
a=r:i&&(a={},i=i.split("."),s=s.split("."),b(a,s,""),b(a,i,r)),a=new t.data.ObservableArray([a]);for(;f<u;f++)a.push(o[f]);o=a}return o},_keydown:function(e){var n=this,r=e.keyCode,i=t.keys,s=n.ul[0];r===i.LEFT?r=i.UP:r===i.RIGHT&&(r=i.DOWN),e.keyCode=r,n._move(e),r===i.HOME?(e.preventDefault(),n._select(s.firstChild)):r===i.END&&(e.preventDefault(),n._select(s.lastChild))},_selectNext:function(e,t){var n=this,r,i=t,s=n._data(),o=s.length,u=n.options.ignoreCase,a=function(t,r){t+="",u&&(t=t.toLowerCase());if(t.indexOf(e)===0)return n._select(r),n._triggerEvents(),!0};for(;t<o;t++){r=n._text(s[t
]);if(r&&a(r,t))return!0}if(i>0){t=0;for(;t<=i;t++){r=n._text(s[t]);if(r&&a(r,t))return!0}}return!1},_keypress:function(e){var t=this,n=String.fromCharCode(e.charCode||e.keyCode),r=t.selectedIndex,i=t._word;t.options.ignoreCase&&(n=n.toLowerCase()),n===" "&&e.preventDefault();if(t._last===n&&i.length<=1&&r>-1){i||(i=n);if(t._selectNext(i,r+1))return}t._word=i+n,t._last=n,t._search()},_popup:function(){r.fn._popup.call(this),this.popup.one("open",function(){this.wrapper=t.wrap(this.element).addClass("km-popup")})},_search:function(){var e=this,t=e.dataSource,n=e.selectedIndex,r=e._word;clearTimeout
(e._typing),e._typing=setTimeout(function(){e._word=""},e.options.delay);if(!e.ul[0].firstChild){t.one(a,function(){t.data()[0]&&e._selectNext(r,n)}).fetch();return}e._selectNext(r,n),e._triggerEvents()},_select:function(e){var t=this,r=t._current,i=t._data(),s,o,u;e=t._get(e),e&&e[0]&&!e.hasClass(d)&&(r&&r.removeClass(d),u=n.List.inArray(e[0],t.ul[0]),u>-1&&(i=i[u],o=t._text(i),s=t._value(i),t.selectedIndex=u,t.text(o),t._accessor(s!==undefined?s:o,u),t._selectedValue=t._accessor(),t.current(e.addClass(d)),t._optionID&&t._current.attr("aria-selected",!0)))},_triggerEvents:function(){this.popup
.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&i&&(t.options.animation.open.effects=i.android||i.meego?"fadeIn":i.ios||i.wp?"slideIn:up":t.options.animation.open.effects)},_span:function(){var t=this,n=t.wrapper,r="span.k-input",i;i=n.find(r),i[0]||(n.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(t
.element),i=n.find(r)),t.span=i,t._inputWrapper=e(n[0].firstChild),t._arrow=n.find(".k-icon").mousedown(function(e){e.preventDefault()})},_wrapper:function(){var e=this,t=e.element,n=t[0],r;r=t.parent(),r.is("span.k-widget")||(r=t.wrap("<span />").parent(),r[0].style.cssText=n.style.cssText),t.hide(),e._focused=e.wrapper=r.addClass("k-widget k-dropdown k-header").addClass(n.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,t=e.options.optionLabel;if(e.dataSource.view()[0]&&t){e.select(0);return}e.text
(t),e.element.val(""),e.selectedIndex=-1}});n.plugin(y)}),define("lib/dom",["require","exports","jql"],function(e,t,n){function i(){try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body"){var e=r(document.activeElement);if(e.closest(".trucode").length){e.blur();try{document.selection.empty()}catch(t){}try{document.getSelection().removeAllRanges()}catch(t){}}}}catch(t){}r("input:focus, select:focus").blur()}function s(e,t,n){return e.closest(t).find(n)}function o(e){var t,n,i;return e.length&&(t=r(window),n=t.scrollLeft(),i=t.scrollTop(),e.focus(),t.scrollLeft(n),t
.scrollTop(i)),e}function u(e){var t,n,i,s,o,u;return e.length&&(t=r(window),n=t.scrollLeft(),i=t.scrollTop(),s=e.closest(".pane-scrollable > .pane-content"),o=s.scrollLeft(),u=s.scrollTop(),e.focus(),t.scrollLeft(n),t.scrollTop(i),s.scrollLeft(o),s.scrollTop(u)),e}var r=n;t.blurAll=i,t.parentToChild=s,t.focusWithoutWindowScroll=o,t.focusWithoutPaneScroll=u}),define("lib/templates",["require","exports","underscore","lib/api"],function(e,t,n,r){function o(e,t,n){var r=s.TC.current().settings.templates[e];return n=n||!1,r?n?r:i.template(r):n?t:i.template(t)}function u(e,t){return o(e,t,!0)}var i=
n,s=r;t.compile=o,t.get=u,t.codebooksWrapper="controls/codebooks/templates/encoder.html",t.tk_codebooksWrapper="codebooksWrapper",t.indexNoResults="controls/codebooks/templates/index/index-no-results.html",t.tk_indexNoResults="indexNoResults",t.indexEmpty="controls/codebooks/templates/index/index-empty.html",t.tk_indexEmpty="indexEmpty",t.indexPCS="controls/codebooks/templates/index/index-pcs.html",t.tk_indexPCS="indexPCS",t.indexHeadingEmpty="controls/codebooks/templates/index/index-heading-empty.html",t.tk_indexHeadingEmpty="indexHeadingEmpty",t.searchbarError="controls/codebooks/templates/searchbar/codebooks-error.html"
,t.tk_searchbarError="searchbarError",t.drugHeading="controls/codebooks/templates/tableHeadings/drug-ICD9.html",t.tk_drugHeading="drugHeading",t.drugHeadingICD10="controls/codebooks/templates/tableHeadings/drug-ICD10.html",t.tk_drugHeadingICD10="drugHeadingICD10",t.hypertensionHeading="controls/codebooks/templates/tableHeadings/hypertension.html",t.tk_hypertensionHeading="hypertensionHeading",t.neoplasmHeading="controls/codebooks/templates/tableHeadings/neoplasm.html",t.tk_neoplasmHeading="neoplasmHeading",t.referencesDetailNotesTitle="controls/references/templates/detail/notes-title.html",t.tk_referencesDetailNotesTitle="referencesDetailNotesTitle"
,t.loadingLarge="controls/common/templates/loading-large.html",t.tk_loadingLarge="loadingLarge",t.referencesBooksError="controls/references/templates/searchbar/books-error.html",t.tk_referencesBooksError="referencesBooksError",t.loadingSmall="controls/common/templates/loading-small.html",t.tk_loadingSmall="loadingSmall",t.loadingSmallWide="controls/common/templates/loading-small-wide.html",t.tk_loadingSmallWide="loadingSmallWide",t.modal="controls/common/templates/modal.html",t.tk_modal="modal",t.modalConfirm="controls/common/templates/modal-confirm-buttons.html",t.tk_modalConfirm="modalConfirm"
,t.indexHeading="controls/codebooks/templates/index/index-heading.html",t.tk_indexHeading="indexHeading",t.indexResults="controls/codebooks/templates/index/index.html",t.tk_indexResults="indexResults",t.searchbar="controls/codebooks/templates/searchbar/searchbar.html",t.tk_searchbar="searchbar",t.tabularWrapper="controls/codebooks/templates/tabular/wrapper.html",t.tk_tabularWrapper="tabularWrapper",t.tabularIndex="controls/codebooks/templates/tabular/index.html",t.tk_tabularIndex="tabularIndex",t.tabularTabular="controls/codebooks/templates/tabular/tabular.html",t.tk_tabularTabular="tabularTabular"
,t.tabularPCSWrapper="controls/codebooks/templates/tabular/pcs-wrapper.html",t.tk_tabularPCSWrapper="tabularPCSWrapper",t.tabularPCSColumnHead="controls/codebooks/templates/tabular/pcs-column-head.html",t.tk_tabularPCSColumnHead="tabularPCSColumnHead",t.tabularPCSColumnChoices="controls/codebooks/templates/tabular/pcs-column-choices.html",t.tk_tabularPCSColumnChoices="tabularPCSColumnChoices",t.tabularTabularCrosswalk="controls/codebooks/templates/tabular/crosswalk.html",t.tk_tabularTabularCrosswalk="tabularTabularCrosswalk",t.tabularTabularCPT="controls/codebooks/templates/tabular/cpt.html",t.
tk_tabularTabularCPT="tabularTabularCPT",t.tabularTabularHCPCS="controls/codebooks/templates/tabular/hcpcs.html",t.tk_tabularTabularHCPCS="tabularTabularHCPCS",t.instructionalNote="controls/codebooks/templates/instructional-note.html",t.tk_instructionalNote="instructionalNote",t.modifiers="controls/codebooks/templates/modifiers.html",t.tk_modifiers="modifiers",t.cptImageModal="controls/codebooks/templates/tabular/cpt-image-modal.html",t.tk_cptImageModal="cptImageModal",t.referencesDetailContentTitle="controls/references/templates/detail/details-title.html",t.tk_referencesDetailContentTitle="referencesDetailContentTitle"
,t.referencesDetailHighlight="controls/references/templates/detail/details-highlight.html",t.tk_referencesDetailHighlight="referencesDetailHighlight",t.referencesDetailContent="controls/references/templates/detail/details.html",t.tk_referencesDetailContent="referencesDetailContent",t.referencesDetailNotes="controls/references/templates/detail/notes.html",t.tk_referencesDetailNotes="referencesDetailNotes",t.referencesListSearchResults="controls/references/templates/list/search.html",t.tk_referencesListSearchResults="referencesListSearchResults",t.referencesListTitle="controls/references/templates/list/title.html"
,t.tk_referencesListTitle="referencesListTitle",t.referencesListTree="controls/references/templates/list/tree.html",t.tk_referencesListTree="referencesListTree",t.referencesBrowse="controls/references/templates/list/browse.html",t.tk_referencesBrowse="referencesBrowse",t.referencesWrapper="controls/references/templates/references.html",t.tk_referencesWrapper="referencesWrapper",t.referencesSearchbar="controls/references/templates/searchbar/searchbar.html",t.tk_referencesSearchbar="referencesSearchbar",t.drgAnalysisTab="controls/research/templates/drg-analyze-pane/result.html",t.tk_drgAnalysisTab="drgAnalysisTab"
,t.drgAnalysisTabNone="controls/research/templates/drg-analyze-pane/empty.html",t.tk_drgAnalysisTabNone="drgAnalysisTabNone",t.editsTab="controls/research/templates/edits-pane/result.html",t.tk_editsTab="editsTab",t.editsTabEmpty="controls/research/templates/edits-pane/empty.html",t.tk_editsTabEmpty="editsTabEmpty",t.icd10mapTab="controls/research/templates/icd10map-pane/result.html",t.tk_icd10mapTab="icd10mapTab",t.icd10mapTabEmpty="controls/research/templates/icd10map-pane/empty.html",t.tk_icd10mapTabEmpty="icd10mapTabEmpty",t.researchTab="controls/research/templates/research-pane/result.html"
,t.tk_researchTab="researchTab",t.researchTabEmpty="controls/research/templates/research-pane/empty.html",t.tk_researchTabEmpty="researchTabEmpty",t.research="controls/research/templates/research.html",t.tk_research="research"}),define("lib/auth",["require","exports","jql","underscore"],function(e,t,n,r){var i=n,s=r,o=function(){function e(e){this.maxExpiredAuthorizationRetries=1,this.api=e,s.bindAll(this)}return e.prototype.getAuthorizationHeader=function(){this.api.settings._dirtyAuth&&this.setAuthorizationHeader(this.api.settings.authorizationKey);var e=this.api.settings.authorizationTokenType+" "+
this.api.settings.authorizationKey;return e.indexOf("null")!==-1?null:e},e.prototype.setAuthorizationHeader=function(e){!this.api.settings.forceProxy&&!e&&this.api.settings.fatalErrorCallback("No authorization key provided","",null);var t=e.split(" ");switch(t.length){case 1:this.api.settings.authorizationKey=t[0];break;case 2:this.api.settings.authorizationTokenType=t[0],this.api.settings.authorizationKey=t[1];break;default:this.api.fatalErrorCallback("Malformed authorization key provided","",null)}return this.api.settings._dirtyAuth=!1,this.getAuthorizationHeader()},e.prototype.handleUnauthorized=
function(){var e=this.api.settings.authorizationExpired,t,n;if(i.isPlainObject(e))return!e.timeout&&this.api.settings.ajaxTimeout&&(e.timeout=this.api.settings.ajaxTimeout),i.ajax(e).then(this.parseExpiredCallbackKey);if(i.isFunction(e))return t=e(i),t&&i.isFunction(t.promise)?t.then(this.parseExpiredCallbackKey):(this.parseExpiredCallbackKey(t),n=new i.Deferred,n.resolve(),n.promise());this.api.fatalErrorCallback("Invalid authorizationExpired",null,null)},e.prototype.parseExpiredCallbackKey=function(e){try{this.api.settings.authorizationExpiredParser!==null&&(e=this.api.settings.authorizationExpiredParser
(e)),this.setAuthorizationHeader(e)}catch(t){this.api.fatalErrorCallback("Problem parsing authorization expired response","parseAuthExpiredFailed",null)}},e}();t.Auth=o}),define("lib/errors",["require","exports"],function(e,t){t.NET_BADPARAMETERS="Invalid set of parameters sent",t.NET_UNAUTHORIZED="Check your credentials",t.NET_UNEXPECTED="There was an unexpected problem on the server",t.NET_NOTACCEPTED="The service called does not support JSON at this time.",t.NET_UNKNOWN="An unexpected response was received from the server.",t.NET_NOTSENT="There was a problem setting up the ajax transport. Try checking the cross domain settings."
,t.VIEW_NODATA="There was a problem displaying this content.",t.VIEW_UNKNOWN="An unexpected problem occurred while displaying this content."}),define("lib/url",["require","exports"],function(e,t){var n={local:"http://wslocal.trucode.com/v3/",dev:"https://wsdev.trucode.com/v3/",dev_ci:"https://wsdev.trucode.com/ci/",qa:"",stage:"https://wsstage.trucode.com/v3/",prod:"https://ws.trucode.com/v3/"},r=function(){function e(e){this.api=e}return e.prototype.apc_asc_calculate=function(){},e.prototype.code_getDescription=function(){return n[this.api.env]+"code/GetDescription"},e.prototype.codebooks_getDetail=
function(){return n[this.api.env]+"codebooks/GetDetail"},e.prototype.codebooks_getInstructionalNotes=function(){return n[this.api.env]+"codebooks/GetInstructionalNotes"},e.prototype.codebooks_listBooks=function(){return n[this.api.env]+"codebooks/ListBooks"},e.prototype.codebooks_search=function(){return n[this.api.env]+"codebooks/Search"},e.prototype.codebooks_listPCSSections=function(){return n[this.api.env]+"codebooks/ListPCSSections"},e.prototype.codebooks_getPCSTable=function(){return n[this.api.env]+"codebooks/GetPCSTable"},e.prototype.codebooks_listModifiers=function(){return n[this.api.
env]+"codebooks/ListModifiers"},e.prototype.drg_analyze=function(){return n[this.api.env]+"drg/Analyze"},e.prototype.drg_calculate=function(){},e.prototype.references_getArticle=function(){return n[this.api.env]+"references/GetArticle"},e.prototype.references_getResource=function(){return n[this.api.env]+"references/GetResource"},e.prototype.references_listArticles=function(){return n[this.api.env]+"references/ListArticles"},e.prototype.references_listBooks=function(){return n[this.api.env]+"references/ListBooks"},e.prototype.references_listIssues=function(){return n[this.api.env]+"references/ListIssues"
},e.prototype.references_listYears=function(){return n[this.api.env]+"references/ListYears"},e.prototype.references_search=function(){return n[this.api.env]+"references/Search"},e.prototype.research_getICD10Mapping=function(){return n[this.api.env]+"research/GetIcd10Mapping"},e.prototype.research_getResearch=function(){return n[this.api.env]+"research/GetResearch"},e.prototype.info_getVersions=function(){return n[this.api.env]+"info/GetVersions"},e}();t.Url=r}),define("lib/config",["require","exports"],function(e,t){function n(){return window.location.protocol!=="https:"?"http://c266323.r23.cf1.rackcdn.com/Cpt/"
:"https://c266323.ssl.cf1.rackcdn.com/Cpt/"}t.global=window,t.DEBUG=t.global.DEBUG,t.ajaxCaching=!0,t.ns="TC",t.activeWidgetClass="active-widget",t.activePaneClass="active-area",t.imageCdnPath=n}),define("lib/date",["require","exports"],function(e,t){function n(){var e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate();return t.length===1&&(t="0"+t),n.length===1&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n}t.getCurrentDateInvariant=n}),define("lib/net",["require","exports","jql","underscore","lib/auth","lib/errors","lib/url","lib/config","lib/date"],function(e,t,n,r,i,s,o,u,a){var f=n,l=r,c=i,h=s,p=o,d=
u,v=a,m=function(){function e(e){this.serviceVersions={code_getdescription:"",codebooks_getdetail:"",codebooks_getinstructionalnotes:"",codebooks_listbooks:"",codebooks_search:"",codebooks_listpcssections:"",codebooks_getpcstable:"",codebooks_listmodifiers:"",references_getarticle:"",references_getresource:"",references_listarticles:"",references_listbooks:"",references_listissues:"",references_listyears:"",references_search:"",research_geticd10mapping:"",research_getresearch:""},this.proxyUrl={local:"../proxy.aspx",dev:"",qa:"",test:"",prod:""},this.infoGetVersions=function(t,n){n=this.addErrorbacks
(n);var r="info_getversions";return this.tcAjax({url:this.url.info_getVersions(),error:n,success:t},r)},this.api=e,this.auth=new c.Auth(this.api),this.url=new p.Url(this.api),l.bindAll(this),this.init()}return e.prototype.init=function(){var e=this;this.versionDeferred=f.Deferred(),this.versionDeferred.always(function(){}),this.infoGetVersions(this.getVersionsComplete,this.getVersionsFail)},e.prototype.getVersionsComplete=function(e){var t;for(var n in e)t=n.toLowerCase().replace("/","_"),l.has(this.serviceVersions,t)&&(this.serviceVersions[t]=encodeURIComponent(e[n]));for(var n in this.serviceVersions
)this.serviceVersions[n].length===0&&(this.serviceVersions[n]=f.now());this.versionDeferred.resolve()},e.prototype.getVersionsFail=function(){for(var e in this.serviceVersions)this.serviceVersions[e]=f.now();this.versionDeferred.reject()},e.prototype.tcAjax=function(t,n){var r=this,i=f.Callbacks("once"),s=f.Deferred(),o={dataType:"json",cache:d.ajaxCaching,contentType:"application/json",headers:{From:"encoder.essentials.3.1.0.363@trucode.com"}};return this.api.settings.ajaxTimeout&&(o.timeout=this.api.settings.ajaxTimeout),f.extend(o,t),i.add(this.tcPrefilter),t._getVersions||t.url.toLowerCase(
).indexOf("info/getversions")!=-1?(f.ajaxPrefilter(i.fire),f.ajax(o)):(this.versionDeferred.always(function(){o.data=o.data||{},f.extend(o.data,{_:r.serviceVersions[n]}),f.ajaxPrefilter(i.fire);var t=f.ajax(o);s.fail(function(){e.tryAbort(t)})}),s)},e.prototype.tcPrefilter=function(e,t,n){var r=this;t._retry=isNaN(t._retry)?this.auth.maxExpiredAuthorizationRetries:t._retry-1,t._getVersions=t.url.toLowerCase().indexOf("info/getversions")!=-1;var i=this.auth.getAuthorizationHeader();!this.api.settings.forceProxy&&i===null&&this.api.fatalErrorCallback("No authorization key provided","",null),n.setRequestHeader
("Authorization",i);if(this.api.settings.forceProxy||!f.support.cors)e.type==="GET"&&(e.data=e.data&&e.data.length>0?e.data+"&proxyUrl="+encodeURIComponent(e.url):"proxyUrl="+encodeURIComponent(e.url)),e.url=e.type==="POST"?this.getProxyUrl()+"?proxyUrl="+encodeURIComponent(e.url):this.getProxyUrl(),e.crossDomain=!1;t.error&&(t._error=t.error),e.error=f.noop();var s=f.Deferred();return n.done(s.resolve),n.fail(function(){var e=Array.prototype.slice.call(arguments);if(n.status===401&&t._retry>0){var i=function(){r.tcAjax(t).then(s.resolve,s.reject)};r.auth.handleUnauthorized().then(i,i)}else t._error&&
s.fail(t._error),s.rejectWith(n,e)}),s.promise(n)},e.prototype.ajaxErrorHandler=function(e,t,n){switch(e.status){case 400:this.api.fatalErrorCallback(h.NET_BADPARAMETERS,t,n);break;case 401:this.api.fatalErrorCallback(h.NET_UNAUTHORIZED,t,n);break;case 406:this.api.fatalErrorCallback(h.NET_NOTACCEPTED,t,n);break;case 500:this.api.fatalErrorCallback(h.NET_UNEXPECTED,t,n);break;case 0:t!=="abort"&&this.api.fatalErrorCallback(h.NET_NOTSENT,t,n);break;default:this.api.fatalErrorCallback(h.NET_UNKNOWN,t,n)}},e.prototype.addErrorbacks=function(e){var t=[this.ajaxErrorHandler],n=0,r;if(typeof e!="undefined"
)if(typeof e=="function")t[0]=e,n=1;else if(f.isArray(e)){n=e.length;for(r=0;r<=n;r++)t[r]=e[r]}return t[n]=this.ajaxErrorHandler,function(e,n,r){f.each(t,function(t,i){i.call(null,e,n,r)})}},e.prototype.getProxyUrl=function(){return this.api.settings.proxyUrl===null?this.proxyUrl[this.api.settings.env]:this.api.settings.proxyUrl},e.tryAbort=function(t){t&&(t.abort&&t.abort(),t.reject&&t.reject())},e.mapToGetResearch=function(t){var n={};return f.map(t,function(e,t){switch(t){case"book":case"code_type":e=e.replace("_INDEX",""),e=e.replace("_TABULAR",""),n.code_type=e;break;case"term":case"code"
:n.code=e;break;case"getAll":case"all":n.all=e;break;default:}}),n},e.prototype.codebooksGetDetail=function(e,t,n){n=this.addErrorbacks(n);var r="codebooks_getdetail",i={records:75,count_seven_character_codes:!1};return f.extend(i,e),this.tcAjax({url:this.url.codebooks_getDetail(),data:i,success:t,error:n},r)},e.prototype.codebooksGetInstructionalNotes=function(e,t,n){n=this.addErrorbacks(n);var r="codebooks_getinstructionalnotes";return this.tcAjax({url:this.url.codebooks_getInstructionalNotes(),data:e,success:t,error:n},r)},e.prototype.codebooksListBooks=function(e,t){t=this.addErrorbacks(t);
var n="codebooks_listbooks";return this.tcAjax({url:this.url.codebooks_listBooks(),success:e,error:t},n)},e.prototype.codebooksSearch=function(e,t,n){n=this.addErrorbacks(n);var r="codebooks_search",i={0:"None",1:"FindAll",2:"UseAnesthesiaCodes",4:"Ref",8:"Table",12:"12",None:"None",FindAll:"FindAll",UseAnesthesiaCodes:"UseAnesthesiaCodes",Ref:"Ref",Table:"Table"},s={options:"None",date:v.getCurrentDateInvariant()};return f.extend(s,e),s.options=i[s.options]||"None",this.tcAjax({url:this.url.codebooks_search(),data:s,error:n,success:t},r)},e.prototype.codebooksGetPCSTable=function(e,t,n){n=this
.addErrorbacks(n);var r="codebooks_getpcstable";return this.tcAjax({url:this.url.codebooks_getPCSTable(),data:e,error:n,success:t},r)},e.prototype.codebooksListPCSSections=function(e,t,n){n=this.addErrorbacks(n);var r="codebooks_listpcssections";return this.tcAjax({url:this.url.codebooks_listPCSSections(),data:e,error:n,success:t},r)},e.prototype.codebooksListModifiers=function(e,t,n){n=this.addErrorbacks(n);var r="codebooks_listmodifiers";return this.tcAjax({url:this.url.codebooks_listModifiers(),data:e,error:n,success:t},r)},e.prototype.referencesGetResourceURL=function(e){var t="references_getarticle"
,n=this.serviceVersions[t],r=this.url.references_getResource(),i;if(this.api.settings.forceProxy||!f.support.cors)f.extend(e,{proxyUrl:r}),r=this.getProxyUrl();return e._=n,e.access_token=this.api.settings.authorizationKey,i=r+"?"+f.param(e)+"#page=1",i},e.prototype.referencesGetArticle=function(e,t,n){n=this.addErrorbacks(n),f.extend(e,{partial:"true"});var r="references_getarticle";return this.tcAjax({url:this.url.references_getArticle(),data:e,dataType:"html",error:n,success:t},r)},e.prototype.referencesListArticles=function(e,t,n){n=this.addErrorbacks(n);var r="references_listarticles";return this
.tcAjax({url:this.url.references_listArticles(),data:e,error:n,success:t},r)},e.prototype.referencesListBooks=function(e,t){t=this.addErrorbacks(t);var n="references_listbooks";return this.tcAjax({url:this.url.references_listBooks(),error:t,success:e},n)},e.prototype.referencesListIssues=function(e,t,n){n=this.addErrorbacks(n);var r="references_listissues";return this.tcAjax({url:this.url.references_listIssues(),data:e,error:n,success:t},r)},e.prototype.referencesListYears=function(e,t,n){n=this.addErrorbacks(n);var r="references_listyears";return this.tcAjax({url:this.url.references_listYears(
),data:e,error:n,success:t},r)},e.prototype.referencesSearch=function(e,t,n){n=this.addErrorbacks(n);var r="references_search";return this.tcAjax({url:this.url.references_search(),data:e,error:n,success:t},r)},e.prototype.researchGetICD10Mapping=function(e,t,n){n=this.addErrorbacks(n);var r="research_geticd10mapping";return this.tcAjax({url:this.url.research_getICD10Mapping(),data:e,error:n,success:t},r)},e.prototype.researchGetResearch=function(e,t,n){n=this.addErrorbacks(n);var r="research_getresearch";return this.tcAjax({url:this.url.research_getResearch(),data:e,error:n,success:t},r)},e.prototype
.drgAnalyze=function(e,t,n){n=this.addErrorbacks(n);var r="research_drganalyze";return this.tcAjax({type:"POST",url:this.url.drg_analyze(),data:JSON.stringify(e),error:n,success:t},r)},e.prototype.drg_calculate=function(){},e.prototype.medicalNecessityEdits_calculate=function(){},e.prototype.medicalNecessityEdits_getArticle=function(){},e.prototype.principalDx_analyze=function(){},e.prototype.apc_asc_calculate=function(){},e.prototype.codeGetDescription=function(e,t,n){n=this.addErrorbacks(n);var r="code_getdescription";return this.tcAjax({url:this.url.code_getDescription(),data:e,error:n,success
:t},r)},e}();t.Net=m}),define("lib/events",["require","exports","Backbone","jql","lib/config"],function(e,t,n,r,i){function a(){var e=o.extend({},s.Events);return e}function f(){var e=u.global[u.ns]._tcEvents;return e}function l(e){log("[event triggered] "+e),log(arguments)}var s=n,o=r,u=i;t.Get=a,t.GetGlobal=f,t.ClearWidgetActive="ui:clearActiveWidget",t.ClearWidgetAreaFocus="ui:clearAreaFocus",t.SetWidgetFocus="ui:setFocus",t.CodingLevelChange="settings:codingLevel",t.Destroy="tc:destroy",t.ResearchCodeSelected="research:codeSelected",t.ResearchClear="research:clear",t.ResearchTabToggle="research:toggleTab"
,t.ResearchTabSelect="research:selectTab",t.ResearchCodeInContext="research:codeInContext",t.ResearchReferenceClick="research:referenceClick",t.ResearchResourceClick="research:resourceClick",t.ResearchChangeEncounterType="research:changeEncounterType",t.ResearchCodeResearchComplete="research:codeResearchComplete",t.ResearchEditsSet="research:editsSet",t.ResearchEditsPolicyClick="research:editsPolicyClicked",t.ResearchAnalyzeDRG="research:analyzeDRG",t.CodeBooksSearchComplete="codeBooks:searchComplete",t.CodeBooksSearchNoResults="codeBooks:searchNoResults",t.CodeBooksFocusTabular="codeBooks:focusTabular"
,t.CodeBooksFocusIndex="codeBooks:focusIndex",t.CodeBooksFocusSearch="codeBooks:focusSearch",t.CodeBooksSearchResultProxy="codeBooks:searchResultProxy",t.CodeBooksSearch="codeBooks:search",t.CodeBooksClear="codeBooks:clear",t.CodeBooksCodePosted="codeBooks:codePosted",t.CodeBooksChangeBookdate="codeBooks:changeBookdate",t.CodeBooksResizeBottom="codeBooks:resizeBottom",t.CodeBooksPCSCodeChanged="codeBooks:pcsCodeChanged",t.CodeBooksGetICD10PCSTableData="codeBooks:getTabularICD10PCS",t.CodeBooksDetailRenderingComplete="codeBooks:detailRenderingComplete",t.CodeBooksSelectBook="codeBooks:selectBook"
,t.CodeBooksResize="codeBooks:resize",t.CodeBooksGetTabular="codeBooks:getTabular",t.CodeBooksGetCrosswalk="codeBooks:getCrosswalk",t.CodeBooksSetCodePair="codeBooks:setCodePair",t.CodeBooksListModifiers="codeBooks:listModifiers",t.ReferencesFocusList="references:focusList",t.ReferencesFocusDetail="references:focusDetail",t.ReferencesFocusSearch="references:focusSearch",t.ReferencesSearch="references:search",t.ReferencesSearchNoResults="references:searchNoResults",t.ReferencesSearchComplete="references:searchComplete",t.ReferencesListBooksComplete="references:listBooksComplete",t.ReferencesListBooksFailure="references:listBooksFailure"
,t.ReferencesGetArticle="references:getArticle",t.ReferencesGetArticleComplete="references:getArticleComplete",t.ReferencesBrowseBook="references:browseBook",t.ReferencesBrowseYearsComplete="references:browseYearsComplete",t.ReferencesBrowseIssuesComplete="references:browseIssuesComplete",t.ReferencesBrowseArticlesComplete="references:browseArticlesComplete",t.ReferencesPrintRequested="references:printRequested",t.ReferencesClear="references:clear",t.ReferencesSelectBook="references:selectBook",t.ReferencesCodeClick="references:codeClick"}),define("lib/shortcuts",["require","exports","lib/config"
,"keymaster"],function(e,t,n,r){function o(){return i.global[i.ns]._shortcuts}function u(e){s.setScope(e)}var i=n,s=r;t.Get=o,t.setScope=u});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/searchViewRecord",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(r.Model);t.SearchViewRecord=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/searchViewRecordCollection"
,["require","exports","Backbone","controls/codebooks/models/searchViewRecord"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(){e.apply(this,arguments),this.model=s.SearchViewRecord}return __extends(t,e),t}(i.Collection);t.SearchViewRecordCollection=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/views/searchbar",["require","exports","Backbone","underscore","jql","text!controls/codebooks/templates/searchbar/searchbar.html","text!controls/codebooks/templates/searchbar/codebooks-error.html"
,"controls/codebooks/models/searchbarViewModel","controls/codebooks/models/codebookCollection","kendoui/kendo.dropdownlist","lib/api","lib/dom","lib/templates","lib/net","lib/events","lib/shortcuts","controls/codebooks/models/searchViewRecordCollection"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=n,y=r,b=i,w=s,E=o,S=u,x=a,T=f,N=l,C=c,k=h,L=p,A=d,O=v,M=m,_=function(e){function t(t){T||!T,this.hub=t.hub,this.template=k.compile(k.tk_searchbar,w),this.templateCodebooksError=k.get(k.tk_searchbarError,E),this.bookSelector="select.book-list",this.searchOptionSelector=".search-options input:visible"
,this.termSelector=".search-box",this.codeBooks=new x.CodeBookCollection,this.model=new S.SearchbarViewModel({codeBooks:this.codeBooks}),this.searchRecords=new M.SearchViewRecordCollection,this.targetDate=t.targetDate||"",this.initialBook=t.book||null,this.initialSearch=t.searchQuery||null,this.initialSearchOption=t.searchOption||"None",this.bookFilters=t.bookFilters||null,this.events={keydown:"keypressHandler",click:"tcSetFocus","click .search-btn":"searchOnEvent","click .codebooks-retry":"getCodebooks","click .search-box":"selectAllSearchbox","focusout .search-box":"searchBlur","click .show-modifiers"
:"showModifiers"},this.scopeName="codebooks:searchbar",this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),this.$el.addClass("form-inline"),N.TC.current().settings.keyboardShortcuts&&(b.extend(this,O.Get()),this.delegateShortcuts()),y.bindAll(this),this.listenTo(this.codeBooks,"reset",this.render),this.listenTo(this.model,"change:bookValue",this.bookChanged),this.listenTo(this.hub,A.CodeBooksFocusSearch,this.selectAllSearchbox),this.listenTo(this.hub,A.CodeBooksSearchNoResults,this.selectAllSearchbox),this.listenTo(this.hub,A.CodeBooksSearch,this
.clear),this.listenTo(this.hub,A.CodeBooksSearch,this.search),this.listenTo(this.hub,A.CodeBooksSearchResultProxy,this.processSearchResults),this.listenTo(this.hub,A.CodeBooksClear,this.clearAll),this.listenTo(this.hub,A.CodeBooksChangeBookdate,this.onUpdateTargetDate),this.listenTo(this.hub,A.CodeBooksSelectBook,this.onSelectBook),this.getCodebooks()},t.prototype.onKeyboardFocus=function(){this.selectAllSearchbox()},t.prototype.selectAllSearchbox=function(e){var t=this.$(this.termSelector);t.hasClass("focused")||this.$(this.termSelector).select(),t.addClass("focused")},t.prototype.searchBlur=function(
e){this.$(this.termSelector).removeClass("focused")},t.prototype.onUpdateTargetDate=function(e){this.targetDate=e.bookdate},t.prototype.bookChanging=function(e){this.model.set("bookValue",e.sender.value().toUpperCase())},t.prototype.showModifiers=function(e){var t;t={book:this.model.get("bookValue")},this.hub.trigger(A.CodeBooksListModifiers,t)},t.prototype.getCodebooks=function(){this.removeCodebooksFailure(),this.setLoading(!0),N.TC.current()._net.codebooksListBooks(this.setCodeBooks,this.showCodebooksFailure)},t.prototype.showCodebooksFailure=function(e,t,n){this.setLoading(!1),this.$(".search-btn"
).attr("disabled","disabled"),this.$el.find(".pane-content").append(this.templateCodebooksError)},t.prototype.removeCodebooksFailure=function(){this.$(".codebooks-error").remove()},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?(this.$(".tc-loading").remove(),this.$(".search-btn").removeAttr("disabled")):this.$el.find(".pane-content").append('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.setCodeBooks=function(e){var t;this.codeBooks.reset(e),this.setLoading(!1),this.initialBook&&this.model.set("bookValue",this.initialBook),this.initialSearch&&(t={book:this
.model.get("bookValue"),term:this.initialSearch,mockUser:!0,option:this.initialSearchOption},this.hub.trigger(A.CodeBooksSearch,t))},t.prototype.clear=function(e){this.searchRecords.reset()},t.prototype.clearAll=function(e){this.$(this.termSelector).val(""),this.clear()},t.prototype.render=function(){var e={close:{duration:0}},t;return N.TC.current().settings.effects||(e=!1),this.$el.html(this.template(this.codeBooks.toJSON())),t=this.$("select.book-list").kendoDropDownList({animation:e,change:this.bookChanging,dataBound:this.booksSetComplete,height:500}).data("kendoDropDownList"),t&&t.dataItem
()&&this.model.set("bookValue",t.dataItem().value),this},t.prototype.booksSetComplete=function(e){var t=this.$("select.book-list").data("kendoDropDownList");this.bookFilters?e.sender.dataSource.data().length&&(t.unbind("dataBound"),e.sender.dataSource.filter(this.bookFilters)):t.unbind("dataBound")},t.prototype.bookChanged=function(e,t){var n=this.model.get("bookValue");this.selectBook(n);switch(n){case"ICD9CM_DX":case"ICD9CM_E":case"ICD9CM_PR":case"ICD10CM_DX":case"ICD10CM_E":case"ICD10PCS_PR":this.$(".use-anesthesia").hide(),this.$(".find-all").show(),this.$(".show-modifiers").hide();break;case"CPT4_TABULAR"
:case"CPT4":this.$(".use-anesthesia").show(),this.$(".find-all").hide(),this.$(".show-modifiers").show();break;case"HCPCS_TABULAR":case"HCPCS":this.$(".use-anesthesia").hide(),this.$(".find-all").hide(),this.$(".show-modifiers").show();break;default:this.$(".use-anesthesia").hide(),this.$(".find-all").hide(),this.$(".show-modifiers").hide()}this.$(".book-list").val(n)},t.prototype.keypressHandler=function(e){if(e.which===13){e.preventDefault(),this.searchOnEvent(e);return}},t.prototype.searchOnEvent=function(e){var t,n=this.$(this.searchOptionSelector);this.model.set("searchOption",n.is(":checked"
)?n.val():"None"),t={term:this.$(this.termSelector).val(),book:this.model.get("bookValue"),option:this.model.get("searchOption")},this.hub.trigger(A.CodeBooksSearch,t)},t.prototype.blurAndSetTabularFocus=function(){C.blurAll(),this.hub.trigger(A.CodeBooksFocusTabular)},t.prototype.search=function(e){var t,n;this.blurAndSetTabularFocus(),this.cachedTerm=e.term,this.cachedBook=e.book.toUpperCase(),e.mockUser===!0&&(this.$(this.termSelector).val(e.term),this.selectBook(this.cachedBook),e.option&&e.option!=="None"?this.$('.search-options input[value="'+e.option+'"]').prop("checked",!0):this.$(".search-options input"
).prop("checked",!1)),n={book:this.cachedBook,term:e.term,options:e.option},this.targetDate.length&&(n.date=this.targetDate),L.Net.tryAbort(this.currentReq),this.currentReq=N.TC.current()._net.codebooksSearch(n,this.beforeProcessSearchResults,this.handleError)},t.prototype.handleError=function(e){},t.prototype.beforeProcessSearchResults=function(e){var t=e.search_type,n=!1,r=e.data_book.replace("_INDEX","").replace("_TABULAR",""),i,s;this.cachedBook=e.data_book,this.selectBook(r),t==="Term"&&this.hub.trigger(A.ResearchClear,{book:this.cachedBook}),this.processSearchResults(e)},t.prototype.processSearchResults=
function(e,t){var n=e.search_type,r,i=typeof t!="undefined",s=i&&typeof t.isSilent!="undefined"&&t.isSilent,o=i?t.term:this.cachedTerm,u=i&&typeof t.book!="undefined"?t.book:e.data_book,a=i&&typeof t.searchOption!="undefined"?t.searchOption:this.model.get("searchOption"),f=u.toUpperCase().indexOf("CPT")!==-1,l=u.toUpperCase().indexOf("HCPCS")!==-1,c=e.valid_partial_code&&e.valid_partial_code.length?e.valid_partial_code.toUpperCase():"";n==="Code"&&!f&&this.searchRecords.reset(e.search_view_tabular_records),(n==="Term"||f||l)&&this.searchRecords.reset(e.search_view_records),r={records:this.searchRecords
,type:n,term:o,book:u,partialCode:c,searchOption:a,isSilent:s},this.hub.trigger(A.CodeBooksSearchComplete,r)},t.prototype.onSelectBook=function(e){e.bookId&&e.bookId.length&&this.model.set("bookValue",e.bookId.toUpperCase())},t.prototype.selectBook=function(e){e&&e.length&&(e=e.toUpperCase());var t=this.$("select.book-list").data("kendoDropDownList");t&&t.select(function(t){return t.value===e})},t}(g.View);t.SearchbarView=_}),define("vendor/jquery/plugins/jquery.scrollTo",["jql"],function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo
(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t
.defaults,s),i=i||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}if(r==null)return;var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);if(!a.length)return;case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f)l[p]=f[i]+(c?0
:d-u.offset()[i]),s.margin&&(l[p]-=parseInt(a.css("margin"+r))||0,l[p]-=parseInt(a.css("border"+r+"Width"))||0),l[p]+=s.offset[i]||0,s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}s.limit&&/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v)),!e&&s.queue&&(d!=l[p]&&h(s.onAfterFirst),delete l[p])}),h(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math
.max(o[i],u[i])-Math.min(o[s],u[s])}}),define("text!controls/codebooks/templates/index/index.html",[],function(){return'<% if (data.showPartial && data.sections.columns) { %>\r\n<div class="index-result partial-code-result" data-book="<%= data.book %>">\r\n    <span><span class="code"><%= data.partial %></span> <strong>&#58;</strong> <em>view in <%= TextBook.MAP_ICD10PCS_PR %> table, &quot;<%= _.findWhere(data.sections.columns[0].choices, { char: data.partial.charAt(0) }).label %>&quot;</em></span>\r\n</div>\r\n<% } %>\r\n<%_.forEach(data.records, function(record, i) { %>\r\n    <% if (i === 3 && !data.wasFindAllSearch) { %>\r\n    <a class="index-overflow-link" href="javascript:void(0)">Show all <%= data.records.length %> search results</a>\r\n    <div class="index-overflow">\r\n    <% } %>\r\n        <div class="index-result" id="index-<%= record.data_sequence %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n            <span class="text"><%= record.text %></span>\r\n            <span class="codes">\r\n            <% if (typeof record.type ===\'undefined\' || record.type !== \'tablerow\') { %>\r\n                <%_.forEach(record.codes, function(rowCode, i) { %>\r\n                    <% if (i === 0) { %>\r\n                <span class="code"><%= rowCode %></span>\r\n                    <% } else { %>\r\n                [<span class="code bracketed"><%= rowCode %></span>]\r\n                    <% } %>\r\n                <% }); %>\r\n            <% } %>\r\n            </span>\r\n        </div>\r\n    <% if (i >= 3 && i + 1 === data.records.length && !data.wasFindAllSearch) { %>\r\n    </div>\r\n    <% } %>\r\n<% }); %>'
}),define("text!controls/codebooks/templates/index/index-heading.html",[],function(){return'<div class="pane-content pane-slim-s<% if (!hideResearch) { print(\' pane-slim-e\'); } %>">\r\n    <div class="heading-slim">\r\n        <span>Search Results for `<%= data.term %>` in <%= book %>\r\n    </div>\r\n    <input type="hidden" id="searched-book" value="<%= data.book %>" />\r\n</div>'}),define("text!controls/codebooks/templates/index/index-heading-empty.html",[],function(){return'<div class="pane-content pane-slim-s<% if (!hideResearch) { print(\' pane-slim-e\'); } %>">\r\n    <div class="heading-slim">\r\n        <span>Search Results</span>\r\n    </div>\r\n</div>'
}),define("text!controls/codebooks/templates/index/index-no-results.html",[],function(){return"<em>No results found.</em>"}),define("text!controls/codebooks/templates/index/index-empty.html",[],function(){return""}),define("text!controls/codebooks/templates/index/index-pcs.html",[],function(){return'<div class="pcs-part first">\r\n    <span class="pcs-heading"><%= headings[0] %></span>\r\n    <strong class="pcs-char"><%= pcsCodeParts[0] || \'&mdash;\' %></strong>\r\n    <span class="pcs-label"><%= labels[0] %></span>\r\n</div>\r\n<div class="pcs-part">\r\n    <span class="pcs-heading"><%= headings[1] %></span>\r\n    <strong class="pcs-char"><%= pcsCodeParts[1] || \'&mdash;\' %></strong>\r\n    <span class="pcs-label"><%= labels[1] %></span>\r\n</div>\r\n<div class="pcs-part">\r\n    <span class="pcs-heading"><%= headings[2] %></span>\r\n    <strong class="pcs-char"><%= pcsCodeParts[2] || \'&mdash;\' %></strong>\r\n    <span class="pcs-label"><%= labels[2] %></span>\r\n</div>\r\n<div class="pcs-overview">\r\n    <div class="pcs-overview-left">\r\n        Selected Code:\r\n        <strong class="pcs-code"><%= pcsCodeFormatted %></strong>\r\n        <span class="pcs-code-description"></span>\r\n    </div>\r\n    <button type="submit" class="k-button btn-add-code<% if (pcsCode.length === 7) { print(\' enabled\'); } else { print(\' k-state-disabled\'); } %>"<% if (pcsCode.length !== 7) { print(\' disabled="disabled"\'); } %>>Add Code</button>\r\n</div>'
}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&r(e[i],t[i],n)}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config();return{version:"2.0.1",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=
s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("locale/nls/books",{root:{CPT_ASSISTANT:"CPT Assistant",CDR:"Coders' Desk Reference",
CROSSWALK:"Crosswalk",ANESTHESIA_CROSSWALK:"Anesthesia Crosswalk",CODING_ADVICE:"Coding Advice",ADDITIONAL_REFERENCES:"Additional References",INTERVENTIONAL_RADIOLOGY:"Interventional Radiology",ICD9_GUIDELINES:"ICD-9-CM Official Guidelines",ICD10_GUIDELINES:"ICD-10 Official Guidelines",CC_HCPCS:"Coding Clinic for HCPCS",CC_ICD9:"Coding Clinic for ICD-9-CM",CC_ICD10:"Coding Clinic for ICD-10",DICTIONARY:"Medical Dictionary (Dorland's)",DRUGS:"Drug Data (Micromedex)",ICD9CM_DX:"ICD-9-CM Diagnosis",ICD9CM_DX_INDEX:"ICD-9-CM Diagnosis",ICD9CM_DX_TABULAR:"ICD-9-CM Diagnosis Tabular",ICD9CM_E:"ICD-9-CM E Code"
,ICD9CM_E_INDEX:"ICD-9-CM E Code",ICD9CM_E_TABULAR:"ICD-9-CM E Code Tabular",ICD9CM_PR:"ICD-9-CM Procedure",ICD9CM_PR_INDEX:"ICD-9-CM Procedure",ICD9CM_PR_TABULAR:"ICD-9-CM Procedure Tabular",ICD10CM_DX:"ICD-10-CM Diagnosis",ICD10CM_DX_INDEX:"ICD-10-CM Diagnosis",ICD10CM_DX_TABULAR:"ICD-10-CM Diagnosis Tabular",ICD10CM_E:"ICD-10-CM E Code",ICD10CM_E_INDEX:"ICD-10-CM E Code",ICD10CM_E_TABULAR:"ICD-10-CM E Code Tabular",ICD10PCS_PR:"ICD-10 Procedure",ICD10PCS_PR_INDEX:"ICD-10 Procedure",ICD10PCS_PR_TABULAR:"ICD-10 Procedure Tabular",MAP_ICD10PCS_PR:"ICD-10-PCS",MAP_ICD10PCS_PR_INDEX:"ICD-10-PCS",
MAP_ICD10PCS_PR_TABULAR:"ICD-10-PCS",CPT4:"CPT",HCPCS:"HCPCS",CPT4_TABULAR:"CPT",HCPCS_TABULAR:"HCPCS"}});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/views/index",["require","exports","Backbone","underscore","jql","vendor/jquery/plugins/jquery.scrollTo","text!controls/codebooks/templates/index/index.html","text!controls/codebooks/templates/index/index-heading.html","text!controls/codebooks/templates/index/index-heading-empty.html","text!controls/codebooks/templates/index/index-no-results.html","text!controls/codebooks/templates/index/index-empty.html"
,"text!controls/codebooks/templates/index/index-pcs.html","lib/api","lib/net","lib/templates","lib/events","lib/shortcuts","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=n,b=r,w=i,E=s,S=o,x=u,T=a,N=f,C=l,k=c,L=h,A=p,O=d,M=v,_=m,D=g,P=function(e){function t(t){E||!E,this.hub=t.hub,this.noResultsTemplate=O.get(O.tk_indexNoResults,N),this.emptyTemplate=O.get(O.tk_indexEmpty,C),this.emptyHeadingTemplate=O.compile(O.tk_indexHeadingEmpty,T),this.headingTemplate=O.compile(O.tk_indexHeading,x),this.template=O.compile(O.tk_indexResults,S),this.pcsTemplate=O.compile(O.tk_indexPCS
,k),this.sharedProperties=t.sharedProperties,this.$heading=t.$heading,this.scrollDuration=L.TC.current().settings.effects?0:0,this.hideResearch=t.hideResearch,this.events={click:"tcSetFocus","click .btn-add-code.enabled":"postPCSCode","click .index-result":"loadTabularForItem","click .index-result .code":"loadTabularForItem","click .index-overflow-link":"showOverflow"},this.scopeName="codebooks:index",this.shortcuts={"up codebooks:index":"moveArrow","down codebooks:index":"moveArrow","enter codebooks:index":"focusTabular"},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){
this.tcInit(),L.TC.current().settings.keyboardShortcuts&&(w.extend(this,_.Get()),this.delegateShortcuts()),b.bindAll(this),this.listenTo(this.hub,M.CodeBooksFocusIndex,this.tcSetFocus),this.listenTo(this.hub,M.CodeBooksClear,this.clear),this.listenTo(this.hub,M.CodeBooksSearch,this.clear),this.listenTo(this.hub,M.CodeBooksSearchComplete,this.showResults),this.listenTo(this.hub,M.CodeBooksPCSCodeChanged,this.renderPCS),this.listenTo(this.hub,M.CodeBooksGetICD10PCSTableData,this.showPCS),this.listenTo(this.hub,M.CodeBooksGetCrosswalk,this.hidePCS),this.listenTo(this.hub,M.CodeBooksGetTabular,this
.hidePCS)},t.prototype.showPCS=function(e){this.$(".pcs-pane").show(),this.$(".default-pane").hide()},t.prototype.hidePCS=function(e){this.$(".default-pane").show(),this.$(".pcs-pane").hide()},t.prototype.renderPCS=function(e){var t="_______".split(""),n=e.code.length,r,i=this.$(".pcs-pane"),s;this.setLoading(!1);for(var o=0;o<n;o++)t[o]=e.code.charAt(o);s=this.pcsTemplate({pcsCodeParts:e.code.split(""),pcsCode:e.code,pcsCodeFormatted:t.join(""),headings:e.headings,labels:e.labels}),i.length===0?this.$el.append(s):i.html(s),this.showPCS(),n===7&&(r={code:e.code,code_type:"ICD10PCS_PR"},this.setPCSDescriptionLoading
(!0),A.Net.tryAbort(this.currentReq),this.currentReq=L.TC.current()._net.codeGetDescription(r,this.updatePCSCodeDescription,this.updatePCSCodeDescription))},t.prototype.setPCSDescriptionLoading=function(e){typeof e=="undefined"||!e?this.$(".pcs-pane .tc-loading").remove():this.$(".pcs-pane .pcs-code-description").html('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.updatePCSCodeDescription=function(e){this.setPCSDescriptionLoading(!1),this.$(".pcs-pane .pcs-code-description").text(e.medium_description)},t.prototype.postPCSCode=function(e){var t,n;n={code:this.$(".pcs-pane .pcs-code"
).text(),codeType:"ICD10PCS_PR"},t={codes:[n]},this.hub.trigger(M.CodeBooksCodePosted,t)},t.prototype.focusTabular=function(e,t){var n=w.event.fix(e);n.preventDefault(),this.$(".default-pane .k-state-focused").click()},t.prototype.clear=function(e){var t=e&&e.book&&e.book==="ICD10PCS_PR";if(typeof e=="undefined"||!t)this.$heading.html(this.emptyHeadingTemplate({hideResearch:this.hideResearch})),this.$(".default-pane").html(this.emptyTemplate),this.hidePCS(),e&&e.term&&this.setLoading(!0);t&&(this.$(".pcs-pane").empty(),this.showPCS())},t.prototype.setLoading=function(e){typeof e=="undefined"||!
e?this.$heading.find(".tc-loading").remove():this.$heading.find(".heading-slim").append('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.render=function(){return this.clear(),this},t.prototype.showOverflow=function(e){var t=w(e.currentTarget),n,r;n=this.$(".k-state-focused").length>0?this.$(".k-state-focused"):this.$(".item-selected"),t.next().removeClass().children(":first").unwrap(),r=n.hasClass("index-overflow-link")?t.next():n,this.focusEntry(r),t.remove()},t.prototype.showResults=function(e){var t;if(e.records.length===0)e.partialCode.length&&e.book.indexOf("ICD10PCS"
)!==-1?(t={code:e.partialCode},this.hub.trigger(M.CodeBooksGetICD10PCSTableData,t)):(this.$heading.html(this.headingTemplate({data:{term:e.term,book:e.book},book:D[e.book]||e.book,hideResearch:this.hideResearch})),this.$(".default-pane").html(this.noResultsTemplate),this.hidePCS(),this.hub.trigger(M.CodeBooksSearchNoResults,e));else if(typeof e.isSilent=="undefined"||!e.isSilent)if(e.type==="Term"){this.$heading.html(this.headingTemplate({data:{term:e.term,book:e.book},book:D[e.book]||e.book,hideResearch:this.hideResearch}));var n=this.template({data:{records:e.records.toJSON(),book:e.book,showPartial
:e.partialCode.length>0&&e.book.indexOf("ICD10PCS")!==-1,partial:e.partialCode,sections:this.sharedProperties.get("pcsSections"),wasFindAllSearch:e.searchOption==="FindAll"},TextBook:D});this.$(".default-pane").html(n),this.hidePCS(),this.$(".default-pane .index-result:not(.partial-code-result)").first().click()}else this.setLoading(!1)},t.prototype.loadTabularForItem=function(e){e.stopPropagation();var t=w(e.currentTarget),n=t.hasClass("code"),r=t.hasClass("partial-code-result"),i=t,s=!1,o,u,a,f,l,c,h,p,d;n?(t=t.closest(".index-result"),p=i.text(),h=t.attr("data-book").replace("_INDEX","_TABULAR"
),d=t.attr("data-date"),l=t.find(".bracketed"),s=l.length>0,s&&(p=t.find(".code:first").text(),f={primaryCode:p,secondaryCode:t.find(".bracketed:first").text()},this.hub.trigger(M.CodeBooksSetCodePair,f))):(p=t.find(".text").text(),h=t.attr("data-book"),d=t.attr("data-date"));try{c=i.attr("id").replace("index-","")}catch(v){}h.indexOf("ICD10PCS")!==-1&&(n||r)?(p=t.find(".code:first").text(),u={code:p},this.hub.trigger(M.CodeBooksGetICD10PCSTableData,u)):(o={sequence:c,book:h,term:p,date:d},this.hub.trigger(M.CodeBooksGetTabular,o)),this.focusEntry(t,!0)},t.prototype.focusEntry=function(e,t){var n=
this.$(".pane-content"),r=n.height()/2,i;e.closest(".pane-content").show().siblings().hide(),i={duration:this.scrollDuration,offset:-r},n.stop().scrollTo(e,i),t?(e.attr("aria-selected","true").addClass("item-selected").siblings().removeAttr("aria-selected").removeClass("item-selected"),this.$(".k-state-focused").removeClass("k-state-focused")):(this.$(".k-state-focused").removeClass("k-state-focused"),e.addClass("k-state-focused"))},t.prototype.moveArrow=function(e,t){var n=w.event.fix(e);n.preventDefault();var r=this.$(".default-pane .k-state-focused").length>0?this.$(".default-pane .k-state-focused"
):this.$(".default-pane .item-selected");switch(t.key){case"up":this.focusEntry(r.prev());break;case"down":this.focusEntry(r.next());break;default:}},t.prototype.onSplitterCreated=function(){var e=this.$el.closest(".k-splitter").data("kendoSplitter");e.bind("layoutChange",this.fixContentScrollHeight),this.fixContentScrollHeight()},t.prototype.fixContentScrollHeight=function(e){var t=this.$el.closest(".index-mid-wrap.pane-scrollable");t.length>0&&(this.contentHeight=t.height()-20,t.find(".pane-content").css("height",this.contentHeight))},t}(y.View);t.IndexView=P}),define("vendor/underscore/plugins/underscore.string"
,["underscore"],function(e){var t=String.prototype.trim,n=String.prototype.trimRight,r=String.prototype.trimLeft,i=function(e){return e*1||0},s=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},o=[].slice,u=function(e){return e==null?"\\s":e.source?e.source:"["+h.escapeRegExp(e)+"]"},a={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},f={};for(var l in a)f[a[l]]=l;f["'"]="#39";var c=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=s,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments
[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i=1,s=n.length,o="",u,a=[],f,l,h,p,d,v;for(f=0;f<s;f++){o=e(n[f]);if(o==="string")a.push(n[f]);else if(o==="array"){h=n[f];if(h[2]){u=r[i];for(l=0;l<h[2].length;l++){if(!u.hasOwnProperty(h[2][l]))throw new Error(c('[_.sprintf] property "%s" does not exist',h[2][l]));u=u[h[2][l]]}}else h[1]?u=r[h[1]]:u=r[i++];if(/[^s]/.test(h[8])&&e(u)!="number")throw new Error(c("[_.sprintf] expecting number but found %s",e(u)));switch(h[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=
parseInt(u,10);break;case"e":u=h[7]?u.toExponential(h[7]):u.toExponential();break;case"f":u=h[7]?parseFloat(u).toFixed(h[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&h[7]?u.substring(0,h[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(h[8])&&h[3]&&u>=0?"+"+u:u,d=h[4]?h[4]=="0"?"0":h[4].charAt(1):" ",v=h[6]-String(u).length,p=h[6]?t(d,v):"",a.push(h[5]?u+p:p+u)}}return a.join("")},n.cache={},n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]
);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported"
);r.push(n)}t=t.substring(n[0].length)}return r},n}(),h={VERSION:"2.3.0",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return e==null?"":String(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=e==null?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return e==null?[]:(e=String(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])},clean:function(e){return h.strip(e).replace(/\s+/g," ")},count:function(e,t){if(e==null||t==null)return 0;e=String(e),t=String(t);var n=0,r=0,i=t.length;for(;;){r=e.indexOf(t,r);if(r===-1)break;n++
,r+=i}return n},chars:function(e){return e==null?[]:String(e).split("")},swapCase:function(e){return e==null?"":String(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return e==null?"":String(e).replace(/[&<>"']/g,function(e){return"&"+f[e]+";"})},unescapeHTML:function(e){return e==null?"":String(e).replace(/\&([^;]+);/g,function(e,t){var n;return t in a?a[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return e==null?"":String
(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=h.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return h.splice(e,t,0,n)},include:function(e,t){return t===""?!0:e==null?!1:String(e).indexOf(t)!==-1},join:function(){var e=o.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null?[]:String(e).split("\n")},reverse:function(e){return h.chars(e).reverse().join("")},startsWith:function(e,t){return t===""?!0:e==null||t==null?!1:(e=String(e),t=String(t),e.length>=t.length&&e.slice(0,t.length)===t)},endsWith
:function(e,t){return t===""?!0:e==null||t==null?!1:(e=String(e),t=String(t),e.length>=t.length&&e.slice(e.length-t.length)===t)},succ:function(e){return e==null?"":(e=String(e),e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return e==null?"":String(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return h.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return h.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return h.trim
(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return h.titleize(String(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return h.capitalize(h.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,n){return e==null?"":!n&&t?t.call(e):(n=u(n),String(e).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(e,t){return e==null?"":!t&&r?r.call(e):(t=u(t),String(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return e==null?"":!t&&n?n.call(e):(t=u(t),String(e).replace(new RegExp(t+"+$"),""))},truncate:function(
e,t,n){return e==null?"":(e=String(e),n=n||"...",t=~~t,e.length>t?e.slice(0,t)+n:e)},prune:function(e,t,n,r){if(e==null)return"";e=String(e),t=~~t,n=n!=null?String(n):"...";if(e.length<=t)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=h.rtrim(s.slice(0,s.length-1)),r?(s+n).length>e.length?[e,null]:[e.slice(0,s.length)+n,e.slice(s.length+1)]:(s+n).length>e.length?e:e.slice(0,s.length)+n},words:function(e,t){return h.isBlank(e)?[]:h.trim(e,t).split(t||/\s+/
)},pad:function(e,t,n,r){e=e==null?"":String(e),t=~~t;var i=0;n?n.length>1&&(n=n.charAt(0)):n=" ";switch(r){case"right":return i=t-e.length,e+s(n,i);case"both":return i=t-e.length,s(n,Math.ceil(i/2))+e+s(n,Math.floor(i/2));default:return i=t-e.length,s(n,i)+e}},lpad:function(e,t,n){return h.pad(e,t,n)},rpad:function(e,t,n){return h.pad(e,t,n,"right")},lrpad:function(e,t,n){return h.pad(e,t,n,"both")},sprintf:c,vsprintf:function(e,t){return t.unshift(e),c.apply(null,t)},toNumber:function(e,t){return e?(e=h.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?i(i(e).toFixed(~~t)):NaN):0},numberFormat:function(e,
t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t),r=typeof r=="string"?r:",";var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,t){if(e==null)return"";e=String(e),t=t!=null?String(t):t;var n=t?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strRightBack:function(e,t){if(e==null)return"";e=String(e),t=t!=null?String(t):t;var n=t?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strLeft:function(e,t){if(e==null)return"";e=String(e),t=t!=null?String(t):t;var n=t?e.indexOf(t):-1;return~n?e.slice(0,n):e},strLeftBack
:function(e,t){if(e==null)return"";e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),s=i.pop();return e.length>2&&r&&(n=h.rtrim(t)+n),i.length?i.join(t)+n+s:s},toSentenceSerial:function(){var e=o.call(arguments);return e[3]=!0,h.toSentence.apply(h,e)},slugify:function(e){if(e==null)return"";var t="\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a",n="aaaaaaaaceeeeeiiiilnoooooouuuunczz"
,r=new RegExp(u(t),"g");return e=String(e).toLowerCase().replace(r,function(e){var r=t.indexOf(e);return n.charAt(r)||"-"}),h.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return h.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,t,n){if(e==null)return"";t=~~t;if(n==null)return s(String(e),t);for(var r=[];t>0;r[--t]=e);return r.join(n)},levenshtein:function(e,t){if(e==null&&t==null)return 0;if(e==null)return String
(t).length;if(t==null)return String(e).length;e=String(e),t=String(t);var n=[],r,i;for(var s=0;s<=t.length;s++)for(var o=0;o<=e.length;o++)s&&o?e.charAt(o-1)===t.charAt(s-1)?i=r:i=Math.min(n[o],n[o-1],r)+1:i=s+o,r=n[o],n[o]=i;return n.pop()}};h.strip=h.trim,h.lstrip=h.ltrim,h.rstrip=h.rtrim,h.center=h.lrpad,h.rjust=h.lpad,h.ljust=h.rpad,h.contains=h.include,h.q=h.quote,typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(module.exports=h),exports._s=h),typeof define=="function"&&define.amd&&define("underscore.string",[],function(){return h}),e.string=e.str=h});var define;define
("vendor/jquery/plugins/jquery.imagesloaded",["jql"],function(e){var t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function l(){var t=e(a),s=e(f);i&&(f.length?i.reject(o,t,s):i.resolve(o)),e.isFunction(n)&&n.call(r,o,t,s)}function c(n,r){if(n.src===t||e.inArray(n,u)!==-1)return;u.push(n),r?f.push(n):a.push(n),e.data(n,"imagesLoaded",{isBroken:r,src:n.src}),s&&i.notifyWith(e(n),[r,o,e(a),e(f)]),o.length===u.length&&(setTimeout(l),o.unbind(".imagesLoaded"))}var r=this,i=e.isFunction(e.Deferred)?e.Deferred():0,s=e.isFunction(i.notify),o=r.
find("img").add(r.filter("img")),u=[],a=[],f=[];return e.isPlainObject(n)&&e.each(n,function(e,t){e==="callback"?n=t:i&&i[e](t)}),o.length?o.bind("load.imagesLoaded error.imagesLoaded",function(e){c(e.target,e.type==="error")}).each(function(n,r){var i=r.src,s=e.data(r,"imagesLoaded");if(s&&s.src===i){c(r,s.isBroken);return}if(r.complete&&r.naturalWidth!==undefined){c(r,r.naturalWidth===0||r.naturalHeight===0);return}if(r.readyState||r.complete)r.src=t,r.src=i}):l(),i?i.promise(r):r}}),define("text!controls/codebooks/templates/tabular/tabular.html",[],function(){return'<% _.each(records, function(record) { %>\r\n    <div class="tabular-result tabular-tabular-result type-<%= record.recordType %> level-<%= record.record.level %><% if (record.record.hasinstructionalnotes) { print (\' inote\'); } %><% if (record.record.subtypes && record.record.subtypes.length) { _.each(record.record.subtypes, function(st) { print(\' subtype-\' + st.name); }); } %><% if (record.selectable && !record.sevenCharCode) { print(\' selectable\'); } %><% if (record.sevenCharCode) { print(\' seven-char\'); } %>" id="tabular-<%= record.data_sequence %>" data-level="<%= record.record.level %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n    <% switch (record.recordType) {\r\n        case \'booktitle\': { %>\r\n        <h1><%= record.record.content %></h1>\r\n        <% }\r\n        break;\r\n        case \'sectiontitle\':\r\n        case \'chaptertitle\': { %>\r\n        <h3><%= record.record.content %></h3>\r\n        <% }\r\n        break;\r\n        case \'regular\': { %>\r\n        <div class="padded">\r\n            <% _.each(record.record.regular_note_data.segments, function(segment) { %>\r\n            <span class="note <%= segment.type %> note-level-<%= segment.level%>"><%= segment.content %></span>\r\n            <% }); %>\r\n        </div>\r\n        <% }\r\n        break;\r\n        case \'instructionalnote\': { %>\r\n        <% if (typeof inotePopup !== \'undefined\' && inotePopup && record.startCode && record.endCode) { %>\r\n            <div class="code-range code-text"><%= record.startCode %> &mdash; <%= record.endCode %></div>\r\n        <% } %>\r\n        <div class="padded <%= record.record.instructional_note_data.type %>">\r\n            <%_.forEach(record.record.instructional_note_data.segments, function(segment, i) { %>\r\n            <div class="parts<% if (i === 0) { print(\' first\'); } %>">\r\n                <% if (i === 0) { %><span class="prefix"><%= _.str.titleize(record.record.instructional_note_data.type) + \':\' %>&nbsp;</span><% } %><span class="segment level-<%= segment.level %>"><span class="part <%= segment.type %>"><%= segment.content.replace(/^Includes:\\s?|^Excludes[12]:\\s?/i, \'\') %></span></span>\r\n            </div>\r\n            <% }); %>\r\n        </div>\r\n        <% }\r\n        break;\r\n        default: { %>\r\n        <div class="leading col">\r\n            <a class="inote-icon icon" title="Show Instructional Notes" href="javascript:void(0)"></a>\r\n        </div>\r\n        <div class="padded">\r\n            <div class="status-icon-wrapper col">\r\n                <span class="new-icon icon" title="New Code"></span>\r\n                <span class="modified-icon icon" title="Revised Code"></span>\r\n            </div>\r\n            <div class="codes-wrapper col">\r\n                <span class="codes">\r\n                <%_.forEach(record.record.codes, function(recordCode, i) { %>\r\n                    <% if (i > 0) { %>, <% } %>\r\n                    <% if (record.sevenCharCode) { %>\r\n                    <a href="javascript:void(0)" class="code invisible full<% if (i === 0) print(\' primary-code default-target\'); %>"><%= recordCode.startcode %></a><a href="javascript:void(0)" class="code trimmed"><%= recordCode.startcode.charAt(recordCode.startcode.length - 1) %></a>\r\n                    <% } else { %>\r\n                    <a href="javascript:void(0)" class="code<% if (i === 0) print(\' primary-code default-target\'); %>"><%= recordCode.startcode %></a>\r\n                    <% } %>\r\n                <% }); %>\r\n                </span>\r\n            </div>\r\n            <div class="icon-wrapper col">\r\n                <span class="cc-icon icon" title="Complication/Comorbid Condition"></span>\r\n                <span class="mcc-icon icon" title="Major Complication/Comorbid Condition"></span>\r\n                <span class="nonor-icon icon" title="Nonoperative procedure"></span>\r\n                <span class="or-icon icon" title="Operative procedure"></span>\r\n            </div>\r\n            <div class="parts-wrapper">\r\n                <span class="parts"><span class="part"><%= record.record.content %></span></span>\r\n            </div>\r\n        </div>\r\n        <% }\r\n        break;\r\n    } %>\r\n    </div>\r\n<% }); %>'
}),define("text!controls/codebooks/templates/tabular/cpt.html",[],function(){return'<% var lastRowLength = 0 %>\r\n<% _.each(records, function(record) { %>\r\n    <% if (record.recordType.indexOf(\'table\') === -1) { %>\r\n    <div class="tabular-result tabular-cpt-result type-<%= record.recordType %> level-<%= record.record.level %><% if (record.record.subtypes && record.record.subtypes.length) { _.each(record.record.subtypes, function(st) { print(\' subtype-\' + st.name); }); } %><% if (record.record.hasinstructionalnotes) { print (\' inote\'); } %><% if (record.selectable) { print(\' selectable\'); } %>" id="tabular-<%= record.data_sequence %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n    <% } %>\r\n    <% switch (record.recordType) {\r\n        case \'section\':\r\n        case \'sectiontitle\': { %>\r\n        <h1><span><%= record.record.content %></span></h1>\r\n        <% }\r\n        break;\r\n        case \'tabletitle\': { %>\r\n        <h3><span><%= record.record.content %></span></h3>\r\n        <table class="tabular-table tabular-result tabular-cpt-result" id="tabular-<%= record.data_sequence %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n        <% }\r\n        break;\r\n        case \'tablehead\': { %>\r\n        <% lastRowLength = record.record.column_content.length %>\r\n        <tr>\r\n            <% _.each(record.record.column_content, function(col) { %>\r\n            <th><%= col %></th>\r\n            <% }); %>\r\n        </tr>\r\n        <% }\r\n        break;\r\n        case \'tableheading\': { %>\r\n        <tr><td class="table-heading" colspan="<%= lastRowLength %>"><%= record.record.content %></td></tr>\r\n        <% }\r\n        break;\r\n        case \'tableoddrow\': { %>\r\n        <tr class="odd">\r\n            <% _.forEach(record.record.column_content, function(col, i) { %>\r\n            <td<% if (i === 0) { if (col.length) { print(\' class="first has-content"\'); } else { print(\' class="first"\'); } } %>><%= col %></td>\r\n            <% }); %>\r\n        </tr>\r\n        <% }\r\n        break;\r\n        case \'tableevenrow\': { %>\r\n        <tr class="even">\r\n            <% _.forEach(record.record.column_content, function(col, i) { %>\r\n            <td<% if (i === 0) { if (col.length) { print(\' class="first has-content"\'); } else { print(\' class="first"\'); } } %>><%= col %></td>\r\n            <% }); %>\r\n        </tr>\r\n        <% }\r\n        break;\r\n        case \'tableend\': { %>\r\n        </table>\r\n        <% }\r\n        break;\r\n        case \'sectionline\':\r\n        case \'orderedlistitem\': { %>\r\n        <span><%= record.record.content %></span>\r\n        <% }\r\n        break;\r\n        case \'codingtiptitle\': { %>\r\n        <h2><span><%= record.record.content %></span></h2>\r\n        <% }\r\n        break;\r\n        case \'codingtipline\': { %>\r\n        <blockquote><%= record.record.content %></blockquote>\r\n        <% }\r\n        break;\r\n        default: { %>\r\n        <div class="icon-wrapper col">\r\n            <a class="inote-icon icon" title="Show Instructional Notes" href="javascript:void(0)"></a>\r\n            <span class="order-icon icon" title="Code is out of numerical sequence"></span>\r\n            <span class="exempt-icon icon" title="Modifier -51 Exempt"></span>\r\n            <span class="cs-icon icon" title="Conscious Sedation"></span>\r\n            <span class="fda-icon icon" title="FDA approval pending"></span>\r\n            <span class="new-icon icon" title="New Code"></span>\r\n            <span class="addon-icon icon" title="Add-On Code"></span>\r\n            <span class="modified-icon icon" title="Revised Code"></span>\r\n        </div>\r\n        <div class="codes-wrapper col">\r\n            <span class="codes"><a href="javascript:void(0)" class="code primary-code default-target"><%= record.record.code %></a></span>\r\n        </div>\r\n        <div class="parts-wrapper">\r\n            <div class="images-wrapper">\r\n            <%_.forEach(record.record.images, function(img, i) { %>\r\n                <a href="javascript:void(0)" class="img-icon icon" data-image-name="<%= img.filename %>" title="<%= img.title %>" data-image-caption="<%= img.caption %>"></a>\r\n            <% }); %>\r\n            </div>\r\n            <span class="parts"><%= record.record.content %></span>\r\n        </div>\r\n        <% }\r\n        break;\r\n    } %>\r\n    <% if (record.recordType.indexOf(\'table\') === -1) { %>\r\n    </div>\r\n    <% } %>\r\n<% }); %>'
}),define("text!controls/codebooks/templates/tabular/hcpcs.html",[],function(){return'<% _.each(records, function(record) { %>\r\n    <div class="tabular-result tabular-hcpcs-result type-<%= record.recordType %> level-<%= record.record.level %><% if (record.record.subtypes && record.record.subtypes.length) { _.each(record.record.subtypes, function(st) { print(\' subtype-\' + st.name); }); } %><% if (record.record.hasinstructionalnotes) { print (\' inote\'); } %><% if (record.selectable) { print(\' selectable\'); } %>" id="tabular-<%= record.data_sequence %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n    <% switch (record.recordType) {\r\n        case \'section\': { %>\r\n        <h1><%= record.record.content %></h1>\r\n        <% }\r\n        break;\r\n        default: { %>\r\n        <div class="icon-wrapper col padded">\r\n            <span class="new-icon icon" title="New Code"></span>\r\n            <span class="modified-icon icon" title="Revised Code"></span>\r\n        </div>\r\n        <div class="codes-wrapper col">\r\n            <span class="codes"><a href="javascript:void(0)" class="code primary-code default-target"><%= record.record.code %></a></span>\r\n        </div>\r\n        <div class="parts-wrapper">\r\n            <div class="images-wrapper"></div>\r\n            <span class="parts"><%= record.record.content %></span>\r\n        </div>\r\n        <% }\r\n        break;\r\n    } %>\r\n    </div>\r\n<% }); %>'
}),define("text!controls/codebooks/templates/tabular/crosswalk.html",[],function(){return'<% _.forEach(data.items, function(item, i) { %>\r\n<div class="tabular-result tabular-crosswalk-result selectable<% if (item.is_best_match === true) { print(\' best\'); } %>" id="tabular-<%= item.id %>" data-book="<%= item.book %>" data-id="<%= item.id %>" title="<%= item.is_best_match === true ? \'Best\' : \'Other\' %> Result">\r\n    <span><%= item.medium_description %></span>\r\n    <span class="code default-target"><%= item.code %></span>\r\n</div>\r\n<% }); %>'}),define("text!controls/codebooks/templates/tabular/pcs-wrapper.html"
,[],function(){return'<div class="pcs pane-content pane-slim-n pane-slim-s<% if (!hideResearch) { print(\' pane-slim-e\'); } %>">\r\n    <input type="text" class="pcsHelper" style="position:absolute;top:-2000px;right:0;z-index:-100" />\r\n    <div class="pcs-outer">\r\n        <!-- splitter -->\r\n        <div class="pcs-inner">\r\n            <% for (var i = 1; i <= 7; i++) { %>\r\n            <!-- pane -->\r\n            <div class="pcs-pane">\r\n                <!-- splitter -->\r\n                <div class="pcs-column inactive<% if (i === 1) { print(\' extra-action\'); } %>" data-col="<%= i %>">\r\n                    <!-- pane -->\r\n                    <div class="pane-head"></div>\r\n                    <!-- pane -->\r\n                    <div class="pane-body"></div>\r\n                </div>\r\n            </div>\r\n            <% } %>\r\n        </div>\r\n    </div>\r\n</div>\r\n'
}),define("text!controls/codebooks/templates/tabular/pcs-column-head.html",[],function(){return'<% switch (colNum) { \r\n    case 1: { %>\r\n    <div class="pcs-column-head first">\r\n        <div><% if (sections.columns) { %><%= sections.columns[0].header %><% } else { %>Section<% } %></div>\r\n    </div>\r\n    <% }\r\n    break;\r\n    case 4: { %>\r\n    <div class="pcs-column-head pivot">\r\n        <div><%= column.header %></div>\r\n        <span class="icon-pivot icon-right-small"></span>\r\n    </div>\r\n    <% }\r\n    break;\r\n    case 7: { %>\r\n    <div class="pcs-column-head last">\r\n        <div><%= column.header %></div>\r\n    </div>\r\n    <% }\r\n    break;\r\n    default: { %>\r\n    <div class="pcs-column-head">\r\n        <div><%= column.header %></div>\r\n    </div>\r\n    <% }\r\n    break;\r\n} %>'
}),define("text!controls/codebooks/templates/tabular/pcs-column-choices.html",[],function(){return'<% switch (colNum) { \r\n    case 1: { %>\r\n    <div class="pcs-column-choices first">\r\n        <div>\r\n            <div class="spacer">&nbsp;</div>\r\n    <% if (sections.columns) { %>\r\n        <% _.each(sections.columns[0].choices, function(section) { %>\r\n            <% if (section.label === sectionTitle) { %>\r\n            <div class="item-selected" aria-selected="true">\r\n                <a href="javascript:void(0)"><%= section.char %></a>\r\n                <span><%= section.label %></span>\r\n            </div>\r\n            <% } else { %>\r\n            <div class="not-selected">\r\n                <a href="javascript:void(0)"><%= section.char %></a>\r\n                <span><%= section.label %></span>\r\n            </div>\r\n            <% } %>\r\n        <% }); %>\r\n    <% } else { %>\r\n            <div class="item-selected" aria-selected="true">\r\n                <a href="javascript:void(0)"></a>\r\n                <span><%= sectionTitle %></span>\r\n            </div>\r\n    <% } %>\r\n        </div>\r\n    </div>\r\n    <% }\r\n    break;\r\n    default: { %>\r\n    <div class="pcs-column-choices<% if (colNum === 7) { print(\' last\'); } %>">\r\n        <div>\r\n        <% if (colNum === code.length + 1) { %>\r\n            <div class="spacer item-selected" aria-selected="true">&nbsp;</div>\r\n        <% } else { %>\r\n            <div class="spacer">&nbsp;</div>\r\n        <% } %>\r\n        <% _.each(column.choices, function(choice) { %>\r\n            <% if (choice) { %>\r\n            <div<% if (code[colNum - 1] === choice.char) { print(\' class="item-selected" aria-selected="true"\'); } else { print(\' class="not-selected"\'); } %>>\r\n                <a href="javascript:void(0)"><%= choice.char %></a>\r\n                <span><%= choice.label %></span>\r\n            </div>\r\n            <% } %>\r\n        <% }); %>\r\n        </div>\r\n    </div>\r\n    <% }\r\n    break;\r\n} %>'
}),define("text!controls/codebooks/templates/tabular/index.html",[],function(){return'<% _.each(records, function(record) { %>\r\n    <div class="tabular-result tabular-index-result type-<%= record.recordType %> level-<%= record.record.level %><% if (record.record.subtypes && record.record.subtypes.length) { _.each(record.record.subtypes, function(st) { print(\' subtype-\' + st.name); }); } %><% if (record.selectable) { print(\' selectable\'); } %>" id="tabular-<%= record.data_sequence %>" data-book="<%= record.data_book %>" data-sequence="<%= record.data_sequence %>" data-date="<%= record.data_date %>">\r\n    <% switch (record.recordType) {\r\n        case \'letter\': { %>\r\n        <span class="letter"><%= record.record.content %></span>\r\n        <% }\r\n        break;\r\n        case \'tablerowchannelpublishing\':\r\n        case \'tablerow\': { %>\r\n        <div class="table-wrapper <%= record.record.table_row_codes.table %>" data-table-type="<%= record.record.table_row_codes.table %>">\r\n            <div class="text-wrapper padded">\r\n                <span class="cp-icon icon" title="Channel Publishing Expanded ICD-9-CM Table of Drugs and Chemicals"></span>\r\n                <span class="text"><%= record.record.content %></span>\r\n                <span class="short-text hide"><%= (record.record.full_path) ? record.record.full_path.short : \'\' %></span>\r\n            </div>\r\n            <div class="codes table-codes-wrapper">\r\n            <% _.forEach(record.record.table_row_codes.items, function(rowCodeCollection, i) { %>\r\n                <% if (rowCodeCollection != null && rowCodeCollection[0] !== \'-\') { %>\r\n                    <% if (i === 0) { %>\r\n                    <a href="javascript:void(0)" class="code primary-code default-target"><%= rowCodeCollection[rowCodeCollection.length - 1] %></a>\r\n                    <% } else { %>\r\n                    <a href="javascript:void(0)" class="code<% if (rowCodeCollection.length > 1) { print(\' bracketed\'); } else { print(\' primary-code\'); } %>"<% if (rowCodeCollection.length > 1) { %> data-paired-code="<%= rowCodeCollection[0] %>"<% } %>><%= rowCodeCollection[rowCodeCollection.length - 1] %></a>\r\n                    <% } %>\r\n                <% } else { %>\r\n                <span>&mdash;</span>\r\n                <% } %>\r\n            <% }); %>\r\n            </div>\r\n        </div>\r\n        <% }\r\n        break;\r\n        case \'regular\':\r\n        case \'customline\': { %>\r\n        <div class="padded">\r\n            <div class="icon-wrapper col">\r\n                <span class="customline-icon icon" title="TruCode Custom Index Line"></span>\r\n            </div>\r\n            <div class="text-wrapper">\r\n                <span class="text"><%= record.record.content %></span>\r\n                <span class="codes">\r\n                <% if (record.hasCodes) { %>\r\n                <%_.forEach(record.record.regular_row_codes, function(rowCode, i) { %>\r\n                    <% if (i === 0) { %> \r\n                    <a href="javascript:void(0)" class="code primary-code default-target"><%= rowCode %></a>\r\n                    <% } else { %>\r\n                    <strong>[</strong><a href="javascript:void(0)" class="code bracketed"><%= rowCode %></a><strong>]</strong>\r\n                    <% } %>\r\n                <% }); %>\r\n                <% } %>\r\n                </span>\r\n                <span class="short-text hide"><%= (record.record.full_path) ? record.record.full_path.short : \'\' %></span>\r\n            </div>\r\n        </div>\r\n        <% }\r\n        break;\r\n        default: { %>\r\n        <div class="padded">\r\n            <span class="text"><%= record.record.content %></span>\r\n        </div>\r\n        <% }\r\n        break;\r\n    } %>\r\n    </div>\r\n<% }); %>'
}),define("text!controls/codebooks/templates/tabular/wrapper.html",[],function(){return'<div class="pane-content pane-slim-s<% if (!hideResearch) { print(\' pane-slim-e\'); } %>">\r\n    <div class="heading-slim">\r\n        <span>Book: <%= book %></span>\r\n    </div>\r\n    <div class="heading-alt">\r\n        <div class="controls control-group">\r\n            <button type="button" class="tabular-back tabular-history disabled k-state-disabled k-button"><span class="k-icon k-i-arrow-w">Back</span></button>\r\n            <button type="button" class="tabular-forward tabular-history disabled k-state-disabled k-button"><span class="k-icon k-i-arrow-e">Forward</span></button>\r\n            <span class="context"></span>\r\n        </div>\r\n    </div>\r\n</div>'
}),define("text!controls/codebooks/templates/tableHeadings/drug-ICD9.html",[],function(){return'<div id="column-labels" class="drug">\r\n    <strong>Poisoning</strong>\r\n    <strong>Accident</strong>\r\n    <strong>Therapeutic Use</strong>\r\n    <strong>Suicide Attempt</strong>\r\n    <strong>Assault</strong>\r\n    <strong>Undetermined</strong>\r\n</div>'}),define("text!controls/codebooks/templates/tableHeadings/drug-ICD10.html",[],function(){return'<div id="column-labels" class="drug">\r\n    <strong>Poisoning, Accidental (unintentional)</strong>\r\n    <strong>Poisoning, Intentional Self-Harm</strong>\r\n    <strong>Poisoning, Assault</strong>\r\n    <strong>Poisoning, Undetermined</strong>\r\n    <strong>Adverse Effect</strong>\r\n    <strong>Underdosing</strong>\r\n</div>'
}),define("text!controls/codebooks/templates/tableHeadings/hypertension.html",[],function(){return'<div id="column-labels" class="hypertension">\r\n    <strong>Malignant</strong>\r\n    <strong>Benign</strong>\r\n    <strong>Unspecified</strong>\r\n</div>'}),define("text!controls/codebooks/templates/tableHeadings/neoplasm.html",[],function(){return'<div id="column-labels" class="neoplasm">\r\n    <strong>Malignant Primary</strong>\r\n    <strong>Malignant Secondary</strong>\r\n    <strong>Malignant Ca in situ</strong>\r\n    <strong>Benign</strong>\r\n    <strong>Uncertain Behavior</strong>\r\n    <strong>Unspecified</strong>\r\n</div>'
}),define("text!controls/codebooks/templates/instructional-note.html",[],function(){return'<div class="codebooks">\r\n    <div class="instructional-note-content tabular-results">\r\n        <%= formatted %>\r\n    </div>\r\n</div>'}),define("text!controls/codebooks/templates/modifiers.html",[],function(){return'<div class="codebooks">\r\n    <div class="modifiers-content">\r\n        <% var currentCategory = \'\'; %>\r\n<% _.each(modifiers, function(modifier) { %>\r\n    <% if (modifier.category !== currentCategory) {\r\n        currentCategory = modifier.category; %>\r\n        <h1 class="category"><%= modifier.category %></h1>\r\n        <% } %>\r\n    <div class="modifier">\r\n        <span class="modifier-code modifier-code-<%= modifier.code %>"><%= modifier.code %></span>\r\n        <p class="modifier-description"><%= modifier.long_description %></p>\r\n        <p class="modifier-note"><%= modifier.note %></p>\r\n    </div>\r\n        <% }); %>\r\n    </div>\r\n</div>'
}),define("text!controls/codebooks/templates/tabular/cpt-image-modal.html",[],function(){return'<div class="codebooks">\r\n    <div class="cpt-image-modal">\r\n        <h1 class="image-title"><%= title %></h1>\r\n        <p class="image-caption"><%= caption %></p>\r\n        <p class="image-wrapper">\r\n            <img src="<%= imgPath %>" />\r\n        </p>\r\n    </div>\r\n</div>'}),define("text!controls/common/templates/loading-large.html",[],function(){return'<div class="k-loading-image shrink tc-loading"></div>'}),define("kendoui/kendo.userevents",["kendoui/kendo.jquery","kendoui/kendo.core"
],function(e,t){function x(e,t){var n=e.x.location,r=e.y.location,i=t.x.location,s=t.y.location,o=n-i,u=r-s;return{center:{x:(n+i)/2,y:(r+s)/2},distance:Math.sqrt(o*o+u*u)}}function T(e){var t=[],r=e.originalEvent,i=e.currentTarget,s=0,o,u,a;if(e.api)t.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e});else if(e.type.match(/touch/)){u=r?r.changedTouches:[];for(o=u.length;s<o;s++)a=u[s],t.push({location:a,event:e,target:a.target,currentTarget:i,id:a.identifier})}else n.pointers||n.msPointers?t.push({location:r,event:e,target:e.target,currentTarget:i,id:r.pointerId}):t.push({id
:1,event:e,target:e.target,currentTarget:i,location:e});return t}function k(t){t.preventDefault();var n=e(t.data.root),r=n.closest(".k-widget").parent();r[0]||(r=n.parent());var i=e.extend(!0,{},t,{target:n[0]});r.trigger(e.Event(t.type,i))}function L(e){var n=t.eventMap.up.split(" "),r=0,i=n.length;for(;r<i;r++)e(n[r])}var n=t.support,r=window.document,i=t.Class,s=t.Observable,o=e.now,u=e.extend,a=n.mobileOS,f=a&&a.android,l=n.browser.ie?5:0,c="press",h="select",p="start",d="move",v="end",m="cancel",g="tap",y="release",b="gesturestart",w="gesturechange",E="gestureend",S="gesturetap",N=i.extend
({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=o()},move:function(e){var t=this,n=e["page"+t.axis],r=o(),i=r-t.timeStamp||1;if(!n&&f)return;t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/i,t.timeStamp=r},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),C=i.extend({init:function(e,t,n){var r=this;u(r,{x:new N("X",n.location),y:new N("Y",n.location),userEvents:e,target:t,currentTarget:n.currentTarget
,initialTouch:n.target,id:n.id,_moved:!1,_finished:!1}),r.notifyInit=function(){r._trigger(c,n)}},move:function(e){var t=this;if(t._finished)return;t.x.move(e.location),t.y.move(e.location);if(!t._moved){if(t._withinIgnoreThreshold())return;if(!!A.current&&A.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(d,e)},end:function(e){var t=this;t.endTime=o();if(t._finished)return;t._moved?t._trigger(v,e):t._trigger(g,e),t._trigger(y,e),t.dispose()},dispose:function(){var t=this,n=t.userEvents,r=n.touches;t._finished=!0,r.splice(e.inArray(t,r),1)},skip:function(){this.dispose
()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){this.startTime=o(),this._moved=!0,this._trigger(p,e)},_trigger:function(e,t){var n=this,r=t.event,i={touch:n,x:n.x,y:n.y,target:n.target,event:r};n.userEvents.notify(e,i)&&r.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.userEvents.threshold}}),A=s.extend({init:function(i,o){var a=this,f,x=t.guid();o=o||{},f=a.filter=o.filter,a.threshold=o.threshold||l,a.touches=[],a._maxTouches=o.multiTouch?2:1,a.allowSelection=o.allowSelection
,a.captureUpIfMoved=o.captureUpIfMoved,a.eventNS=x,i=e(i).handler(a),s.fn.init.call(a),u(a,{element:i,surface:o.global?e(r.documentElement):e(o.surface||i),stopPropagation:o.stopPropagation,pressed:!1}),a.surface.handler(a).on(t.applyEventMap("move",x),"_move").on(t.applyEventMap("up cancel",x),"_end"),i.on(t.applyEventMap("down",x),f,"_start"),(n.pointers||n.msPointers)&&i.css("-ms-touch-action","pinch-zoom double-tap-zoom"),o.preventDragEvent&&i.on(t.applyEventMap("dragstart",x),t.preventDefault),i.on(t.applyEventMap("mousedown selectstart",x),f,{root:i},"_select");if(a.captureUpIfMoved&&n.eventCapture
){var T=a.surface[0],N=e.proxy(a.preventIfMoving,a);L(function(e){T.addEventListener(e,N,!0)})}a.bind([c,g,p,d,v,y,m,b,w,E,S,h],o)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e=this;if(e._destroyed)return;e._destroyed=!0;if(e.captureUpIfMoved&&n.eventCapture){var t=e.surface[0];L(function(n){t.removeEventListener(n,e.preventIfMoving)})}e.element.kendoDestroy(e.eventNS),e.surface.kendoDestroy(e.eventNS),e.element.removeData("handler"),e.surface.removeData("handler"),e._disposeAll(),e.unbind(),delete e.surface,delete e.element},capture:function(){A.current=
this},cancel:function(){this._disposeAll(),this.trigger(m)},notify:function(e,t){var n=this,r=n.touches;if(this._isMultiTouch()){switch(e){case d:e=w;break;case v:e=E;break;case g:e=S}u(t,{touches:r},x(r[0],r[1]))}return this.trigger(e,t)},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){e.each(this.touches,function(){this.dispose()})},_isMoved:function(
){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(h,{event:e}))&&k(e)},_start:function(t){var n=this,r=0,i=n.filter,s,o=T(t),u=o.length,a;if(n._maxTouchesReached())return;A.current=null,n.currentTarget=t.currentTarget,n.stopPropagation&&t.stopPropagation();for(;r<u;r++){if(n._maxTouchesReached())break;a=o[r],i?s=e(a.currentTarget):s=n.element;if(!s.length)continue;a=new C(n,s,a),n.touches.push(a),a.notifyInit(),n._isMultiTouch()&&n.notify("gesturestart",{})}},_move:function(e){this._eachTouch("move",e)},_end:function(e)
{this._eachTouch("end",e)},_eachTouch:function(e,t){var n=this,r={},i=T(t),s=n.touches,o,u,a,f;for(o=0;o<s.length;o++)u=s[o],r[u.id]=u;for(o=0;o<i.length;o++)a=i[o],f=r[a.id],f&&f[e](a)},_apiCall:function(t,n,r,i){this[t]({api:!0,pageX:n,pageY:r,target:i||this.element,stopPropagation:e.noop,preventDefault:e.noop})}});t.getTouches=T,t.touchDelta=x,t.UserEvents=A}),define("kendoui/kendo.draganddrop",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.userevents"],function(e,t){function k(t,n){try{return e.contains(t,n)||t==n}catch(r){return!1}}function L(e){return g?r.elementFromPoint(e.x
.screen,e.y.screen):r.elementFromPoint(e.x.client,e.y.client)}function A(e,t){return parseInt(e.css(t),10)||0}function O(e,t){return Math.min(Math.max(e,t.min),t.max)}function M(e,t){var n=l(e),r=n.left+A(e,"borderLeftWidth")+A(e,"paddingLeft"),i=n.top+A(e,"borderTopWidth")+A(e,"paddingTop"),s=r+e.width()-t.outerWidth(!0),o=i+e.height()-t.outerHeight(!0);return{x:{min:r,max:s},y:{min:i,max:o}}}function _(e,t,r){var i,s,o=0,u=t&&t.length,a=r&&r.length;while(e&&e.parentNode){for(o=0;o<u;o++){i=t[o];if(i.element[0]===e)return{target:i,targetElement:e}}for(o=0;o<a;o++){s=r[o];if(n.matchesSelector.call
(e,s.options.filter))return{target:s,targetElement:e}}e=e.parentNode}return undefined}var n=t.support,r=window.document,i=t.Class,s=t.ui.Widget,o=t.Observable,u=t.UserEvents,a=e.proxy,f=e.extend,l=t.getOffset,c={},h={},p={},d,v=n.mobileOS,m=v&&v.android,g=m&&v.browser=="chrome",y="keyup",b="change",w="dragstart",E="drag",S="dragend",x="dragcancel",T="dragenter",N="dragleave",C="drop",D=o.extend({init:function(n,r){var i=this,s=n[0];i.capture=!1,e.each(t.eventMap.down.split(" "),function(){s.addEventListener(this,a(i._press,i),!0)}),e.each(t.eventMap.up.split(" "),function(){s.addEventListener(this
,a(i._release,i),!0)}),o.fn.init.call(i),i.bind(["press","release"],r||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),P=o.extend({init:function(t){var n=this;o.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:
function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:1e3,_virtualMax:-1e3})},virtualSize:function(e,t){if(this._virtualMin!==e||this._virtualMax!==t)this._virtualMin=e,this._virtualMax=t,this.update()},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),r=n*t.scale,i=t.getSize();t.max=t.virtual?-t._virtualMin:0,t.
size=i,t.total=r,t.min=Math.min(t.max,i-r),t.minScale=i/n,t.centerOffset=(r-i)/2,t.enabled=t.forcedEnabled||r>i,e||t.trigger(b,t)}}),H=o.extend({init:function(e){var n=this,r=a(n.refresh,n);o.fn.init.call(n),n.x=new P(f({horizontal:!0},e)),n.y=new P(f({horizontal:!1},e)),n.forcedMinScale=e.minScale,n.bind(b,e),t.onResize(r)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=
e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(b)}}),B=o.extend({init:function(e){var t=this;f(t,e),o.fn.init.call(t)},dragMove:function(e){var t=this,n=t.dimension,r=t.axis,i=t.movable,s=i[r]+e;if(!n.enabled)return;if(s<n.min&&e<0||s>n.max&&e>0)e*=t.resistance;i.translateAxis(r,e),t.trigger(b,t)}}),j=i.extend({init:function(e){var t=this,n,r,i,s;f(t,{elastic:!0},e),i=t.elastic?.5:0,s=t.movable,t.x=n=new B({axis:"x",dimension:t.dimensions.x,resistance:i,movable:s}),t.y=r=new B({axis:"y",dimension:t.dimensions.y,resistance:i,movable
:s}),t.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){t.gesture=e},gesturechange:function(e){var i=t.gesture,o=i.center,u=e.center,a=e.distance/i.distance,f=t.dimensions.minScale,l;s.scale<=f&&a<1&&(a+=(1-a)*.8),l={x:(s.x-o.x)*a+u.x-s.x,y:(s.y-o.y)*a+u.y-s.y},s.scaleWith(a),n.dragMove(l.x),r.dragMove(l.y),t.dimensions.rescale(s.scale),t.gesture=e,e.preventDefault()},move:function(e){if(e.event.target.tagName.match(/textarea|input/i))return;n.dimension.enabled||r.dimension.enabled?(n.dragMove(e.x.delta),r.dragMove(e.y.delta),e.preventDefault()):e.touch.skip
()},end:function(e){e.preventDefault()}})}}),F=n.transitions.prefix+"Transform",I;n.hasHW3D?I=function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:I=function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"};var q=o.extend({init:function(t){var n=this;o.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(I(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this
.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){f(this,e),this.refresh()},refresh:function(){var e=this,t=I(e.x,e.y,e.scale);t!=e.coordinates&&(e.element[0].style[F]=t,e._saveCoordinates(t),e.trigger(b))},_saveCoordinates:function(e){this.coordinates=e}}),R=s.extend({init:function(e,t){var n=this;s.fn.init.call(n,e,t);var r=n.options.group;r in h?h[r].push(n):h[r]=[n]},events:[T,N,C],options:{name:"DropTarget",group:"default"},destroy:function(){var e=this.options.group,t=h[e]||p[e],n;if(t.length>1){s.fn.destroy.call(this);for(n=0;n<t.length
;n++)if(t[n]==this){t.splice(n,1);break}}else R.destroyGroup(e)},_trigger:function(e,t){var n=this,r=c[n.options.group];if(r)return n.trigger(e,f({},t.event,{draggable:r,dropTarget:t.dropTarget}))},_over:function(e){this._trigger(T,e)},_out:function(e){this._trigger(N,e)},_drop:function(e){var t=this,n=c[t.options.group];n&&(n.dropped=!t._trigger(C,e))}});R.destroyGroup=function(e){var t=h[e]||p[e],n;if(t){for(n=0;n<t.length;n++)s.fn.destroy.call(t[n]);t.length=0,delete h[e],delete p[e]}},R._cache=h;var U=R.extend({init:function(e,t){var n=this;s.fn.init.call(n,e,t);var r=n.options.group;r in p?
p[r].push(n):p[r]=[n]},options:{name:"DropTargetArea",group:"default",filter:null}}),z=s.extend({init:function(e,n){var r=this;s.fn.init.call(r,e,n),r.userEvents=new u(r.element,{global:!0,stopPropagation:!0,filter:r.options.filter,threshold:r.options.distance,start:a(r._start,r),move:a(r._drag,r),end:a(r._end,r),cancel:a(r._cancel,r)}),r._afterEndHandler=a(r._afterEnd,r),r.captureEscape=function(e){e.keyCode===t.keys.ESC&&(r._trigger(x,{event:e}),r.userEvents.cancel())}},events:[w,E,S,x],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,dropped:!1}
,_updateHint:function(t){var n=this,r,i=n.options,s=n.boundaries,o=i.axis,u=n.options.cursorOffset;u?r={left:t.x.location+u.left,top:t.y.location+u.top}:(n.hintOffset.left+=t.x.delta,n.hintOffset.top+=t.y.delta,r=e.extend({},n.hintOffset)),s&&(r.top=O(r.top,s.y),r.left=O(r.left,s.x)),o==="x"?delete r.top:o==="y"&&delete r.left,n.hint.css(r)},_start:function(t){var n=this,i=n.options,s=i.container,o=i.hint;n.currentTarget=t.target,n.currentTargetOffset=l(n.currentTarget);if(o){n.hint&&n.hint.stop(!0,!0).remove(),n.hint=e.isFunction(o)?e(o.call(n,n.currentTarget)):o;var u=l(n.currentTarget);n.hintOffset=
u,n.hint.css({position:"absolute",zIndex:2e4,left:u.left,top:u.top}).appendTo(r.body)}c[i.group]=n,n.dropped=!1,s&&(n.boundaries=M(s,n.hint)),n._trigger(w,t)&&(n.userEvents.cancel(),n._afterEnd()),e(r).on(y,n.captureEscape)},_drag:function(t){var n=this;t.preventDefault(),n._withDropTarget(t,function(n,r){if(!n){d&&(d._trigger(N,f(t,{dropTarget:e(d.targetElement)})),d=null);return}if(d){if(r===d.targetElement)return;d._trigger(N,f(t,{dropTarget:e(d.targetElement)}))}n._trigger(T,f(t,{dropTarget:e(r)})),d=f(n,{targetElement:r})}),n._trigger(E,t),n.hint&&n._updateHint(t)},_end:function(t){var n=this
;n._withDropTarget(t,function(n,r){n&&(n._drop(f({},t,{dropTarget:e(r)})),d=null)}),n._trigger(S,t),n._cancel(t.event)},_cancel:function(){var e=this;e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,f({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var n=this,r,i,s=n.options,o=h[s.group],u=p[s.group];if(o&&o.length||u&&u.length)r=L(e),n.hint&&k(n.hint[0],r)&&(n.hint.hide(),r=L(e),r||(r=L(e)),n.
hint.show()),i=_(r,o,u),i?t(i.target,i.targetElement):t()},destroy:function(){var e=this;s.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy()},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete c[t.options.group],t.trigger("destroy"),e(r).off(y,t.captureEscape)}});t.ui.plugin(R),t.ui.plugin(U),t.ui.plugin(z),t.TapCapture=D,t.containerBoundaries=M,f(t.ui,{Pane:j,PaneDimensions:H,Movable:q})}),define("kendoui/kendo.resizable",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.draganddrop","kendoui/kendo.userevents"],function(e,t){var n=t.ui,r=n.Widget,i=e.proxy,s=e.isFunction
,o=e.extend,u="horizontal",a="vertical",f="start",l="resize",c="resizeend",h=r.extend({init:function(e,t){var s=this;r.fn.init.call(s,e,t),s.orientation=s.options.orientation.toLowerCase()!=a?u:a,s._positionMouse=s.orientation==u?"x":"y",s._position=s.orientation==u?"left":"top",s._sizingDom=s.orientation==u?"outerWidth":"outerHeight",s.draggable=new n.Draggable(e,{distance:0,filter:t.handle,drag:i(s._resize,s),dragcancel:i(s._cancel,s),dragstart:i(s._start,s),dragend:i(s._stop,s)}),s.userEvents=s.draggable.userEvents},events:[l,c,f],options:{name:"Resizable",orientation:u},_max:function(e){var t=
this,n=t.hint?t.hint[t._sizingDom]():0,r=t.options.max;return s(r)?r(e):r!==undefined?t._initialElementPosition+r-n:r},_min:function(e){var t=this,n=t.options.min;return s(n)?n(e):n!==undefined?t._initialElementPosition+n:n},_start:function(t){var n=this,r=n.options.hint,i=e(t.currentTarget);n._initialElementPosition=i.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,r&&(n.hint=s(r)?e(r(i)):r,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(f,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document
.body).css("cursor",i.css("cursor"))},_resize:function(t){var n=this,r=e(t.currentTarget),i=n._maxPosition,s=n._minPosition,u=n._initialElementPosition+(t[n._positionMouse].location-n._initialMousePosition),a;a=s!==undefined?Math.max(s,u):u,n.position=a=i!==undefined?Math.min(i,a):a,n.hint&&n.hint.toggleClass(n.options.invalidClass||"",a==i||a==s).css(n._position,a),n.resizing=!0,n.trigger(l,o(t,{position:a}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(c,o(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var t=this;t.hint&&(t.position=
undefined,t.hint.css(t._position,t._initialElementPosition),t._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(!e)return;var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e},move:function(e){var t=this,n=t._position,r=t.targetPosition,i=t.position;i===undefined&&(i=r[n]),r[n]=i+e,t.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=undefined}});t.ui.plugin(h)}),define("kendoui/kendo.window",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.userevents"
,"kendoui/kendo.draganddrop","kendoui/kendo.resizable","kendoui/kendo.fx"],function(e,t){function z(e){return typeof e!="undefined"}function W(e,t,n){return Math.max(Math.min(parseInt(e,10),n===Infinity?n:parseInt(n,10)),parseInt(t,10))}function X(e,t){return function(){var n=this,r=n.wrapper,i=r[0].style,s=n.options;if(s.isMaximized||s.isMinimized)return;return n.restoreOptions={width:i.width,height:i.height},r.find(g).hide().end().find(j).parent().hide().eq(0).before(c.action({name:"Restore"})),t.call(n),e=="maximize"?n.wrapper.find(v).find(q).parent().hide():n.wrapper.find(v).find(q).parent(
).show(),n}}function $(e){var t=this;t.owner=e,t._draggable=new r(e.wrapper,{filter:g,group:e.wrapper.id+"-resizing",dragstart:o(t.dragstart,t),drag:o(t.drag,t),dragend:o(t.dragend,t)})}function J(e,t){var n=this;n.owner=e,n._draggable=new r(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:o(n.dragstart,n),drag:o(n.drag,n),dragend:o(n.dragend,n),dragcancel:o(n.dragcancel,n)})}var n=t.ui.Widget,r=t.ui.Draggable,i=e.isPlainObject,s=t._activeElement,o=e.proxy,u=e.extend,a=e.each,f=t.template,l="body",c,h=".kendoWindow",p=".k-window",d=".k-window-title",v=d+"bar",m=".k-window-content",g=".k-resize-handle"
,y=".k-overlay",b="k-content-frame",w="k-loading",E="k-state-hover",S="k-state-focused",x=":visible",T="hidden",N="cursor",C="open",k="activate",L="deactivate",A="close",O="refresh",M="resize",_="dragstart",D="dragend",P="error",H="overflow",B="zIndex",j=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",F=".k-i-pin",I=".k-i-unpin",q=F+","+I,R=".k-window-titlebar .k-window-action",U=t.isLocalUrl,V=n.extend({init:function(r,s){var u=this,a,f={},l,c,g=!1,y,b,w=s&&s.actions&&!s.actions.length,N;n.fn.init.call(u,r,s),s=u.options,r=u.element,y=s.content,w&&(s.actions=[]),u.appendTo=e(
e(s.appendTo)[0]||document.body),u._animations(),y&&!i(y)&&(y=s.content={url:y}),r.find("script").filter(function(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}).remove(),!r.parent().is(u.appendTo)&&(s.position.top===undefined||s.position.left===undefined)&&(r.is(x)?(f=r.offset(),g=!0):(l=r.css("visibility"),c=r.css("display"),r.css({visibility:T,display:""}),f=r.offset(),r.css({visibility:l,display:c})));if(!z(s.visible)||s.visible===null)s.visible=r.is(x);a=u.wrapper=r.closest(p);if(!r.is(".k-content")||!a[0])r.addClass("k-window-content k-content"),u._createWindow(r,s),a=u
.wrapper=r.closest(p),u._dimensions();a.css({top:s.position.top||f.top||"",left:s.position.left||f.left||""}),s.pinned&&u.pin(!0),y&&u.refresh(y),s.visible&&u.toFront(),b=a.children(m),u._tabindex(b),s.visible&&s.modal&&u._overlay(a.is(x)).css({opacity:.5}),a.on("mouseenter"+h,R,function(){e(this).addClass(E)}).on("mouseleave"+h,R,function(){e(this).removeClass(E)}).on("click"+h,R,o(u._windowActionHandler,u)),b.on("keydown"+h,o(u._keydown,u)).on("focus"+h,function(){a.addClass(S)}).on("blur"+h,function(){a.removeClass(S)}),this._resizable(),this._draggable(),N=r.attr("id"),N&&(N+="_wnd_title",a
.find(v).children(d).attr("id",N),b.attr({role:"dialog","aria-labelledby":N})),a.add(a.find(".k-resize-handle,.k-window-titlebar")).on("mousedown"+h,o(u.toFront,u)),u.touchScroller=t.touchScroller(r),u._resizeHandler=function(e){return u._onDocumentResize(e)},e(window).on("resize",u._resizeHandler),s.visible&&(u.trigger(C),u.trigger(k)),t.notify(u)},_dimensions:function(){var e=this,t=e.wrapper,n=e.options,r=n.width,i=n.height,s=n.maxHeight;e.title(n.title),a(["minWidth","minHeight","maxWidth","maxHeight"],function(e,r){var i=n[r];i&&i!=Infinity&&t.css(r,i)}),s&&s!=Infinity&&e.element.css("maxHeight"
,s),r&&(r.toString().indexOf("%")>0?t.width(r):t.width(W(r,n.minWidth,n.maxWidth))),i&&(i.toString().indexOf("%")>0?t.height(i):t.height(W(i,n.minHeight,n.maxHeight))),n.visible||t.hide()},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resizable:function(){var t=this.options.resizable,n=this.wrapper;t?(n.on("dblclick"+h,v,o(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),a("n e s w se sw ne nw".split(" "),function(e,t){n.append(c.resizeHandle(t))}),this.resizing=new $(this))
:this.resizing&&(n.off("dblclick"+h).find(g).remove(),this.resizing.destroy(),this.resizing=null)},_draggable:function(){var e=this.options.draggable;e?this.dragging=new J(this,e.dragHandle||v):this.dragging&&(this.dragging.destroy(),this.dragging=null)},setOptions:function(e){n.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._resizable(),this._draggable()},events:[C,k,L,A,O,M,_,D,P],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}}
,duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:!1,position:{},content:null,visible:null,height:null,width:null},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var n=this,r=n.options,i=t.keys,s=e.keyCode,o=n.wrapper,u,a,f=10,l=n.options.isMaximized,c,h;if(e.target!=e.currentTarget||n._closing)return;s==i.ESC&&n._closable()&&n._close(!0),r.draggable&&!e.ctrlKey&&!l&&(u=t.getOffset(o),s==i.UP?
a=o.css("top",u.top-f):s==i.DOWN?a=o.css("top",u.top+f):s==i.LEFT?a=o.css("left",u.left-f):s==i.RIGHT&&(a=o.css("left",u.left+f))),r.resizable&&e.ctrlKey&&!l&&(s==i.UP?(a=!0,h=o.height()-f):s==i.DOWN&&(a=!0,h=o.height()+f),s==i.LEFT?(a=!0,c=o.width()-f):s==i.RIGHT&&(a=!0,c=o.width()+f),a&&(o.css({width:W(c,r.minWidth,r.maxWidth),height:W(h,r.minHeight,r.maxHeight)}),n.trigger(M))),a&&e.preventDefault()},_overlay:function(t){var n=this.appendTo.children(y),r=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(r[0]).toggle(t).css(B,parseInt(r.css(B),10)-1),n},_windowActionHandler
:function(t){var n=e(t.target).closest(".k-window-action").find(".k-icon"),r=this;if(r._closing)return;a({"k-i-close":function(){r._close(!0)},"k-i-maximize":r.maximize,"k-i-minimize":r.minimize,"k-i-restore":r.restore,"k-i-refresh":r.refresh,"k-i-pin":r.pin,"k-i-unpin":r.unpin},function(e,i){if(n.hasClass(e))return t.preventDefault(),i.call(r),!1})},_modals:function(){var t=this;return e(p).filter(function(){var n=e(this),r=t._object(n).options;return r.modal&&r.visible&&n.is(x)}).sort(function(t,n){return+e(t).css("zIndex")- +e(n).css("zIndex")})},_object:function(e){var t=e.children(m);return t
.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t=this,n=t.wrapper,r=e(window);return t.options.isMaximized?t:(n.css({left:r.scrollLeft()+Math.max(0,(r.width()-n.width())/2),top:r.scrollTop()+Math.max(0,(r.height()-n.height())/2)}),t)},title:function(e){var t=this,n=t.wrapper,r=t.options,i=n.find(v),s=i.children(d),o=i.outerHeight();return arguments.length?(e===!1?(n.addClass("k-window-titleless"),i.remove()):(i.length||n.prepend(c.titlebar(u(c,r))),n.css("padding-top",o),i.css("margin-top",-o)),s.text(e),t):s.text()},content:function(e){var n=this.wrapper.children
(m),r=n.children(".km-scroll-container");return n=r[0]?r:n,e?(t.destroy(this.element.children()),n.html(e),this):n.html()},open:function(){var n=this,r=n.wrapper,i=n.options,s=i.animation.open,o=r.children(m),u=o.css(H),a;if(!n.trigger(C)){n._closing&&r.kendoStop(!0,!0),n._closing=!1,n.toFront(),i.autoFocus&&n.element.focus(),i.visible=!0;if(i.modal){a=n._overlay(!1),a.kendoStop(!0,!0);if(s.duration&&t.effects.Fade){var f=t.fx(a).fadeIn();f.duration(s.duration||0),f.endValue(.5),f.play()}else a.css("opacity",.5);a.show()}r.is(x)||(o.css(H,T),r.show().kendoStop().kendoAnimate({effects:s.effects,
duration:s.duration,complete:function(){i.autoFocus&&n.element.focus(),n.trigger(k),o.css(H,u)}}))}return i.isMaximized&&(n._documentScrollTop=e(document).scrollTop(),e("html, body").css(H,T)),n},_removeOverlay:function(n){var r=this._modals(),i=this.options,s=i.modal&&!r.length,o=i.modal?this._overlay(!0):e(undefined),u=i.animation.close;if(s)if(!n&&u.duration&&t.effects.Fade){var a=t.fx(o).fadeOut();a.duration(u.duration||0),a.startValue(.5),a.play()}else this._overlay(!1).remove();else r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,r=n.wrapper,i=n.options,s=i.animation
.open,o=i.animation.close;r.is(x)&&!n.trigger(A,{userTriggered:!!t})&&(n._closing=!0,i.visible=!1,e(p).each(function(t,n){var i=e(n).find(m);n!=r&&i.find("> ."+b).length>0&&i.children(y).remove()}),this._removeOverlay(),r.kendoStop().kendoAnimate({effects:o.effects||s.effects,reverse:o.reverse===!0,duration:o.duration,complete:function(){r.hide().css("opacity",""),n.trigger(L);var e=n._object(n._modals().last());e&&e.toFront()}})),n.options.isMaximized&&(e("html, body").css(H,""),n._documentScrollTop&&n._documentScrollTop>0&&e(document).scrollTop(n._documentScrollTop))},close:function(){return this
._close(!1),this},toFront:function(t){var n=this,r=n.wrapper,i=r[0],o=+r.css(B),u=o,a=s(),f=n.element,l=t&&t.target?t.target:null;e(p).each(function(t,n){var r=e(n),s=r.css(B),u=r.find(m);isNaN(s)||(o=Math.max(+s,o)),n!=i&&u.find("> ."+b).length>0&&u.append(c.overlay)}),(!r[0].style.zIndex||u<o)&&r.css(B,o+2),n.element.find("> .k-overlay").remove();if(n.options.autoFocus&&!e(a).is(f)&&!e(l).is(R+","+R+" .k-icon,:input,a")&&(!f.find(a).length||!f.find(l).length)){f.focus();var h=e(window).scrollTop(),d=parseInt(n.wrapper.position().top,10);d>0&&d-h<0&&(h>0?e(window).scrollTop(d):n.wrapper.css("top"
,h))}return n},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,r=n.minHeight,i=t.restoreOptions;if(!n.isMaximized&&!n.isMinimized)return;return r&&r!=Infinity&&t.wrapper.css("min-height",r),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:i.left,top:i.top,width:i.width,height:i.height}).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(j).parent().show().end().end().find(q).parent().show(),e("html, body"
).css(H,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.trigger(M),t},maximize:X("maximize",function(){var t=this,n=t.wrapper,r=n.position();u(t.restoreOptions,{left:r.left,top:r.top}),n.css({left:0,top:0,position:"fixed"}),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(H,T),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:X("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,r=e(window),
i=n.wrapper,s=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);if(t||!n.options.pinned&&!n.options.isMaximized)i.css({position:"fixed",top:s-r.scrollTop(),left:o-r.scrollLeft()}),i.find(v).find(F).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0},unpin:function(){var t=this,n=e(window),r=t.wrapper,i=parseInt(r.css("top"),10),s=parseInt(r.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(r.css({position:"",top:i+n.scrollTop(),left:s+n.scrollLeft()}),r.find(v).find(I).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t=
this,n=t.wrapper,r=e(window);if(!t.options.isMaximized)return;n.css({width:r.width(),height:r.height()-parseInt(n.css("padding-top"),10)}),t.trigger(M)},refresh:function(t){var n=this,r=n.options,s=e(n.element),o,a,l;return i(t)||(t={url:t}),t=u({},r.content,t),a=z(r.iframe)?r.iframe:t.iframe,l=t.url,l?(z(a)||(a=!U(l)),a?(o=s.find("."+b)[0],o?o.src=l||o.src:s.html(c.contentFrame(u({},r,{content:t}))),s.find("."+b).unbind("load"+h).on("load"+h,function(){n.trigger(O)})):n._ajaxRequest(t)):(t.template&&n.content(f(t.template)({})),n.trigger(O)),n},_ajaxRequest:function(t){var n=this,r=t.template,
i=n.wrapper.find(".k-window-titlebar .k-i-refresh"),s=setTimeout(function(){i.addClass(w)},100);e.ajax(u({type:"GET",dataType:"html",cache:!1,error:function(e,t){n.trigger(P,{status:t,xhr:e})},complete:function(){clearTimeout(s),i.removeClass(w)},success:function(e){r&&(e=f(r)(e||{})),n.content(e),n.element.prop("scrollTop",0),n.trigger(O)}},t))},destroy:function(){var r=this.wrapper;n.fn.destroy.call(this),t.destroy(r),this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.element.children("iframe").remove(),r.find(".k-resize-handle,.k-window-titlebar").off(h),r.remove
().off(h),e(window).off("resize",this._resizeHandler),this._removeOverlay(!0)},_createWindow:function(){var n=this,r=n.element,i=n.options,s,o,a=t.support.isRtl(r);i.scrollable===!1&&r.attr("style","overflow:hidden;"),o=e(c.wrapper(i)),i.title!==!1&&o.append(c.titlebar(u(c,i))),s=r.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),o.toggleClass("k-rtl",a).appendTo(n.appendTo).append(r).find("iframe:not(.k-content)").each(function(e){this.src=s[e]}),o.find(".k-window-title").css(a?"left":"right",o.find(".k-window-actions").outerWidth()+10),r.show
(),r.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()})}});c={wrapper:f("<div class='k-widget k-window' />"),action:f("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:f("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions'># for (var i = 0; i < actions.length; i++) { ##= action({ name: actions[i] }) ## } #</div></div>"),overlay:"<div class='k-overlay' />",contentFrame:f("<iframe frameborder='0' title='#= title #' class='"+
b+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:f("<div class='k-resize-handle k-resize-#= data #'></div>")},$.prototype={dragstart:function(n){var r=this,i=r.owner,s=i.wrapper;r.elementPadding=parseInt(i.wrapper.css("padding-top"),10),r.initialCursorPosition=t.getOffset(s,"position"),r.resizeDirection=n.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),r.initialSize={width:s.width(),height:s.height()},r.containerOffset=t.getOffset(i.appendTo),s.append(c.overlay).find(g).not(n.currentTarget).hide(),e(l).css(N,
n.currentTarget.css(N))},drag:function(e){var t=this,n=t.owner,r=n.wrapper,i=n.options,s=t.resizeDirection,o=t.containerOffset,u=t.initialCursorPosition,a=t.initialSize,f,l,c,h,p=Math.max(e.x.location,o.left),d=Math.max(e.y.location,o.top);s.indexOf("e")>=0?(f=p-u.left,r.width(W(f,i.minWidth,i.maxWidth))):s.indexOf("w")>=0&&(h=u.left+a.width,f=W(h-p,i.minWidth,i.maxWidth),r.css({left:h-f-o.left,width:f})),s.indexOf("s")>=0?(l=d-u.top-t.elementPadding,r.height(W(l,i.minHeight,i.maxHeight))):s.indexOf("n")>=0&&(c=u.top+a.height,l=W(c-d,i.minHeight,i.maxHeight),r.css({top:c-l-o.top,height:l})),n.trigger
(M)},dragend:function(t){var n=this,r=n.owner,i=r.wrapper;return i.find(y).remove().end().find(g).not(t.currentTarget).show(),e(l).css(N,""),r.touchScroller&&r.touchScroller.reset(),t.keyCode==27&&i.css(n.initialCursorPosition).css(n.initialSize),!1},destroy:function(){this._draggable.destroy()}},J.prototype={dragstart:function(n){var r=this.owner,i=r.element,s=i.find(".k-window-actions"),o=t.getOffset(r.appendTo);r.trigger(_),r.initialWindowPosition=t.getOffset(r.wrapper,"position"),r.startPosition={left:n.x.client-r.initialWindowPosition.left,top:n.y.client-r.initialWindowPosition.top},s.length>0?
r.minLeftPosition=s.outerWidth()+parseInt(s.css("right"),10)-i.outerWidth():r.minLeftPosition=20-i.outerWidth(),r.minLeftPosition-=o.left,r.minTopPosition=-o.top,r.wrapper.append(c.overlay).find(g).hide(),e(l).css(N,n.currentTarget.css(N))},drag:function(t){var n=this.owner,r={left:Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),top:Math.max(t.y.client-n.startPosition.top,n.minTopPosition)};e(n.wrapper).css(r)},_finishDrag:function(){var t=this.owner;t.wrapper.find(g).toggle(!t.options.isMinimized).end().find(y).remove(),e(l).css(N,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget
.closest(p).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(D),!1},destroy:function(){this._draggable.destroy()}},t.ui.plugin(V)}),define("text!controls/common/templates/modal.html",[],function(){return'<div class="trucode" style="display:none; overflow-y:auto">\r\n    <div class="modal-content"></div>\r\n</div>'}),define("text!controls/common/templates/modal-confirm-buttons.html",[],function(){return'<div class="dialog-confirm">\r\n    <button type="button" class="k-button ok-button">Ok</button>\r\n    <button type="button" class="k-button cancel-button">Cancel</button>\r\n</div>\r\n'
}),define("lib/modal",["require","exports","jql","kendoui/kendo.window","lib/api","lib/templates","text!controls/common/templates/modal.html","text!controls/common/templates/modal-confirm-buttons.html"],function(e,t,n,r,i,s,o,u){function d(e){f||!f;var t=l.TC.current().settings.modalId,n=a("#"+t),r=n.length!==0,i=r?n.data("kendoWindow"):null,s;return s={draggable:!0,modal:!0,resizable:!1,visible:!1,maxWidth:650,maxHeight:300,minWidth:300},a.extend(s,e),l.TC.current().settings.effects||(s.animation=!1),r?(i.unbind(),e.htmlContent&&n.find(".modal-content").html(e.htmlContent),i.options.visible===!0&&delete 
s.visible,i.setOptions(s)):(n=a(c.get(c.tk_modal,h)).attr("id",t),e.htmlContent&&n.find(".modal-content").html(e.htmlContent),i=n.kendoWindow(s).data("kendoWindow"),i.element.unbind("keydown").bind("keydown",v).click()),i.bind("open",m),i.center().open(),typeof e.confirm=="function"&&n.find(".k-button").click(function(){a(this).hasClass("ok-button")&&e.confirm(),g()}),n}function v(e){e.keyCode===27&&g()}function m(){a("#"+l.TC.current().settings.modalId).parent().addClass("trucode")}function g(){f||!f;var e=l.TC.current().settings.modalId,t=a("#"+e),n=t.length!==0,r=n?t.data("kendoWindow"):null
;r!==null&&r.close()}function y(e){e.htmlContent+=c.get(c.tk_modalConfirm,p),e.width="500px",d(e)}function b(){var e=l.TC.current().settings.modalId,t=a("#"+e);return t}var a=n,f=r,l=i,c=s,h=o,p=u;t.show=d,t.close=g,t.confirm=y,t.get=b}),define("kendoui/kendo.splitter",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.userevents","kendoui/kendo.draganddrop","kendoui/kendo.resizable"],function(e,t){function N(e){return a.test(e)}function C(e){return u.test(e)||/^\d+$/.test(e)}function k(e){return!N(e)&&!C(e)}function L(e,t){return function(n,r){var i=this.element.find(n).data(w);if(arguments
.length==1)return i[e];i[e]=r;if(t){var s=this.element.data("kendo"+this.options.name);s.trigger(d)}}}function _(e){var n=this,r=e.orientation;n.owner=e,n._element=e.element,n.orientation=r,i(n,r===m?M:O),n._resizable=new t.ui.Resizable(e.element,{orientation:r,handle:".k-splitbar-draggable-"+r+"[data-marker="+e._marker+"]",hint:s(n._createHint,n),start:s(n._start,n),max:s(n._max,n),min:s(n._min,n),invalidClass:"k-restricted-size-"+r,resizeend:s(n._stop,n)})}var n=t.ui,r=t.keys,i=e.extend,s=e.proxy,o=n.Widget,u=/^\d+(\.\d+)?px$/i,a=/^\d+(\.\d+)?%$/i,f=".kendoSplitter",l="expand",c="collapse",h="contentLoad"
,p="error",d="resize",v="layoutChange",m="horizontal",g="vertical",y="mouseenter",b="click",w="pane",E="mouseleave",S="k-state-focused",x="k-"+w,T="."+x,A=o.extend({init:function(e,n){var i=this,u;o.fn.init.call(i,e,n),i.wrapper=i.element,u=i.options.orientation.toLowerCase()!=g,i.orientation=u?m:g,i._dimension=u?"width":"height",i._keys={decrease:u?r.LEFT:r.UP,increase:u?r.RIGHT:r.DOWN},i._resizeStep=10,i.bind(d,s(i._resize,i)),i._marker=t.guid().substring(0,8),i._resizeHandler=function(){i.trigger(d)},i._initPanes(),i.resizing=new _(i),i.element.triggerHandler("init"+f)},events:[l,c,h,p,d,v],
_parentSplitter:function(){return this.element.parent().closest(".k-splitter")},_attachEvents:function(){var t=this,n=t.options.orientation,r=t._parentSplitter();t.element.children(".k-splitbar-draggable-"+n).on("keydown"+f,e.proxy(t._keydown,t)).on("mousedown"+f,function(e){e.currentTarget.focus()}).on("focus"+f,function(t){e(t.currentTarget).addClass(S)}).on("blur"+f,function(n){e(n.currentTarget).removeClass(S),t.resizing&&t.resizing.end()}).on(y+f,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(E+f,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")})
.on("mousedown"+f,function(){t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+f,function(){t._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+f,s(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(b+f,t._arrowClick(c)).end().children(".k-expand-next, .k-expand-prev").on(b+f,t._arrowClick(l)).end().end();if(!r.length)e(window).on("resize",t._resizeHandler);else{var i=r.data("kendo"+t.options.name);i?i.bind(d,t._resizeHandler):r.off("init"+f).one("init"+f,function(){e(this).data("kendo"+t.options.name)
.bind(d,t._resizeHandler),t._resizeHandler()})}},_detachEvents:function(){var t=this,n=t._parentSplitter().data("kendo"+t.options.name);t.element.children(".k-splitbar-draggable-"+t.orientation).off(f).end().children(".k-splitbar").off("dblclick"+f).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(f),n?n.unbind(d,t._resizeHandler):e(window).off("resize",t._resizeHandler)},options:{name:"Splitter",orientation:m,panes:[]},destroy:function(){var e=this;o.fn.destroy.call(e),e._detachEvents(),e.resizing&&e.resizing.destroy(),t.destroy(e.element)},_keydown:function(t
){var n=this,i=t.keyCode,s=n.resizing,o=e(t.currentTarget),u=n._keys,a=i===u.increase,f=i===u.decrease,h;a||f?(t.ctrlKey?(h=o[f?"next":"prev"](),s&&s.isResizing()&&s.end(),h[n._dimension]()?n._triggerAction(c,o[f?"prev":"next"]()):n._triggerAction(l,h)):s&&s.move((f?-1:1)*n._resizeStep,o),t.preventDefault()):i===r.ENTER&&s&&(s.end(),t.preventDefault())},_initPanes:function(){var e=this,t=e.options.panes||[];e.element.addClass("k-widget").addClass("k-splitter").children(":not(script)").each(function(n,r){var i=t&&t[n];e._initPane(r,i)}).end(),e.trigger(d)},_initPane:function(t,n){t=e(t).attr("role"
,"group").addClass(x),t.data(w,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,n,r){var i=this,s;e=i.element.find(e),s=e.data(w),n=n||s.contentUrl,n&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),t.isLocalUrl(n)?jQuery.ajax({url:n,data:r||{},type:"GET",dataType:"html",success:function(t){e.html(t),i.trigger(h,{pane:e[0]})},error:function(t,n){i.trigger(p,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+n+"' frameborder='0' class='k-content-frame'>"+"This page requires frames in order to show content"+"</iframe>"
))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n=this,r=e(t.target),i;if(r.closest(".k-splitter")[0]!=n.element[0])return;i=r.children(".k-icon:not(.k-resize-handle)");if(i.length!==1)return;i.is(".k-collapse-prev")?n._triggerAction(c,r.prev()):i.is(".k-collapse-next")?n._triggerAction(c,r.next()):i.is(".k-expand-prev")?n._triggerAction(l,r.prev()):i.is(".k-expand-next")&&n._triggerAction(l,r.next())},_arrowClick:function(t){var n=this;return function(r){var i=e(r.target),s;if(i.closest(".k-splitter")[0]!=n.element[0])return;i.is(".k-"+t+"-prev"
)?s=i.parent().prev():s=i.parent().next(),n._triggerAction(t,s)}},_updateSplitBar:function(e,t,n){var r=function(e,t){return t?"<div class='k-icon "+e+"' />":""},i=this.orientation,s=t.resizable!==!1&&n.resizable!==!1,o=t.collapsible,u=t.collapsed,a=n.collapsible,f=n.collapsed;e.addClass("k-splitbar k-state-default k-secondary k-splitbar-"+i).attr("role","separator").attr("aria-expanded",!u&&!f).removeClass("k-splitbar-"+i+"-hover").toggleClass("k-splitbar-draggable-"+i,s&&!u&&!f).toggleClass("k-splitbar-static-"+i,!s&&!o&&!a).html(r("k-collapse-prev",o&&!u&&!f)+r("k-expand-prev",o&&u&&!f)+r("k-resize-handle"
,s)+r("k-collapse-next",a&&!f&&!u)+r("k-expand-next",a&&f&&!u))},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),r=n.prevAll(T).first().data(w),i=n.nextAll(T).first().data(w);if(!i)return;t._updateSplitBar(n,r,i)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(T)},_resize:function(){var t=this,n=t.element,r=n.children(T),i=t.orientation==m,s=n.children(".k-splitbar"),o=s.length,u=i?"width":"height",a=n[u]();o===0?(o=r.length-1,r.slice(0,o).after("<div tabindex='0' class='k-splitbar' data-marker='"+
t._marker+"' />"),t._updateSplitBars(),s=n.children(".k-splitbar")):t._updateSplitBars(),s.each(function(){a-=this[i?"offsetWidth":"offsetHeight"]});var f=0,l=0,c=e();r.css({position:"absolute",top:0})[u](function(){var t=e(this).data(w)||{},n;if(t.collapsed)n=0,e(this).css("overflow","hidden");else{if(k(t.size)){c=c.add(this);return}n=parseInt(t.size,10),N(t.size)&&(n=Math.floor(n*a/100))}return l++,f+=n,n}),a-=f;var h=c.length,p=Math.floor(a/h);c.slice(0,h-1).css(u,p).end().eq(h-1).css(u,a-(h-1)*p);var d=0,g=i?"height":"width",y=i?"left":"top",b=i?"offsetWidth":"offsetHeight";if(h===0){var E=
r.filter(function(){return!(e(this).data(w)||{}).collapsed}).last();E[u](a+E[0][b])}n.children(":not(script)").css(g,n[g]()).each(function(e,t){t.style[y]=Math.floor(d)+"px",d+=t[b]}),t._detachEvents(),t._attachEvents(),t.trigger(v)},toggle:function(e,t){var n=this,r;e=n.element.find(e),r=e.data(w);if(!t&&!r.collapsible)return;arguments.length==1&&(t=r.collapsed===undefined?!1:r.collapsed),r.collapsed=!t,r.collapsed?e.css("overflow","hidden"):e.css("overflow",""),n.trigger(d)},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var r=this;return n
.length&&(r.options.panes.splice(t,0,e),r._initPane(n,e),r._removeSplitBars(),r.trigger(d)),n},append:function(t){t=t||{};var n=this,r=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,r)},insertBefore:function(t,n){n=e(n),t=t||{};var r=this,i=n.index(".k-pane"),s=e("<div />").insertBefore(e(n));return r._addPane(t,i,s)},insertAfter:function(t,n){n=e(n),t=t||{};var r=this,i=n.index(".k-pane"),s=e("<div />").insertAfter(e(n));return r._addPane(t,i+1,s)},remove:function(n){n=e(n);var r=this;return n.length&&(t.destroy(n),n.each(function(t,n){r.options.panes.splice(e(n).index
(".k-pane"),1),e(n).remove()}),r._removeSplitBars(),r.options.panes.length&&r.trigger(d)),r},size:L("size",!0),min:L("min"),max:L("max")});n.plugin(A);var O={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},M={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};_.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||
this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy()},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),i=r.prev(),s=r.next(),o=i.data(w),u=s.data(w),a=parseInt(i[0].style[n.positioningProperty],10),f=parseInt(s[0].style[n.positioningProperty],10)+s[0][n.
sizingDomProperty]-r[0][n.sizingDomProperty],l=parseInt(n._element.css(n.sizingProperty),10),c=function(e){var t=parseInt(e,10);return(C(e)?t:l*t/100)||0},h=c(o.min),p=c(o.max)||f-a,d=c(u.min),v=c(u.max)||f-a;n.previousPane=i,n.nextPane=s,n._maxPosition=Math.min(f-d,a+p),n._minPosition=Math.max(a+h,f-v)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(n){var r=this,i=e(n.currentTarget),s=r.owner;s._panes().children(".k-splitter-overlay").remove();if(n.keyCode!==t.keys.ESC){var o=n.position,u=i.prev(),a=i.next(),f=u.data(w),l=a.data(w),c=o-parseInt
(u[0].style[r.positioningProperty],10),h=parseInt(a[0].style[r.positioningProperty],10)+a[0][r.sizingDomProperty]-o-i[0][r.sizingDomProperty],p=r._element.children(T).filter(function(){return k(e(this).data(w).size)}).length;if(!k(f.size)||p>1)k(f.size)&&p--,f.size=c+"px";if(!k(l.size)||p>1)l.size=h+"px";s._resizeHandler()}return!1}}});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/baseRow",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t,n){this.defaults=
{selectable:!1},e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(){var e="unknown";try{e=this.get("record").type.toLowerCase()}catch(t){}this.set("recordType",e)},t}(r.Model);t.BaseRow=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/chapterTitle",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType"
,"chaptertitle")},t}(r.BaseRow);t.ChapterTitle=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/codeEntry",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("selectable",!0),this.set("recordType","codeentry")},t}(r.BaseRow);t.CodeEntry=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype
,e.prototype=new n};define("controls/codebooks/models/tabular/codingTipLine",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","codingtipline")},t}(r.BaseRow);t.CodingTipLine=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/codingTipTitle",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,
n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","codingtiptitle")},t}(r.BaseRow);t.CodingTipTitle=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/customLine",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=this.get("record");this.set("selectable"
,!0),this.set("recordType","customline"),this.set("hasCodes",typeof t.regular_row_codes!="undefined"&&t.regular_row_codes.length>0)},t}(r.BaseRow);t.CustomLine=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/instructionalNote",["require","exports","underscore","controls/codebooks/models/tabular/baseRow"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t="",n="";this.set("recordType","instructionalnote"
);try{t=i.find(this.get("record").codes,function(e){return e.startcode}).startcode}catch(r){}try{n=i.find(this.get("record").codes,function(e){return e.endcode}).endcode}catch(r){}this.set("startCode",t),this.set("endCode",n)},t}(s.BaseRow);t.InstructionalNote=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/letter",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype
.initialize=function(e){this.set("recordType","letter")},t}(r.BaseRow);t.Letter=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/mainEntry",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("selectable",!0),this.set("recordType","mainentry")},t}(r.BaseRow);t.MainEntry=i});var __extends=this.__extends||function(e,t){function n(){this
.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/mainEntrySelectable",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=!1;try{this.get("data_book").indexOf("ICD10")!==-1&&this.get("record").codes[0].startcode.replace(".","").length===7&&(t=!0)}catch(n){}this.set("sevenCharCode",t),this.set("selectable",!0),this.set("recordType","mainentryselectable")},t}(r.BaseRow);t.MainEntrySelectable=i});var __extends=
this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/orderedListItem",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","orderedlistitem")},t}(r.BaseRow);t.OrderedListItem=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/regular"
,["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=!1,n=this.get("record");try{t=this.get("data_book").toUpperCase().indexOf("_INDEX")!==-1}catch(r){}this.set("selectable",t),this.set("recordType","regular"),this.set("hasCodes",typeof n.regular_row_codes!="undefined"&&n.regular_row_codes.length>0)},t}(r.BaseRow);t.Regular=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define
("controls/codebooks/models/tabular/section",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","section")},t}(r.BaseRow);t.Section=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/sectionLine",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call
(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","sectionline")},t}(r.BaseRow);t.SectionLine=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/sectionTitle",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("recordType","sectiontitle")},t}(r.BaseRow);t.SectionTitle=i});var __extends=this.__extends||
function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/tableRow",["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("selectable",!0),this.set("recordType","tablerow")},t}(r.BaseRow);t.TableRow=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/tableRowChannelPublishing"
,["require","exports","controls/codebooks/models/tabular/baseRow"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("selectable",!0),this.set("recordType","tablerowchannelpublishing")},t}(r.BaseRow);t.TableRowChannelPublishing=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabular/rowCollection",["require","exports","Backbone","controls/codebooks/models/tabular/baseRow","controls/codebooks/models/tabular/chapterTitle"
,"controls/codebooks/models/tabular/codeEntry","controls/codebooks/models/tabular/codingTipLine","controls/codebooks/models/tabular/codingTipTitle","controls/codebooks/models/tabular/customLine","controls/codebooks/models/tabular/instructionalNote","controls/codebooks/models/tabular/letter","controls/codebooks/models/tabular/mainEntry","controls/codebooks/models/tabular/mainEntrySelectable","controls/codebooks/models/tabular/orderedListItem","controls/codebooks/models/tabular/regular","controls/codebooks/models/tabular/section","controls/codebooks/models/tabular/sectionLine","controls/codebooks/models/tabular/sectionTitle"
,"controls/codebooks/models/tabular/tableRow","controls/codebooks/models/tabular/tableRowChannelPublishing"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=n,E=r,S=i,x=s,T=o,N=u,C=a,k=f,L=l,A=c,O=h,M=p,_=d,D=v,P=m,H=g,B=y,j=b,F=function(e){function t(){e.apply(this,arguments),this.model=function(e,t){var n="regular",r={regular:_.Regular,chaptertitle:S.ChapterTitle,codeentry:x.CodeEntry,codingtipline:T.CodingTipLine,codingtiptitle:N.CodingTipTitle,customline:C.CustomLine,instructionalnote:k.InstructionalNote,letter:L.Letter,mainentry:A.MainEntry,mainentryselectable:O.MainEntrySelectable
,orderedlistitem:M.OrderedListItem,section:D.Section,sectionline:P.SectionLine,sectiontitle:H.SectionTitle,tablerow:B.TableRow,tablerowchannelpublishing:j.TableRowChannelPublishing,unknown:E.BaseRow},i;return e.record&&e.record.type&&(n=e.record.type),i=r[n]||r.unknown,new i(e,t)}}return __extends(t,e),t}(w.Collection);t.RowCollection=F});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/baseSection",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t,n)
{var r=typeof t.research_type=="string"?t.research_type.toUpperCase():"baseSection",i=t.best_count+t.other_count||0;this.defaults={sectionType:r,itemCount:i},e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){this.set("items",this.get("articles")||[]),this.unset("articles"),this.set("hasMore",this.hasMore())},t.prototype.hasMore=function(){try{return this.get("itemCount")>this.get("items").length}catch(e){return!1}},t}(r.Model);t.BaseSection=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/codersDeskReference"
,["require","exports","underscore","controls/research/models/research/baseSection"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=this.get("cdr_entries")||[],n;if(t.length>1){n=i.groupBy(t,"title"),t=[];for(var r in n)t.push(n[r][0])}this.set("items",t),this.set("itemCount",t.length),this.unset("cdr_entries"),this.set("hasMore",!1)},t}(s.BaseSection);t.CodersDeskReference=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/codingAdvice"
,["require","exports","controls/research/models/research/baseSection"],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=this.get("coding_advices")||[];this.set("items",t),this.set("itemCount",t.length),this.unset("coding_advices"),this.set("hasMore",!1)},t}(r.BaseSection);t.CodingAdvice=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/crosswalk",["require","exports","controls/research/models/research/baseSection"
],function(e,t,n){var r=n,i=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(e){var t=this.get("crosswalk_entries")||[];this.set("items",t),this.set("itemCount",t.length),this.unset("crosswalk_entries"),this.set("hasMore",this.hasMore())},t.prototype.hasMore=function(){try{return this.get("best_count")+this.get("other_count")>this.get("items").length}catch(e){return!1}},t}(r.BaseSection);t.Crosswalk=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/sectionCollection"
,["require","exports","Backbone","controls/research/models/research/baseSection","controls/research/models/research/codersDeskReference","controls/research/models/research/codingAdvice","controls/research/models/research/crosswalk"],function(e,t,n,r,i,s,o){var u=n,a=r,f=i,l=s,c=o,h=function(e){function t(){e.apply(this,arguments),this.model=function(e,t){var n="regular",r={CDR:f.CodersDeskReference,CODING_ADVICE:l.CodingAdvice,CROSSWALK:c.Crosswalk,ANESTHESIA_CROSSWALK:c.Crosswalk,UNKNOWN:a.BaseSection},i;return typeof e.research_type=="string"&&(n=e.research_type.toUpperCase()),i=r[n]||r.UNKNOWN
,new i(e,t)}}return __extends(t,e),t}(u.Collection);t.SectionCollection=h});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/tabularViewModel",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults=function(){return{history:[],pcsSections:{columns:null},pcsCodeBuilder:[]}},e.call(this,t)}return __extends(t,e),t}(r.Model);t.TabularViewModel=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new 
n};define("controls/codebooks/views/tabular",["require","exports","Backbone","underscore","vendor/underscore/plugins/underscore.string","jql","vendor/jquery/plugins/jquery.scrollTo","vendor/jquery/plugins/jquery.imagesloaded","text!controls/codebooks/templates/tabular/tabular.html","text!controls/codebooks/templates/tabular/cpt.html","text!controls/codebooks/templates/tabular/hcpcs.html","text!controls/codebooks/templates/tabular/crosswalk.html","text!controls/codebooks/templates/tabular/pcs-wrapper.html","text!controls/codebooks/templates/tabular/pcs-column-head.html","text!controls/codebooks/templates/tabular/pcs-column-choices.html"
,"text!controls/codebooks/templates/tabular/index.html","text!controls/codebooks/templates/tabular/wrapper.html","text!controls/codebooks/templates/tableHeadings/drug-ICD9.html","text!controls/codebooks/templates/tableHeadings/drug-ICD10.html","text!controls/codebooks/templates/tableHeadings/hypertension.html","text!controls/codebooks/templates/tableHeadings/neoplasm.html","text!controls/codebooks/templates/instructional-note.html","text!controls/codebooks/templates/modifiers.html","text!controls/codebooks/templates/tabular/cpt-image-modal.html","text!controls/common/templates/loading-large.html"
,"lib/api","lib/dom","lib/config","lib/templates","lib/modal","lib/net","lib/events","lib/shortcuts","kendoui/kendo.core","kendoui/kendo.splitter","controls/codebooks/models/tabular/rowCollection","controls/research/models/research/sectionCollection","controls/codebooks/models/tabularViewModel","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F){var I=n,q=r,R=i,U=s,z=o,W=u,X=a,V=f,$=l,J=c,K=h,Q=p,G=d,Y=v,Z=m,et=g,tt=y,nt=b,rt=w,it=E,st=S,ot=x,ut=T,at=N,ft=C,lt=k,ct=L,ht=A,pt=O,dt=M,vt=_,mt=D,gt=P,yt=H,bt=B,wt=j,Et=F,St={PCS:"PCS",NORMAL
:"NORMAL"},xt=function(e){function t(t){z||!z,W||!W,R||!R,mt||!mt,gt||!gt,this.hub=t.hub,this.$heading=t.$heading,this.$content=t.$content,this.scrollSampleRate=100,this.loadMoreThreshold=30,this.cachedSector="",this.reachedBottom=!1,this.reachedTop=!1,this.currentlyLoadingMore=!1,this.shouldAppend=!1,this.contentSelector=".pane-content",this.displayType="",this.tabularyHistorySelector=".tabular-history",this.historyIndex=0,this.modalSelector="#"+at.TC.current().settings.modalId,this.scrollDuration=at.TC.current().settings.effects?300:0,this.pairedCodeInContext=[],this.codesToPost=[],this.debugInfiniteScroll=!1
,this.mode=St.NORMAL,this.pcsHeaders=[],this.listenForPCSResize=!0,this.isPCSMovedRight=!1,this.sharedProperties=t.sharedProperties,this.isShowingNoResults=!1,this.hideResearch=t.hideResearch,this.targetDate=t.targetDate||"",this.model=new wt.TabularViewModel,this.history=this.model.get("history"),this.templateWrapper=ct.compile(ct.tk_tabularWrapper,Z),this.templateIndex=ct.compile(ct.tk_tabularIndex,Y),this.templateTabular=ct.compile(ct.tk_tabularTabular,X),this.templateTabularCrosswalk=ct.compile(ct.tk_tabularTabularCrosswalk,J),this.templateTabularCPT=ct.compile(ct.tk_tabularTabularCPT,V),this
.templateTabularHCPCS=ct.compile(ct.tk_tabularTabularHCPCS,$),this.templateTabularPCSWrapper=ct.compile(ct.tk_tabularPCSWrapper,K),this.templateTabularPCSColumnHead=ct.compile(ct.tk_tabularPCSColumnHead,Q),this.templateTabularPCSColumnChoices=ct.compile(ct.tk_tabularPCSColumnChoices,G),this.templateDrug9Heading=ct.get(ct.tk_drugHeading,et),this.templateDrug10Heading=ct.get(ct.tk_drugHeading,tt),this.templateHypertensionHeading=ct.get(ct.tk_hypertensionHeading,nt),this.templateNeoplasmHeading=ct.get(ct.tk_neoplasmHeading,rt),this.templateInstructionalNote=ct.compile(ct.tk_instructionalNote,it),this
.templateLoading=ct.get(ct.tk_loadingLarge,ut),this.templateModifiers=ct.compile(ct.tk_modifiers,st),this.templateCPTModal=ct.compile(ct.tk_cptImageModal,ot),this.events={"keypress .pcsHelper":"pcsKeypressHandler","keydown .pcsHelper":"pcsKeydownHandler","click .pcs":"pcsClick","click .pcs-column-choices div div":"selectPCSItem","click .pcs-column-choices div div .icon-enter":"selectPCSItem","click .pcs-column-head .icon-left-small":"movePCSClick","click .pcs-column-head .icon-right-small":"movePCSClick",click:"tcSetFocus","click .tabular-result":"selectItem","click .tabular-result .code":"selectItem"
,"click .tabular-result .seeAlsoLink":"selectItem","click .tabular-history":"navigateHistory","click .img-icon":"showImage","click .inote-icon":"getInstructionalNotes","click .toggle-seven":"toggleSeventhCharCodeDisplay","mouseenter .bracketed":"bracketedAlsoHighlightsPrimaryCode","mouseleave .bracketed":"bracketedAlsoHighlightsPrimaryCodeStop","click a.modifier":"modifierClick"},this.scopeName="codebooks:tabular",this.shortcuts={"up codebooks:tabular":"moveArrow","down codebooks:tabular":"moveArrow","left codebooks:tabular":"moveArrow","right codebooks:tabular":"moveArrow","enter codebooks:tabular"
:"handleEnter"},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),at.TC.current().settings.keyboardShortcuts&&(U.extend(this,vt.Get()),this.delegateShortcuts()),q.bindAll(this),this.throttleFunc=q.throttle(this.loadMore,this.scrollSampleRate),this.listenTo(this.model,"change:history",this.setHistoryButtons),this.listenTo(this.hub,dt.CodeBooksFocusTabular,this.tcSetFocus),this.listenTo(this.hub,dt.CodeBooksSearch,this.clear),this.listenTo(this.hub,dt.CodeBooksClear,this.clearWithoutLoading),this.listenTo(this.hub,dt.CodeBooksGetTabular,this.search),this.listenTo
(this.hub,dt.ResearchCodeSelected,this.searchByCodeSelected),this.listenTo(this.hub,dt.CodeBooksSearchComplete,this.findSequence),this.listenTo(this.hub,dt.CodeBooksSearchNoResults,this.onNoSearchResults),this.listenTo(this.hub,dt.CodeBooksGetCrosswalk,this.getCrosswalk),this.listenTo(this.hub,dt.CodeBooksCodePosted,this.clearPostedCodes),this.listenTo(this.hub,dt.CodeBooksSearch,this.clearPostedCodes),this.listenTo(this.hub,dt.CodeBooksSearch,this.onSearch),this.listenTo(this.hub,dt.CodeBooksSetCodePair,this.setPairedCode),this.listenTo(this.hub,dt.CodeBooksChangeBookdate,this.onUpdateTargetDate
),this.listenTo(this.hub,dt.CodeBooksResizeBottom,this.resizePCSColumns),this.listenTo(this.hub,dt.CodeBooksGetICD10PCSTableData,this.getPCSCodeTableData),this.listenTo(this.hub,dt.CodeBooksListModifiers,this.getModifiers)},t.prototype.onUpdateTargetDate=function(e){this.targetDate=e.bookdate},t.prototype.navigateHistory=function(e){var t=U(e.currentTarget),n;t.hasClass("disabled")||(t.hasClass("tabular-back")?this.historyIndex>0&&!this.isShowingNoResults&&this.historyIndex--:this.historyIndex<this.history.length-1&&this.historyIndex++,n=this.history[this.historyIndex],n.isHistoryEvent=!0,n.isPCS?
this.hub.trigger(dt.CodeBooksGetICD10PCSTableData,n):n.code?this.hub.trigger(dt.CodeBooksGetCrosswalk,n):this.hub.trigger(dt.CodeBooksGetTabular,n))},t.prototype.addHistory=function(e,t){var n=U.extend({},{sequence:null,code:null,isPCS:!1,date:null},e),r={sequence:n.sequence,book:n.book||n.code_type,code:n.code,isPCS:n.isPCS,date:n.date||this.targetDate},i=!1;typeof t=="string"?this.history.length>0&&(i=!0):this.historyIndex<this.history.length-1?(this.history=this.history.slice(0,this.historyIndex+1),i=!0):this.history.length>=0&&(i=!0),i&&(q.isEqual(this.history[this.historyIndex],r)===!1&&this
.history.push(r),this.historyIndex=this.history.length-1),this.model.trigger("change:history")},t.prototype.setHistoryButtons=function(){this.historyIndex>0?this.$heading.find(".tabular-back").removeClass("disabled k-state-disabled"):this.$heading.find(".tabular-back").addClass("disabled k-state-disabled"),this.historyIndex<this.history.length-1?this.$heading.find(".tabular-forward").removeClass("disabled k-state-disabled"):this.$heading.find(".tabular-forward").addClass("disabled k-state-disabled")},t.prototype.pushSelectedItemToHistory=function(){var e=this.getSelectionDetails();e&&this.addHistory
(e,"last")},t.prototype.getSelectionDetails=function(){var e=this.$content.find(".item-selected"),t=null,n,r,i;if(e.hasClass("tabular-crosswalk-result"))return null;if(e.length===1){t=e.attr("data-sequence");if(t===null||t===undefined)n=e.attr("id"),t=typeof n=="string"?n.replace("tabular-",""):"";return r=e.attr("data-book"),i=e.attr("data-date"),{sequence:t,book:r,date:i}}return null},t.prototype.onSearch=function(e){this.isShowingNoResults=!1},t.prototype.onNoSearchResults=function(){this.clearWithoutLoading(),this.isShowingNoResults=!0,this.setHistoryButtons()},t.prototype.searchByCodeSelected=
function(e){var t;e.pane==="research"&&(t={book:e.codeType,term:e.code},this.hub.trigger(dt.CodeBooksGetTabular,t))},t.prototype.search=function(e){var t,n,r=typeof e.isHistoryEvent!="undefined"&&e.isHistoryEvent;this.mode!==St.NORMAL&&(this.mode===St.PCS&&this.cleanupPCSColumns(),this.mode=St.NORMAL),this.cachedBook=e.book,this.shouldAppend=typeof e.append!="undefined"&&e.append,this.setLoading(!0),this.isShowingNoResults=!1,e.sequence?(this.cachedSequence=e.sequence,this.cachedSector=e.sector,t={sequence:e.sequence,book:e.book,sector:e.sector,records:e.records,date:e.date},pt.Net.tryAbort(this
.currentReq),this.currentReq=at.TC.current()._net.codebooksGetDetail(t,this.render,this.handleError),!this.shouldAppend&&!r&&this.addHistory(t)):(this.cachedTerm=e.term,n={book:e.book,term:e.term},e.options&&(n.options=e.options),this.targetDate.length&&(n.date=this.targetDate),pt.Net.tryAbort(this.currentReq),this.currentReq=at.TC.current()._net.codebooksSearch(n,this.proxySearchResults,this.handleError))},t.prototype.proxySearchResults=function(e){var t={isSilent:!0,term:this.cachedTerm};this.hub.trigger(dt.CodeBooksSearchResultProxy,e,t)},t.prototype.findSequence=function(e){var t,n=e.records
.length>0,r,i;n&&!e.isSilent&&(n=e.type==="Code"),n&&(r=e.records.first(),t={sequence:r.get("data_sequence"),book:r.get("data_book"),term:e.term,date:r.get("data_date")},this.hub.trigger(dt.CodeBooksGetTabular,t))},t.prototype.clearPostedCodes=function(e){this.pairedCodeInContext=[],this.codesToPost=[]},t.prototype.bracketedAlsoHighlightsPrimaryCode=function(e){var t=U(e.currentTarget);t.parent().find(".code-active").removeClass("code-active"),t.addClass("code-active").parent().find(".primary-code:first").addClass("code-active")},t.prototype.bracketedAlsoHighlightsPrimaryCodeStop=function(e){var t=
U(e.currentTarget);t.parent().find(".code-active").removeClass("code-active")},t.prototype.setPairedCode=function(e){this.pairedCodeInContext=[e.primaryCode,e.secondaryCode]},t.prototype.moveArrowNormal=function(e){var t=this.$content.find(".item-selected"),n=t.find(".code:focus"),r=!1,i=!1,s="center";t.find(".code-active").removeClass("code-active");switch(e.key){case"up":r=!0,s="top",t=t.prevAll(".selectable:first");break;case"down":r=!0,s="bottom",t=t.nextAll(".selectable:first");break;case"left":t.hasClass("seven-char-parent")?t.find(".k-minus").click():(i=!0,n.length===1&&(n=n.prevAll(".code:first"
),n.hasClass("bracketed")&&t.find(".primary-code:first").addClass("code-active")));break;case"right":t.hasClass("seven-char-parent")?t.find(".k-plus").click():(i=!0,n.length===0?n=t.find(".code:first"):n=n.nextAll(".code:first"),n.hasClass("bracketed")&&t.find(".primary-code:first").addClass("code-active"));break;default:}r&&t.length===1&&this.focusEntry(t,!1,s),i&&n.length===1&&ft.focusWithoutWindowScroll(n)},t.prototype.selectPCSItem=function(e){var t=this,n=U(e.currentTarget),r=n.closest(".pcs-column"),i=n.closest(".pcs-inner").find(".pcs-column"),s=parseInt(r.attr("data-col"),10),o=this.model
.get("pcsCodeBuilder").slice(0,s-1),u=s===1,a=!1,f;if(u||!n.hasClass("spacer"))u?(a=!0,n=n.closest("div"),o=n.find("a").text(),e.stopPropagation(),f={code:[o]},o.length&&this.hub.trigger(dt.CodeBooksGetICD10PCSTableData,f)):o.push(n.find("a").text());this.$(".pcs-column.active").toggleClass("active inactive"),r.toggleClass("active inactive").find(".item-selected").removeClass("item-selected").removeAttr("aria-selected").addClass("not-selected"),n.addClass("item-selected").attr("aria-selected","true").removeClass("not-selected"),i.each(function(e,r){return e>s&&U(r).find(".pcs-column-choices div div"
).remove(),s===1&&e===s&&(n.find("span").text()===t.pcsData.section_title?U(r).find(".pcs-column-choices > div > *").show():U(r).find(".pcs-column-choices > div > *").hide()),this}),a||this.updatePCSCodeBuilder(o,!1,!0,!1),this.focusPCSHelper()},t.prototype.moveArrowPCS=function(e){var t=this.$(".pcs-column.active"),n=t.find(".k-state-focused").length>0?t.find(".k-state-focused"):t.find(".item-selected"),r=parseInt(t.attr("data-col"),10),i=this.model.get("pcsCodeBuilder").slice(0),s=!1,o,u=null,a=!1,f,l,c,h,p,d,v,m={codes:[]},g;e.keyHelper&&(d=String.fromCharCode(e.keyHelper).toUpperCase(),h=t.
find(".pcs-column-choices div div"),h.each(function(t,s){var o=U(s);o.find("a").text()===d&&(n.removeClass("item-selected").removeAttr("aria-selected").addClass("not-selected"),ft.focusWithoutWindowScroll(o.addClass("item-selected").attr("aria-selected","true").removeClass("not-selected").find("a")),i[r-1]=o.find("a").text(),e.key="hotkey")}));switch(e.key){case"up":h=h||t.find(".pcs-column-choices div div"),o=r<7,h.index(n)>0?(r===1?(f=n.removeClass("k-state-focused").addClass("not-selected").prev(),v=ft.focusWithoutWindowScroll(f.addClass("k-state-focused").removeClass("not-selected").find("a"
))):(f=n.removeClass("item-selected").removeAttr("aria-selected").addClass("not-selected").prev(),v=ft.focusWithoutWindowScroll(f.addClass("item-selected").attr("aria-selected","true").removeClass("not-selected").find("a"))),v.length===0?(o=!1,i.pop(),n.closest(".pcs-column-choices").scrollTo(0)):i[r-1]=v.text()):a=!0;break;case"down":h=h||t.find(".pcs-column-choices div div"),o=r<7,h.index(n)<h.length-1?r===1?(f=n.removeClass("k-state-focused").addClass("not-selected").next(),i[r-1]=ft.focusWithoutWindowScroll(f.addClass("k-state-focused").removeClass("not-selected").find("a")).text()):(f=n.removeClass
("item-selected").removeAttr("aria-selected").addClass("not-selected").next(),i[r-1]=ft.focusWithoutWindowScroll(f.addClass("item-selected").attr("aria-selected","true").removeClass("not-selected").find("a")).text()):a=!0;break;case"backspace":case"left":r>1?(o=!0,c=t.closest(".pcs-inner").find(".pcs-column"),t.toggleClass("active inactive").find(".item-selected").removeClass("item-selected").addClass("not-selected"),c.eq(r-2).toggleClass("active inactive"),r<=6&&c.eq(r).find(".pcs-column-choices div div").remove(),i.length===r&&i.pop()):a=!0;break;case"enter":case"right":r<7&&!n.hasClass("spacer"
)?(s=!0,c=t.closest(".pcs-inner").find(".pcs-column"),t.toggleClass("active inactive"),h=c.eq(r).toggleClass("active inactive").find(".pcs-column-choices div div"),h.filter(".item-selected").removeClass("item-selected").removeAttr("aria-selected").addClass("not-selected"),h.length===2?(v=h.eq(1).addClass("item-selected").attr("aria-selected","true").removeClass("not-selected"),i.push(v.find("a").text())):h.eq(0).addClass("item-selected").attr("aria-selected","true").removeClass("not-selected"),r===1&&(v=t.find(".k-state-focused"),v.length&&(t.find(".item-selected").removeClass("item-selected").
removeAttr("aria-selected").addClass("not-selected"),v.removeClass("k-state-focused").addClass("item-selected").attr("aria-selected","true")),v=t.find(".item-selected a").text(),v&&(i=[v]))):(a=!0,e.key==="enter"&&(g={code:i,codeType:"ICD10PCS_PR"},m.codes=[g],this.hub.trigger(dt.CodeBooksCodePosted,m)));break;case"hotkey":s=r!==1;break;default:a=!0}r===1&&(a=!0,s?(l={code:i},this.hub.trigger(dt.CodeBooksGetICD10PCSTableData,l)):f&&f.find("span").text()===this.pcsData.section_title?t.closest(".pcs-inner").find(".pcs-column").eq(1).find(".pcs-column-choices > div div").show():t.closest(".pcs-inner"
).find(".pcs-column").eq(1).find(".pcs-column-choices > div div").hide()),a||this.updatePCSCodeBuilder(i,o,s,!0),this.focusPCSHelper()},t.prototype.moveArrow=function(e,t){U.event.fix(e).preventDefault();switch(this.mode){case St.NORMAL:this.moveArrowNormal(t);break;default:}},t.prototype.pcsKeypressHandler=function(e){this.mode===St.PCS&&(e.which>=48&&e.which<=90||e.which>=97&&e.which<=122)&&!e.altKey&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),this.moveArrowPCS({keyHelper:e.which}))},t.prototype.pcsKeydownHandler=function(e){var t={8:"backspace",13:"enter",37:"left",38:"up",39:"right",40:"down"
};this.mode===St.PCS&&t[e.which]&&!e.altKey&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),this.moveArrowPCS({key:t[e.which]}))},t.prototype.selectItem=function(e){var t=this,n=U(e.currentTarget),r=n.hasClass("code"),i=n.hasClass("seeAlsoLink"),s=n,o=!1,u=!1,a=!1,f={codes:[]},l=s.hasClass("trimmed"),c=s.attr("data-code-type"),h=s.attr("data-ref-options")||"Ref",p=!1,d,v,m,g,y,b,w,E,S,x,T;r||i?(n=n.closest(".tabular-result"),a=i||n.hasClass("type-instructionalnote")||n.hasClass("type-codeentryline")||n.hasClass("tabular-crosswalk-result")||n.hasClass("type-sectionline")||n.hasClass("tabular-table"
),v=s.hasClass("primary-code"),y=v||a||i?s.text():n.find(".primary-code:first").text(),y=y.replace(/\-$/g,""),d=n.find(".bracketed"),u=d.length>0,u&&(n.hasClass("type-tablerowchannelpublishing")||n.hasClass("type-tablerow")?s.hasClass("bracketed")&&(y=s.attr("data-paired-code"),this.pairedCodeInContext=[y,s.text().replace(/\-$/g,"")]):this.pairedCodeInContext=[y,d.text().replace(/\-$/g,"")]),g=n.find(".default-target:first"),g.hasClass("code")&&(o=!0),e.stopPropagation()):(g=n.find(".default-target:first"),g.hasClass("code")&&(o=!0,y=g.text(),y=y.replace(/\-$/g,""))),m=n.hasClass("selectable"),
b=n.attr("data-book"),c=c||b.replace("_TABULAR","").replace("_INDEX",""),T=n.attr("data-date"),m&&this.hub.trigger(dt.ResearchClear,{book:c}),b.indexOf("_TABULAR")!==-1&&o&&m&&(S={book:c,code:y},this.hub.trigger(dt.ResearchCodeInContext,S)),m&&this.focusEntry(n,!0),(r||i)&&!l&&y&&c&&(this.displayType!=="tabular"||v===!1)?c.indexOf("ICD10PCS")!==-1&&r?(E={code:y},this.hub.trigger(dt.CodeBooksGetICD10PCSTableData,E)):(this.pushSelectedItemToHistory(),w={term:y,book:c,options:h,date:T},this.hub.trigger(dt.CodeBooksGetTabular,w)):r&&y&&this.displayType==="tabular"&&(n.hasClass("type-mainentry")&&(p=!0
),p||(this.pairedCodeInContext.length>0?this.codesToPost.length===0?y.slice(0,this.pairedCodeInContext[0].length)===this.pairedCodeInContext[0]?(this.codesToPost.push({code:y,codeType:c}),w={term:this.pairedCodeInContext[1],book:c,options:h,date:T},this.hub.trigger(dt.CodeBooksGetTabular,w)):ht.confirm({title:"Are you sure?",htmlContent:"<p>You selected an Index entry with code <strong>"+this.pairedCodeInContext[0]+"</strong>, but selected <strong>"+y+"</strong> from the Tabular.  If you post this code, the paired code <strong>"+this.pairedCodeInContext[1]+"</strong> will not be posted.</p>",confirm
:function(){x={code:y,codeType:c},f.codes=[x],t.hub.trigger(dt.CodeBooksCodePosted,f)}}):y.slice(0,this.pairedCodeInContext[1].length)===this.pairedCodeInContext[1]?(this.codesToPost.push({code:y,codeType:c}),f.codes=this.codesToPost,this.hub.trigger(dt.CodeBooksCodePosted,f)):ht.confirm({title:"Are you sure?",htmlContent:"<p>You selected an Index entry with paired-code <strong>"+this.pairedCodeInContext[1]+"</strong>, but selected <strong>"+y+"</strong> from the Tabular.  This may be inconsistent with the other codes in the encounter.</p>",confirm:function(){t.codesToPost.push({code:y,codeType
:c}),f.codes=t.codesToPost,t.hub.trigger(dt.CodeBooksCodePosted,f)}}):(x={code:y,codeType:c},f.codes=[x],this.hub.trigger(dt.CodeBooksCodePosted,f))))},t.prototype.handleEnter=function(e,t){switch(this.mode){case St.NORMAL:var n=U(document.activeElement);n.closest(".trucode").length&&!n.hasClass("code")&&(U.event.fix(e).preventDefault(),this.$content.find(".item-selected").find(".default-target:first,.seeAlsoLink:first").click());break;case St.PCS:this.moveArrow.apply(this,arguments);break;default:}},t.prototype.handleKeyUp=function(e){if(this.mode===St.NORMAL&&(e.which===38||e.which===40)){var t=
this.$content.find(".item-selected");t.length&&t.click()}},t.prototype.showTableHeadings=function(e){var t=e.find(".table-wrapper"),n;if(t.length>0&&t.find(".code").length>0){var r={"drugs-chemicals":this.templateDrug9Heading,"drugs-chemicals-icd10":this.templateDrug10Heading,hypertension:this.templateHypertensionHeading,neoplasm:this.templateNeoplasmHeading};n=t.attr("data-table-type"),n==="drugs-chemicals"&&this.cachedBook.indexOf("ICD10")!==-1&&(n="drugs-chemicals-icd10");if(r[n]){var i=r[n];e.before(i)}}},t.prototype.showImage=function(e){e.stopPropagation();var t=U(e.currentTarget),n=lt.imageCdnPath
()+t.attr("data-image-name"),r=U('<img src="'+n+'" />'),i=t.attr("title"),s=t.attr("data-image-caption"),o=this.templateCPTModal({imgPath:n,title:i,caption:s});r.imagesLoaded({progress:function(e,t,n,r){ht.show({title:"Images",htmlContent:"<p>Loading...</p>",close:this.tcSetFocus,open:this.tcClearFocus})},done:function(e){ht.show({title:"Images",htmlContent:o,close:this.tcSetFocus,open:this.tcClearFocus})},fail:function(){ht.show({title:"Problem loading image",htmlContent:"<p>There was a problem loading this image.</p>",close:this.tcSetFocus,open:this.tcClearFocus})}})},t.prototype.focusEntry=function(
e,t,n){var r=this.$content.find(".pane-content"),i,s,o=!1,u;e.attr("aria-selected","true").addClass("item-selected").siblings(".item-selected").removeAttr("aria-selected").removeClass("item-selected").each(function(e,t){var n=U(this);return n.hasClass("seven-char")&&(n.find(".full,.trimmed").toggleClass("invisible"),n.find(".full").insertBefore(n.find(".trimmed"))),this}),this.$content.find("#column-labels").remove();if(!t){i={duration:0};switch(n){case"center":o=!0,i.offset=-1*(this.contentHeight/2);break;case"bottom":r.scrollTop()-e[0].offsetTop+this.contentHeight-10<0&&(o=!0,i.offset=-1*(this
.contentHeight-e.height()));break;default:e[0].offsetTop-r.scrollTop()<0&&(o=!0)}o&&r.stop().scrollTo(e,i),r.imagesLoaded({progress:function(e,t,n,r){},done:function(t){o&&r.stop().scrollTo(e,i)}})}this.showTableHeadings(e),e.hasClass("seven-char")&&(u=e.find(".full").removeClass("invisible"),u.next(".trimmed").addClass("invisible").insertBefore(u)),this.hasFocus()&&this.focusCode(e),this.$heading.find(".context").html(e.find(".short-text").html())},t.prototype.getFocusElement=function(){return this.$content},t.prototype.hasFocus=function(){return this.$content.hasClass(lt.activePaneClass)},t.prototype
.focusCode=function(e){ft.blurAll();var t=e.find(".default-target:first");t.length||(t=e.find(".seeAlsoLink:first").attr("tabindex","0")),ft.focusWithoutWindowScroll(t)},t.prototype.onSetFocus=function(e){this.$content.off(".research"),e.scopeName===this.scopeName&&this.$content.on("keyup.research",this.handleKeyUp),this.mode===St.PCS&&this.focusPCSHelper()},t.prototype.onClearFocus=function(e){this.$content.off(".research")},t.prototype.updatePCSCodeBuilder=function(e,t,n,r,i){var s=this,o=this.model.set("pcsCodeBuilder",e),u=[],a=!1,f,l,c,h,p;i||this.addHistory({code:e.join(""),isPCS:!0},"last"
),e.length>=3&&(p={book:"ICD10PCS_PR",code:e.join("")},this.hub.trigger(dt.ResearchCodeInContext,p)),o.changed.pcsCodeBuilder||(this.model.trigger("change"),this.model.trigger("change:pcsCodeBuilder")),this.renderPCSColumns(e,t,n,r),this.$(".pcs .item-selected span").each(function(t,n){t===2?(f=q.find(s.pcsData.columns[1].choices,function(t){return t.char===e[2]}),f?u.push(f.label+": "+f.definition):u.push(U(n).text())):u.push(U(n).text())}),h={code:e.join(""),headings:this.pcsHeaders,labels:u},this.hub.trigger(dt.CodeBooksPCSCodeChanged,h),!t&&n&&e.length<7&&(c=this.$(".pcs-column.active").find
(".pcs-column-choices div div"),c.length===2&&c.eq(1).click())},t.prototype.pcsClick=function(e){var t=e.currentTarget;this.focusPCSHelper()},t.prototype.focusPCSHelper=function(){ft.focusWithoutWindowScroll(this.$(".pcsHelper"))},t.prototype.setupICD10Toggles=function(){var e=this.cachedBook.toUpperCase(),t=this.$(".seven-char"),n=this.$(".item-selected");e&&e.indexOf("ICD10")!==-1&&t.length&&t.each(function(e,t){var n=U(t),r=parseInt(n.attr("data-level"),10),i=n.prevAll(".type-mainentry:first"),s=parseInt(i.attr("data-level"),10);return r>s&&(i.hasClass("seven-char-parent")||(i.addClass("seven-char-parent"
),i.find(".codes").before('<span title="Toggle display of seventh characters for this code" class="k-icon k-plus toggle-seven"></span>'))),this}),!this.shouldAppend&&n.hasClass("seven-char")&&(n.prevAll(".seven-char-parent:first").find(".k-plus").click(),this.focusEntry(n,!1,"center"))},t.prototype.toggleSeventhCharCodeDisplay=function(e){var t=U(e.currentTarget),n=!1,r;t=t.toggleClass("k-plus k-minus").closest(".tabular-result"),n=!t.next().hasClass("seven-char"),r=n?t.nextUntil(".seven-char").nextUntil(":not(.seven-char)"):r=t.nextUntil(":not(.seven-char)"),r.toggle().toggleClass("selectable"
)},t.prototype.resizePCSColumns=function(e){if(this.mode===St.PCS){this.listenForPCSResize=!1;var t=this.$content.find(".pcs-outer"),n=t.width(),r=(n/4).toString()+"px",i=t.find(".pcs-inner").data("kendoSplitter"),s=t.find(".pcs-pane");t.find(".pcs-inner").width(n*1.75),s.each(function(e,t){i.size(s.eq(e),r)}),this.isPCSMovedRight?this.movePCSRight(!0):this.movePCSLeft(!0),this.listenForPCSResize=!0}},t.prototype.getPCSCodeTableData=function(e){var t=e.code,n=!0,r={};t=typeof t=="object"?t.join("").toUpperCase():t.toUpperCase(),this.tcSetFocus(),this.isShowingNoResults=!1,t.length?this.mode===St
.PCS&&this.model.get("pcsCodeBuilder")[0]===t.charAt(0)&&(n=!1):n=!1,this.mode=St.PCS,this.cachedBook="ICD10PCS_PR",this.$heading.html(this.templateWrapper({book:Et[this.cachedBook]||this.cachedBook,hideResearch:this.hideResearch})),t.length&&(n?(r.code=t,r.isHistoryEvent=e.isHistoryEvent,e.date?r.date=e.date:this.targetDate.length&&(r.date=this.targetDate),this.fetchPCSData(r)):this.updatePCSCodeBuilder(t.split(""),undefined,undefined,undefined,e.isHistoryEvent))},t.prototype.fetchPCSData=function(e){var t,n=this,r=this.$(".pcs-column.active"),i=r.closest(".pcs-inner").find(".pcs-column");t={code
:e.code.charAt(0),date:this.targetDate},pt.Net.tryAbort(this.currentReq),i.eq(1).find(".pane-body").html(this.templateLoading),this.currentReq=at.TC.current()._net.codebooksGetPCSTable(t,function(t){n.handlePCSData(t,e.code.split(""),e.isHistoryEvent)})},t.prototype.handlePCSData=function(e,t,n){var r=this;this.pcsData=e,this.pcsHeaders=["Section"],q.each(e.columns,function(e){r.pcsHeaders.push(e.header)}),this.updatePCSCodeBuilder(t,undefined,undefined,undefined,n)},t.prototype.getFilteredPCSData=function(){var e=U.extend(!0,{},this.pcsData),t=this.model.get("pcsCodeBuilder"),n=t.length;q.each
(e.columns,function(e){e.index>n&&(e.choices=[])});for(var r=0,i=e.columns.length;r<i;r++){var s=e.columns[r].choices.length;for(var o=0;o<s;o++)this.matchAnyPrefix(e.columns[r].choices[o].prefixes)?delete e.columns[r].choices[o].prefixes:delete e.columns[r].choices[o]}return e},t.prototype.matchAnyPrefix=function(e){var t=e.length;for(var n=0;n<t;n++)if(this.matchPrefix(e[n]))return!0;return!1},t.prototype.matchPrefix=function(e){for(var t=0;t<e.length;t++)if(e.charAt(t)!=="*"&&e.charAt(t)!==this.model.get("pcsCodeBuilder")[t])return!1;return!0},t.prototype.renderPCSColumns=function(e,t,n,r){var i=
this.model.previous("pcsCodeBuilder"),s=q.zip(e,i),o=this.$(".pcs-inner"),u=0,a=2,f=e.length,l=this.getFilteredPCSData(),c=this.$(".pcs").length===0,h=!1,p=!1,d,v,m;if(c)o=this.pcsColumnsFirstTimeSetup(e);else{for(;u<f;u++)if(s[u][0]!==s[u][1]){a=u+1,typeof r!="undefined"&&!r&&a++,u===0&&a++;break}u===f&&(n&&u+1===7?a=99:r&&!t&&f===6?a=99:(a=u+1,p=!0))}d=o.find(".pcs-column"),d.each(function(e){e!==6&&d.eq(e).removeClass("active").addClass("inactive")}),(c||e[0]!==i[0])&&this.renderPCSColumn(e,1,d,null,l.section_title);while(a<=7)m=a>=2?l.columns[a-2]:null,this.renderPCSColumn(e,a,d,m,l.section_title
,t),a++;p&&t&&d.eq(u-1).removeClass("inactive").addClass("active"),!t&&e.length===7&&d.eq(6).removeClass("inactive").addClass("active"),this.setHistoryButtons(),c&&(this.$el.data("kendoSplitter").trigger("layoutChange"),this.$el.find(".pcs-inner").data("kendoSplitter").trigger("resize")),f===3?i.length===4?parseInt(this.$(".pcs-column.active").attr("data-col"),10)===4?this.movePCSRight(!0):this.movePCSLeft():n&&this.movePCSRight():f<3?this.movePCSLeft(!0):this.movePCSRight(!0),this.focusPCSHelper(),this.hub.trigger(dt.CodeBooksDetailRenderingComplete)},t.prototype.pcsColumnsFirstTimeSetup=function(
e){var t=this,n=this.templateTabularPCSWrapper({data:this.getFilteredPCSData(),sections:this.sharedProperties.get("pcsSections"),code:e,hideResearch:this.hideResearch}),r=this.$content.find(this.contentSelector).empty().hide(),i,s,o,u;return U(n).insertBefore(r),i=this.$(".pcs-inner"),o=(i.width()/4).toString()+"px",this.disableScrollHandler(),s=i.width(i.closest(".pcs-outer").width()*1.75).kendoSplitter({orientation:"horizontal",panes:[{resizable:!1,size:o},{resizable:!1,size:o},{resizable:!1,size:o},{resizable:!1,size:o},{resizable:!1,size:o},{resizable:!1,size:o},{resizable:!1,size:o}]}).find
(".pcs-column"),u={orientation:"vertical",panes:[{resizable:!1,scrollable:!1,size:"20px"},{resizable:!1}]},s.each(function(e,n){e===s.length-1&&(u.layoutChange=function(e){t.listenForPCSResize&&t.hub.trigger(dt.CodeBooksResizeBottom,e)}),s.eq(e).kendoSplitter(u)}),i},t.prototype.renderPCSColumn=function(e,t,n,r,i,s){ft.focusWithoutWindowScroll(n.eq(t-1).toggleClass(function(n,r,i){return s&&(e.length===t||e.length===7&&t+1===7)?"inactive active":!s&&e.length+1===t?"inactive active":""}).find(".pane-head").html(this.templateTabularPCSColumnHead({colNum:t,sections:this.sharedProperties.get("pcsSections"
),column:r})).end().find(".pane-body").html(this.templateTabularPCSColumnChoices({colNum:t,sections:this.sharedProperties.get("pcsSections"),sectionTitle:i,column:r,code:e})).find(".item-selected a"))},t.prototype.movePCSClick=function(e){U(e.currentTarget).hasClass("icon-left-small")?this.movePCSLeft():this.movePCSRight()},t.prototype.movePCSLeft=function(e){this.$(".pcs-outer").stop().scrollTo(0,{axis:"x",duration:e?0:this.scrollDuration}),this.isPCSMovedRight=!1,this.$(".pcs-column-head.pivot .icon-pivot").removeClass("icon-left-small reverse").addClass("icon-right-small")},t.prototype.movePCSRight=
function(e){this.$(".pcs-outer").stop().scrollTo("max",{axis:"x",duration:e?0:this.scrollDuration}),this.isPCSMovedRight=!0,this.$(".pcs-column-head.pivot .icon-pivot").removeClass("icon-right-small").addClass("icon-left-small reverse")},t.prototype.cleanupPCSColumns=function(){this.pcsData=null,this.pcsHeaders=[],this.model.set({pcsCodeBuilder:[]},{silent:!0}),this.mode=St.NORMAL,this.$content.find(this.contentSelector).show().end().find(".pcs").remove()},t.prototype.render=function(e){if(typeof e=="undefined")this.clear();else{this.cachedBook=e.data_book;var t=(new yt.RowCollection).reset(e.book_view_records
),n=this.cachedBook.toUpperCase(),r,i,s,o;this.setLoading(!1),t.length>0?(n.indexOf("CPT")!==-1?(r=this.templateTabularCPT,this.displayType="tabular"):n.indexOf("HCPCS")!==-1?(r=this.templateTabularHCPCS,this.displayType="tabular"):n.indexOf("_INDEX")!==-1?(r=this.templateIndex,this.displayType="index"):n.indexOf("_TABULAR")!==-1&&(r=this.templateTabular,this.displayType="tabular"),s=r.call(this,{book:this.cachedBook,records:t.toJSON(),imgPath:lt.imageCdnPath()}),i=this.shouldAppend?this.renderAppend:this.renderReplace,i.call(this,s,t),this.setupICD10Toggles(),this.setHistoryButtons(),this.calculatedLoadPoint=
(this.$content.find(".pane-content")[0].scrollHeight-this.contentHeight)/2*(this.loadMoreThreshold/100)):(this.cachedSector==="Up"&&(this.reachedTop=!0),this.cachedSector==="Down"&&(this.reachedBottom=!0),this.currentlyLoadingMore=!1)}return this.hub.trigger(dt.CodeBooksDetailRenderingComplete),this},t.prototype.renderReplace=function(e,t,n){var r;this.$heading.html(this.templateWrapper({book:Et[this.cachedBook]||this.cachedBook,hideResearch:this.hideResearch})),this.$content.find(this.contentSelector).html(e),t&&(this.lastSequence=t.last().get("data_sequence"),this.firstSequence=t.first().get("data_sequence"
)),r=this.$content.find("#tabular-"+this.cachedSequence).click(),this.focusEntry(r,!1,"center"),this.enableScrollHandler(),this.setCurrentlyLoadingMore(!1),this.reachedTop=!1,this.reachedBottom=!1},t.prototype.renderAppend=function(e,t){var n=this.$content.find(".pane-content"),r=this.contentHeight/2,i={duration:0,offset:-r,onAfter:this.afterAppend},s,o;this.cachedSector==="Down"&&(this.$content.find(this.contentSelector).append(e),this.lastSequence=t.last().get("data_sequence"),this.afterAppend()),this.cachedSector==="Up"&&(this.disableScrollHandler(),s=this.$content.find(".pane-content")[0].scrollHeight
,o=this.$content.find(".pane-content").scrollTop(),this.$content.find(this.contentSelector).prepend(e),n.stop().scrollTo(this.$content.find(".pane-content")[0].scrollHeight-s+o,i),this.firstSequence=t.first().get("data_sequence")),this.setCurrentlyLoadingMore(!1)},t.prototype.afterAppend=function(){this.setCurrentlyLoadingMore(!1),this.enableScrollHandler()},t.prototype.clearWithoutLoading=function(e){pt.Net.tryAbort(this.currentReq),U.extend(e,{clearLoading:!0}),this.clear(e)},t.prototype.clear=function(e){e=e;var t=!0;this.pushSelectedItemToHistory(),this.currentlyLoadingMore=!1,this.$heading
.html(this.templateWrapper({book:"&mdash;",hideResearch:this.hideResearch})),this.disableScrollHandler(),this.$content.find(this.contentSelector).not(".pcs").empty(),this.cleanupPCSColumns(),e&&(t=!1,typeof e.clearLoading!="undefined"&&e.clearLoading&&(t=!0)),this.setLoading(!t)},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$heading.find(".tc-loading").remove():this.$heading.find(".tc-loading").length===0&&this.$heading.find(".controls").append('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.handleError=function(e){this.clear()},t.prototype.loadMore=
function(e){var t=U(e.currentTarget).scrollTop(),n=this.$content.find(".pane-content")[0].scrollHeight,r=this.contentHeight,i=n-r-t-20,s=!0,o,u,a,f,l;this.isFirstScroll?this.isFirstScroll=!1:this.currentlyLoadingMore||(o=i<t,u=o?i:t,u<this.calculatedLoadPoint&&(o?(a=this.lastSequence,f="Down",this.reachedBottom&&(s=!1)):(a=this.firstSequence,f="Up",this.reachedTop&&(s=!1)),s&&(this.currentlyLoadingMore=!0,l={book:this.cachedBook,sequence:a,sector:f,records:25,append:!0,date:this.targetDate},this.hub.trigger(dt.CodeBooksGetTabular,l))))},t.prototype.disableScrollHandler=function(){this.$content.
find(".pane-content").unbind("scroll",this.throttleFunc)},t.prototype.enableScrollHandler=function(){this.isFirstScroll=!0,this.$content.find(".pane-content").scroll(this.throttleFunc)},t.prototype.setCurrentlyLoadingMore=function(e){this.currentlyLoadingMore=typeof e=="boolean"?e:!1,this.setLoading(this.currentlyLoadingMore)},t.prototype.getInstructionalNotes=function(e){e.stopPropagation();var t=U(e.currentTarget).closest(".tabular-result"),n=t.find(".primary-code").text(),r=t.attr("data-book").replace("_TABULAR","").replace("_INDEX",""),i;i={code:n,code_type:r},this.targetDate.length&&(i.date=
this.targetDate),pt.Net.tryAbort(this.currentReq),this.currentReq=at.TC.current()._net.codebooksGetInstructionalNotes(i,this.showInstructionalNotes,this.showInstructionalNotes)},t.prototype.showInstructionalNotes=function(e,t){var n=new yt.RowCollection,r="",i=e.instructional_notes_records.data_book,s=i.length?i.toUpperCase():"",o,u,a;s.indexOf("CPT")!==-1?o=this.templateTabularCPT:o=this.templateTabular,typeof t!="undefined"&&t==="error"?ht.show({title:"Instructional Notes",content:"There was an error trying to load this instructional note.",close:this.tcSetFocus,open:this.tcClearFocus}):(n.reset
(e.instructional_notes_records.records),u=o.call(this,{book:this.cachedBook,records:n.toJSON(),imgPath:lt.imageCdnPath(),inotePopup:!0}),r=this.templateInstructionalNote({formatted:u}),a=ht.show({title:"Instructional Notes",htmlContent:r,close:this.tcSetFocus,open:this.tcClearFocus}),a.on("click","a.code",this.instructionalNoteCodeClick))},t.prototype.instructionalNoteCodeClick=function(e){ht.get().off(),ht.close(),this.selectItem(e)},t.prototype.modifierClick=function(e){var t=U(e.currentTarget),n=t.attr("data-code-type"),r=t.text();n.length&&(n=n.replace("_TABULAR","").replace("_INDEX",""));var i
;i={book:n,code_to_scroll:r},this.hub.trigger(dt.CodeBooksListModifiers,i)},t.prototype.getModifiers=function(e){var t=this,n;n={full_details:!0,book:e.book},this.targetDate.length&&(n.date=this.targetDate),at.TC.current()._net.codebooksListModifiers(n,function(n){t.showModifiers(n,e.code_to_scroll)},this.showModifiers)},t.prototype.showModifiers=function(e,t){var n=this.templateModifiers({modifiers:e}),r,i={title:"Modifiers",htmlContent:n},s=function(n){var r=U(n.sender.element);r.scrollTo(r.find(".modifier-code-"+t))};t&&(i.activate=s),i.close=this.tcSetFocus,i.open=this.tcClearFocus,r=ht.show
(i)},t.prototype.getCrosswalk=function(e){U.extend(e,{all:!0});var t=pt.Net.mapToGetResearch(e),n=typeof e.isHistoryEvent!="undefined"&&e.isHistoryEvent;pt.Net.tryAbort(this.currentReq),this.currentReq=at.TC.current()._net.researchGetResearch(t,this.renderCrosswalk,this.renderCrosswalk),n||this.addHistory(t)},t.prototype.renderCrosswalk=function(e,t){try{var n=e.research_sections,r=(new bt.SectionCollection).reset(n),i=r.where({sectionType:"CROSSWALK"}),s,o;i.length===1&&(o=i[0].toJSON(),s=this.templateTabularCrosswalk({data:o}),this.cachedBook="Crosswalk",this.cachedSequence=o.items[0].id,this
.renderReplace(s,null),this.reachedTop=!0,this.reachedBottom=!0,this.currentlyLoadingMore=!1,this.setHistoryButtons(),this.calculatedLoadPoint=0,this.lastSequence=0,this.firstSequence=0)}catch(u){this.handleError(u)}},t.prototype.onSplitterCreated=function(){var e=this.$el.data("kendoSplitter");e.bind("layoutChange",this.fixContentScrollHeight),this.fixContentScrollHeight()},t.prototype.fixContentScrollHeight=function(e){var t=this;this.contentHeight=this.$content.height()-21,this.$content.find(".pane-content").each(function(e,n){var r=U(n);r.hasClass("pcs")?r.css("height",t.contentHeight+10):r
.css("height",t.contentHeight)})},t}(I.View);t.TabularView=xt}),define("text!controls/research/templates/research.html",[],function(){return'<% if (hasTabs) { %>\r\n<% var randomId = Math.random().toString().replace(\'0.\',\'\'); %>\r\n<div class="tabstrip research-pane" id="tabstrip-<%= randomId %>">\r\n    <ul>\r\n    </ul>\r\n</div>\r\n<% } else { %>\r\n<div class="research-pane"></div>\r\n<% } %>'}),define("text!controls/research/templates/research-pane/result.html",[],function(){return'<div class="research-content content <%= data.codeType.toLowerCase() %> coding-level-<%= codingLevel %><% if (hiddenSections.length > 0) { print(\' \' + hiddenSections); } %><% if (encounterType) { print(\' \' + encounterType); } %>">\r\n    <% _.each(sections, function(section) { %>\r\n    <div class="accordion-group <%= section.sectionType %><% if (section.itemCount) { print(\' selectable\'); } %>">\r\n        <div class="section-heading accordion-heading <% if (section.itemCount) { print(\'collapsible\'); } else { print(\'empty\'); } %>">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon <% if (section.itemCount) { print(\'k-minus\'); } else { print(\'k-plus\'); } %>"></span>\r\n                    <span class="section-title"><%= TextBook[section.sectionType] || section.sectionType %></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body<% if (section.itemCount === 0) { print(\' hide\'); } %>">\r\n            <div class="accordion-inner">\r\n                <ul class="<%= section.sectionType %>" data-section="<%= section.sectionType %>">\r\n        <% if (section.items) { %>\r\n            <% switch (section.sectionType) {\r\n                case \'CDR\': { %>\r\n                    <% _.each(section.items, function(item) { %>\r\n                        <dl>\r\n                            <dt><a class="reference" href="javascript:void(0)" data-article-id="<%= item.id %>"><%= item.title %></a>, <em><%= item.year %></em></dt>\r\n                            <dd>\r\n                                <span class="description<% if (item.text.length > 250) { print(\' hide\'); } %>"><%= item.text %></span>\r\n                                <span class="description overflow<% if (item.text.length <= 250) { print(\' hide\'); } %>"><%= _.str.prune(item.text, 250, \'<span class="overflow-text">...</span> <a href="javascript:void(0)" class="overflow-show">More</a>\') %></span>\r\n                            </dd>\r\n                        </dl>\r\n                    <% }); %>\r\n                <% }\r\n                break;\r\n                case \'CROSSWALK\':\r\n                case \'ANESTHESIA_CROSSWALK\': { %>\r\n                    <% _.forEach(section.items, function(item, i) { %>\r\n                        <li><a class="code" href="javascript:void(0)" data-code-type="<%= item.book %>"><%= item.code %></a> <%= item.medium_description %></li>\r\n                    <% }); %>\r\n                    <% if (section.hasMore) { %><a id="show-all-crosswalk" href="javascript:void(0)">View all <%= section.sectionType == \'ANESTHESIA_CROSSWALK\' ? \'anesthesia\' : \'\' %> crosswalk results</a><% } %>\r\n                <% }\r\n                break;\r\n                case \'CODING_ADVICE\': { %>\r\n                    <% _.each(section.items, function(item) { %>\r\n                        <li class="type-<%= item.coding_advice_type %><% if (item.is_beginner_level === true) { print(\' beginner\'); } %><% if (item.is_inpatient === false) { print(\' not-inpatient\'); } %><% if (item.is_outpatient === false) { print(\' not-outpatient\'); } %>"><%= item.text %> <em><%= item.source %></em></li>\r\n                    <% }); %>\r\n                <% }\r\n                break;\r\n                case \'CC_ICD9\':\r\n                case \'CC_ICD10\':\r\n                case \'CC_HCPCS\':\r\n                case \'CPT_ASSISTANT\':\r\n                case \'ICD9_GUIDELINES\':\r\n                case \'ICD10_GUIDELINES\':\r\n                case \'INTERVENTIONAL_RADIOLOGY\':\r\n                default: { %>\r\n                   <% _.each(section.items, function(item) { %>\r\n                    <li><a class="reference" href="javascript:void(0)" data-article-id="<%= item.id %>"><%= item.title %></a>, <em><%= item.issue_title %></em></li>\r\n                    <% }); %>\r\n                    <% if (section.best_count === 0 && section.hasMore) { %><em>No strong matches found.</em><% } %> \r\n                    <% if (section.hasMore) { %><a class="reference show-more" id="show-all-articles" href="javascript:void(0)">View all <%= section.best_count + section.other_count %> matching titles</a><% } %> \r\n                <% }\r\n                break;\r\n            } %>\r\n        <% } %>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <% }); %>\r\n    <div class="accordion-group ADDITIONAL_REFERENCES<% if (books.length > 0) { print(\' selectable\'); } %>">\r\n        <div class="section-heading accordion-heading <% if (books.length > 0) { print(\'collapsible\'); } else { print(\'empty\'); } %>">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon <% if (books.length > 0) { print(\'k-minus\'); } else { print(\'k-plus\'); } %>"></span>\r\n                    <span class="section-title"><%= TextBook.ADDITIONAL_REFERENCES %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body<% if (books.length === 0) { print(\' hide\'); } %>">\r\n            <div class="accordion-inner">\r\n                <ul>\r\n                    <% _.each(books, function(item) { %>\r\n                        <% if (item.isResource) { %>\r\n                            <li id="resource-<%= item.id %>" class="type-<%= item.type %>"><a class="type-<%= item.type %> resource<%= item.isProtected ? \' protected\' : \'\' %>" href="javascript:void(0)" data-resource-id="<%= item.id %>" data-item-type="<%= item.type %>"><%= item.title %></a></li>\r\n                        <% } else { %>\r\n                            <li id="reference-<%= item.id %>" class="type-<%= item.type %>"><a class="type-<%= item.type %> reference<%= item.isProtected ? \' protected\' : \'\' %>" href="javascript:void(0)" data-book-id="<%= item.id %>" data-item-type="<%= item.type %>"><%= item.title %></a></li>\r\n                        <% } %>\r\n                    <% }); %>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'
}),define("text!controls/research/templates/research-pane/empty.html",[],function(){return'<div class="research-content content <%= codeType.toLowerCase() %><% if (hiddenSections.length > 0) { print(\' \' + hiddenSections); } %>">\r\n\r\n    <div class="accordion-group CC_ICD9">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CC_ICD9 %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CC_ICD10">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CC_ICD10 %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CC_HCPCS">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CC_HCPCS %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group ICD9_GUIDELINES">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.ICD9_GUIDELINES %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group ICD10_GUIDELINES">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.ICD10_GUIDELINES %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CPT_ASSISTANT">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CPT_ASSISTANT %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CDR">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CDR %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group INTERVENTIONAL_RADIOLOGY">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.INTERVENTIONAL_RADIOLOGY %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CROSSWALK">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CROSSWALK %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n        <div class="accordion-group ANESTHESIA_CROSSWALK">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.ANESTHESIA_CROSSWALK %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group CODING_ADVICE">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title"><%= TextBook.CODING_ADVICE %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <ul></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group ADDITIONAL_REFERENCES<% if (books.length > 0) { print(\' selectable\'); } %>">\r\n        <div class="section-heading accordion-heading <% if (books.length > 0) { print(\'collapsible\'); } else { print(\'empty\'); } %>">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon <% if (books.length > 0) { print(\'k-minus\'); } else { print(\'k-plus\'); } %>"></span>\r\n                    <span class="section-title"><%= TextBook.ADDITIONAL_REFERENCES %></span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body<% if (books.length === 0) { print(\' hide\'); } %>">\r\n            <div class="accordion-inner">\r\n                <ul>\r\n                    <% _.each(books, function(item) { %>\r\n                        <% if (item.isResource) { %>\r\n                            <li id="resource-<%= item.id %>" class="type-<%= item.type %>"><a class="type-<%= item.type %> resource<%= item.isProtected ? \' protected\' : \'\' %>" href="javascript:void(0)" data-resource-id="<%= item.id %>" data-item-type="<%= item.type %>"><%= item.title %></a></li>\r\n                        <% } else { %>\r\n                            <li id="reference-<%= item.id %>" class="type-<%= item.type %>"><a class="type-<%= item.type %> reference<%= item.isProtected ? \' protected\' : \'\' %>" href="javascript:void(0)" data-book-id="<%= item.id %>" data-item-type="<%= item.type %>"><%= item.title %></a></li>\r\n                        <% } %>\r\n                    <% }); %>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>'
});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/research/researchPaneViewModel",["require","exports","Backbone","jql"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(t){this.defaults={codeSearched:null,codeType:t&&t.codeType?t.codeType.toUpperCase():"ICD9CM_DX",researchSections:t&&t.researchSections?t.researchSections:{},allResearch:t&&typeof t.allResearch=="boolean"?t.allResearch:!1,handleResourceClick:t&&typeof t.handleResourceClick=="boolean"?t.handleResourceClick:!0},e.call(this
,t)}return __extends(t,e),t.prototype.initialize=function(){var e={CC_ICD9:!0,CC_ICD10:!0,CC_HCPCS:!0,ICD9_GUIDELINES:!0,CPT_ASSISTANT:!0,CDR:!0,INTERVENTIONAL_RADIOLOGY:!0,CROSSWALK:!0,ANESTHESIA_CROSSWALK:!0,CODING_ADVICE:!0,ADDITIONAL_REFERENCES:!0,ICD10_GUIDELINES:!0};this.set("researchSections",s.extend(e,this.get("researchSections")))},t}(i.Model);t.ResearchPaneViewModel=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/models/book",["require","exports","Backbone"],function(e,t,n){var r=n,
i=function(e){function t(t){this.defaults=function(){return{id:null,title:null,can_list:!1,type:"default",isResource:!1,isProtected:!0}},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){},t}(r.Model);t.Book=i}),define("lib/util",["require","exports"],function(e,t){function n(e,t){e=e.get("title"),t=t.get("title");var n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=function(e){return(""+e).toLowerCase
()||""+e},a=u(e).replace(r,"")||"",f=u(t).replace(r,"")||"",l=a.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),c=f.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=a.match(s),p=f.match(s),d=h&&h.length?h[0]:null,v=p&&p.length?p[0]:null,m=parseInt(d)||l.length!=1&&a.match(i)&&Date.parse(a),g=parseInt(v)||m&&f.match(i)&&Date.parse(f)||null,y,b;if(g){if(m<g)return-1;if(m>g)return 1}for(var w=0,E=Math.max(l.length,c.length);w<E;w++){y=!(l[w]||"").match(o)&&parseFloat(l[w])||l[w]||0,b=!(c[w]||"").match(o)&&parseFloat(c[w])||c[w]||0;if(isNaN(y)!==isNaN(b))return isNaN
(y)?1:-1;typeof y!=typeof b&&(y+="",b+="");if(y<b)return-1;if(y>b)return 1}return 0}t.alphanumCompare=n});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/models/bookCollection",["require","exports","Backbone","controls/references/models/book","lib/util"],function(e,t,n,r,i){var s=n,o=r,u=i,a=function(e){function t(){e.apply(this,arguments),this.model=o.Book,this.comparator=u.alphanumCompare}return __extends(t,e),t}(s.Collection);t.BookCollection=a});var __extends=this.__extends||function(e,t){function n
(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/views/researchPane",["require","exports","Backbone","underscore","vendor/underscore/plugins/underscore.string","jql","vendor/jquery/plugins/jquery.scrollTo","text!controls/research/templates/research-pane/result.html","text!controls/research/templates/research-pane/empty.html","controls/research/models/research/researchPaneViewModel","controls/research/models/research/sectionCollection","controls/references/models/book","controls/references/models/bookCollection","lib/api","lib/dom","lib/events","lib/net"
,"lib/shortcuts","lib/templates","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=n,E=r,S=i,x=s,T=o,N=u,C=a,k=f,L=l,A=c,O=h,M=p,_=d,D=v,P=m,H=g,B=y,j=b,F=function(e){function t(t){T||!T,S||!S,j||!j,this.hub=t.hub,this.globalHub=t.globalHub,this.encounterType=t.encounterType,this.model=new k.ResearchPaneViewModel(t),this.sections=new L.SectionCollection,this.contentContainerSelector=".research-content",this.template=B.compile(B.tk_researchTab,N),this.emptyTemplate=B.compile(B.tk_researchTabEmpty,C),this.events={click:"tcSetFocus","click code_ref,.code":"handleCodeLink"
,"click .CROSSWALK #show-all-crosswalk":"showAllCrosswalk","click .section-heading.collapsible":"toggleView","click .overflow-show":"showOverflow","click .reference":"handleReferenceLink","click .resource":"handleResourceLink"},this.scopeName="researchPane:research",this.shortcuts={"up researchPane:research":"moveArrow","down researchPane:research":"moveArrow","space researchPane:research":"toggleViewKey"},this.books=new O.BookCollection,e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.tcInit(),M.TC.current().settings.keyboardShortcuts&&(x.extend(this,H.Get()),this.delegateShortcuts
()),E.bindAll(this),this.listenTo(this.hub,D.ResearchCodeInContext,this.searchForCode),this.listenTo(this.hub,D.ResearchClear,this.clear),this.listenTo(this.hub,D.CodeBooksSearch,this.clear),this.listenTo(this.hub,D.ResearchChangeEncounterType,this.encounterTypeUpdate),this.listenTo(this.globalHub,D.CodingLevelChange,this.codingLevelUpdate),this.getAdditionalReferences(),this.setHiddenResearchSections()},t.prototype.render=function(){return this.$el.closest(".k-scrollable").stop().scrollTo(0),this.sections.length?this.$el.html(this.template({sections:this.sections.toJSON(),data:this.model.toJSON
(),codingLevel:M.TC.current().settings.codingLevel,encounterType:this.encounterType,TextBook:j,books:this.books.toJSON(),hiddenSections:this.hiddenResearchSections})):this.$el.html(this.emptyTemplate({codeType:this.model.get("codeType"),TextBook:j,books:this.books.toJSON(),hiddenSections:this.hiddenResearchSections})),this.checkIfCodingAdviceEmpty(),this.hub.trigger(D.ResearchCodeResearchComplete),this},t.prototype.encounterTypeUpdate=function(e){this.encounterType=e.encounterType,this.$(".research-content").removeClass("inpatient outpatient").addClass(e.encounterType),this.checkIfCodingAdviceEmpty
()},t.prototype.checkIfCodingAdviceEmpty=function(){this.hideCodingAdvice(!1);var e=this.$(".research-content ul.CODING_ADVICE li:visible").length;e===0&&this.hideCodingAdvice(!0)},t.prototype.hideCodingAdvice=function(e){var t=this.$(".research-content").find("> .CODING_ADVICE");e?(t.find(".section-heading").addClass("empty").find(".toggle-icon").addClass("k-plus").removeClass("k-minus"),t.find(".section-items").hide()):(t.find(".section-heading").removeClass("empty").find(".toggle-icon").addClass("k-minus").removeClass("k-plus"),t.find(".section-items").show())},t.prototype.codingLevelUpdate=
function(e){this.$(".research-content").removeClass(function(e,t){var n=t.match(/coding-level-\S+/g||[]);if(n)return n.join(" ")}).addClass("coding-level-"+e),this.checkIfCodingAdviceEmpty()},t.prototype.getFocusElement=function(){return this.$el.closest(".research-pane-wrap")||this.$el.closest(".research-pane")},t.prototype.setHiddenResearchSections=function(){var e=[];E.each(this.model.get("researchSections"),function(t,n){t||e.push("hide-"+n)}),this.hiddenResearchSections=e.length>0?e.join(" "):""},t.prototype.getAdditionalReferences=function(){this.setLoading(!0),M.TC.current()._net.referencesListBooks
(this.showAdditionalReferences,this.showAdditionalReferencesFailure)},t.prototype.showAdditionalReferences=function(e){var t=[new A.Book({id:"PDF_I10_CODING_HANDBOOK",can_list:!1,title:"ICD-10 Coding Handbook",type:"pdf",isResource:!0,isProtected:!0}),new A.Book({id:"PDF_I10_PCS_APPENDICES",can_list:!1,title:"ICD-10-PCS Appendices",type:"pdf",isResource:!0,isProtected:!0}),new A.Book({id:"PDF_I10_PCS_REFERENCE_MANUAL",can_list:!1,title:"ICD-10-PCS Reference Manual",type:"pdf",isResource:!0,isProtected:!0})];this.books.reset(e),this.books.add(t),this.setLoading(!1),this.render()},t.prototype.showAdditionalReferencesFailure=
function(){},t.prototype.handleReferenceLink=function(e){e.preventDefault();var t=x(e.currentTarget),n=t.attr("data-book-id")||t.closest("ul").attr("data-section"),r=this.model.get("codeType"),i=t.attr("data-article-id"),s=t.text(),o;n&&n.length?n=n.toUpperCase():n=null,r=r.replace("_INDEX","").replace("_TABULAR",""),typeof i!="string"&&n!=="CDR"&&(i=null,s=null),o={code:this.model.get("codeSearched"),book:n,articleId:i,articleTitle:s,codeType:r},this.hub.trigger(D.ResearchReferenceClick,o)},t.prototype.handleResourceLink=function(e){var t=x(e.currentTarget),n=this.model.get("codeType"),r=t.attr
("data-resource-id"),i=t.attr("data-item-type"),s=t.hasClass("protected"),o=t.text(),u,a,f;n=n.replace("_INDEX","").replace("_TABULAR",""),u={code:this.model.get("codeSearched"),codeType:n,resourceId:r,resourceTitle:o,resourceType:i,protectedResource:s},this.hub.trigger(D.ResearchResourceClick,u),this.model.get("handleResourceClick")&&(a={id:r},f=M.TC.current()._net.referencesGetResourceURL(a),window.open(f,"resource_"+r))},t.prototype.showOverflow=function(e){var t=x(e.currentTarget);t.closest(".overflow").prev(".description").removeClass("hide"),t.closest(".overflow").remove()},t.prototype.setLoading=
function(e){typeof e=="undefined"||!e?this.$(".tc-loading:first").remove():this.$(this.contentContainerSelector).prepend('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.clear=function(e){var t=typeof e!="undefined"?e.book||this.model.get("codeType"):this.model.get("codeType");t=t||"ICD9CM_DX";if(typeof e=="undefined"||typeof e.pane=="undefined"||e.pane==="research")P.Net.tryAbort(this.currentReq),this.sections.reset(),this.$el.html(this.emptyTemplate({codeType:t.toUpperCase(),TextBook:j,books:this.books.toJSON(),hiddenSections:this.hiddenResearchSections}))},t.prototype
.toggleView=function(e,t){e.preventDefault(),x(e.target).closest(".accordion-heading").toggleClass("collapsed").find(".toggle-icon").toggleClass("k-plus k-minus");var n=M.TC.current().settings.effects?600:0;x(e.target).closest(".accordion-group").find(".section-items").slideToggle(n).prev(".section-heading").find(".section-expander").focus()},t.prototype.searchForCode=function(e){this.setLoading(!0),this.model.set({codeSearched:e.code,codeType:e.book},{silent:!0});var t={all:this.model.get("allResearch"),code:"",code_type:""};x.extend(t,P.Net.mapToGetResearch(e)),P.Net.tryAbort(this.currentReq)
,this.currentReq=M.TC.current()._net.researchGetResearch(t,this.searchForCodeComplete,this.handleError)},t.prototype.handleError=function(){},t.prototype.searchForCodeComplete=function(e){this.setLoading(!1),this.sections.reset(e.research_sections),this.render()},t.prototype.handleCodeLink=function(e){var t=x(e.currentTarget),n=t.text(),r=t.attr("data-code-type")||this.model.get("codeType"),i;i={codeType:r,code:n,pane:"research"},this.hub.trigger(D.ResearchCodeSelected,i)},t.prototype.showAllCrosswalk=function(){var e;e={book:this.model.get("codeType"),code:this.model.get("codeSearched")},this.
hub.trigger(D.CodeBooksGetCrosswalk,e)},t.prototype.moveArrow=function(e,t){var n=x.event.fix(e);n.preventDefault();var r=this.$(":focus"),i=r.length>0,s;i||(r=_.focusWithoutWindowScroll(this.$(".selectable .section-expander:first")));if(t)switch(t.key){case"up":s=r.closest(".accordion-group").prevAll(".selectable:first").find(".section-expander"),this.$el.closest(".pane-scrollable >.pane-content").scrollTo(s),_.focusWithoutWindowScroll(s);break;case"down":s=r.closest(".accordion-group").nextAll(".selectable:first").find(".section-expander"),this.$el.closest(".pane-scrollable >.pane-content").scrollTo
(s),_.focusWithoutWindowScroll(s);break;default:}},t.prototype.toggleViewKey=function(e,t){var n=x.event.fix(e);n.preventDefault();var r=x(e.target);r.closest(".section-heading").click()},t.prototype.onKeyboardFocus=function(e){_.focusWithoutWindowScroll(this.$(".selectable .section-expander:first"))},t}(w.View);t.ResearchTabView=F}),define("text!controls/research/templates/edits-pane/result.html",[],function(){return'<div class="edits-content content">\r\n    <% _.each(keys, function(key) { %>\r\n    <div class="accordion-group <%= key %>">\r\n        <div class="section-heading accordion-heading <% if (groups[key].length > 0) { print(\'collapsible\'); } else { print(\'empty\'); } %>">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon <% if (groups[key].length > 0) { print(\'k-minus\'); } else { print(\'k-plus\'); } %>"></span>\r\n                    <span class="section-title"><%= TextEdits[key] || key %></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body<% if (groups[key].length === 0) { print(\' hide\'); } %>">\r\n            <div class="accordion-inner">\r\n                <ul class="<%= key.toLowerCase() %>">\r\n                    <% _.each(groups[key], function(item) { %>\r\n                        <% if (item.type === \'MNE\') { %>\r\n                    <li class="type-<%= item.type %>"><%= item.intro %>\r\n                        <p><a class="details" href="javascript:void(0)">details...</a><span class="spacer"> | </span><a class="policy" data-article-id="<%= item.article_id %>" href="javascript:void(0)">policy...</a></p>\r\n                        <div class="details-content warning hide">\r\n                            <p><strong>Policy ID:</strong> <span><%= item.policy_id %></span></p>\r\n                            <p><strong>Policy Title:</strong> <span><%= item.policy_title %></span></p>\r\n                            <p><strong>Fiscal Intermediary/MAC:</strong> <span><%= item.fi_number %> &mdash; <%= item.fi_name %></span></p>\r\n                            <p><strong>Notes:</strong> <span><%= item.notes %></span></p>\r\n                            <p>\r\n                                <strong>Covered</strong> <em>(with frequency requirements)</em><strong>:</strong>\r\n                                <% _.each(item.diagnosis_groups, function(group) { %>\r\n                                    <% var clen = group.codes.length; %>\r\n                                    <% _.forEach(group.codes, function(gcode, i) { %>\r\n                                        <a class="code" href="javascript:void(0)" data-code-type="ICD9CM_DX"><%= gcode.start_code %></a><% if (clen > 1 && i < clen - 1) print(\', \'); %>\r\n                                    <% }); %>\r\n                                <% }); %>\r\n                            </p>\r\n                        </div>                        \r\n                    </li>\r\n                        <% } else { %>\r\n                    <li class="type-<%= item.type %>"><%= item.description %><% if (item.source_data) { %> <em class="source"><%= item.source_data %></em><% } %>                        \r\n                        <% if (item.details) { %>\r\n                        <p><a class="details" href="javascript:void(0)">details...</a></p>\r\n                        <div class="details-content warning hide<% if (key === \'RAC\') { print( \' notification\'); } %>"><%= item.details %></div>\r\n                        <% } %>\r\n                    </li>\r\n                        <% } %>\r\n                    <% }); %>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <% }); %>\r\n</div>'
}),define("text!controls/research/templates/edits-pane/empty.html",[],function(){return'<div class="edits-content content">\r\n\r\n    <div class="accordion-group">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title">Medicare Code Edits (MCE)</span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <p>No edits apply</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title">Outpatient Code Edits (OCE)</span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <p>No edits apply</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title">TruCode Edits</span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <p>No edits apply</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title">Medical Necessity Edits</span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <p>No edits apply</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="accordion-group">\r\n        <div class="section-heading accordion-heading empty">\r\n            <div class="accordion-toggle">\r\n                <a href="javascript:void(0)" class="section-expander">\r\n                    <span class="toggle-icon k-icon k-plus"></span>\r\n                    <span class="section-title">RAC Alert!</span>\r\n                    <span class="section-pin"></span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="section-items accordion-body hide">\r\n            <div class="accordion-inner">\r\n                <p>No edits apply</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>'
});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/edits/editGroup",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){e.call(this,t)}return __extends(t,e),t}(r.Model);t.EditGroup=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/edits/editGroupCollection",["require","exports","Backbone","controls/research/models/edits/editGroup"],function(e,t,n,r){var i=
n,s=r,o=function(e){function t(){e.apply(this,arguments),this.model=s.EditGroup}return __extends(t,e),t}(i.Collection);t.EditGroupCollection=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/edits/editsViewModel",["require","exports","Backbone","controls/research/models/edits/editGroupCollection"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(t){this.defaults=function(){return{editGroups:new s.EditGroupCollection}},e.call(this,t)}return __extends(t,e),t}(i.Model);t.EditsViewModel=o
}),define("locale/nls/edits",{root:{MCE:"Medicare Code Edits (MCE)",OCE:"Outpatient Code Edits (OCE)",MNE:"Medical Necessity Edits",TruCode:"TruCode Edits",RAC:"RAC Alert!","policy-type-2-3":"NCD: Possible medical necessity issue for procedure code {0}. Please review the NCD policy and details.","policy-type-2":"NCD: The ICD-9-CM Diagnosis codes assigned are not on the list of nationally covered indications for procedure code {0}. Please review the NCD policy.","policy-type-other-3":"LCD: Possible medical necessity issue for procedure code {0}. Please review the LCD policy and details.","policy-type-other"
:"LCD: The ICD-9-CM Diagnosis codes assigned are not on the list of locally covered indications for procedure code {0}. Please review the LCD policy."}});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/views/editsPane",["require","exports","Backbone","underscore","jql","text!controls/research/templates/edits-pane/result.html","text!controls/research/templates/edits-pane/empty.html","controls/research/models/edits/editsViewModel","lib/api","lib/events","lib/shortcuts","lib/templates","i18n!locale/nls/edits"
],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=n,d=r,v=i,m=s,g=o,y=u,b=a,w=f,E=l,S=c,x=h,T={INPATIENT:"INPATIENT",OUTPATIENT:"OUTPATIENT",MNE:"MNE",UNKNOWN:"UNKNOWN"},N=function(e){function t(t){x||!x,this.hub=t.hub,this.model=new y.EditsViewModel,this.contentContainerSelector=".edits-content",this.template=S.compile(S.tk_editsTab,m),this.emptyTemplate=S.compile(S.tk_editsTabEmpty,g),this.events={click:"tcSetFocus","click a.details":"showDetails","click .section-heading.collapsible":"toggleView","click a.policy":"handlePolicyClick","click a.code":"handleCodeClick"},this.scopeName="researchPane:edits"
,this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.tcInit(),b.TC.current().settings.keyboardShortcuts&&(v.extend(this,E.Get()),this.delegateShortcuts()),d.bindAll(this),this.listenTo(this.hub,w.ResearchEditsSet,this.setEdits),this.listenTo(this.hub,w.ResearchClear,this.clear)},t.prototype.handlePolicyClick=function(e){var t=v(e.currentTarget),n;n={articleId:t.attr("data-article-id")},this.hub.trigger(w.ResearchEditsPolicyClick,n)},t.prototype.handleCodeClick=function(e){var t=v(e.currentTarget),n;n={codeType:t.attr("data-code-type"),code:t.text(),pane
:"edits"},this.hub.trigger(w.ResearchCodeSelected,n)},t.prototype.showDetails=function(e){var t=v(e.currentTarget);t.parent().next().toggleClass("hide")},t.prototype.setEdits=function(e){var t=this.model.get("editGroups"),n=e.edits,r=this.getEditsType(n),i=this;switch(r){case T.MNE:n=this.getMNEEdits(n);break;case T.INPATIENT:n=this.getInpatientEdits(n);break;case T.OUTPATIENT:n=this.getOutpatientEdits(n);break;case T.UNKNOWN:break;default:}d.each(n,function(t){t.type=t.type||r,r===T.MNE&&(t.type=r,i.setMneNote(t)),t.category=e.category,t.id=r===T.MNE?t.type+"-"+t.category+"-"+t.policy_id+"-"+t
.code+"-"+t.sequence:t.type+"-"+t.category+"-"+t.id+"-"+t.content_type+"-"+t.source_field+"-"+t.position}),t.remove(t.where({category:e.category})),t.add(n),this.render()},t.prototype.getEditsType=function(e){return e.hcpcs_procedures?T.MNE:e.drg_calculation_results?T.INPATIENT:e.outpatient_calculation_results?T.OUTPATIENT:T.UNKNOWN},t.prototype.setMneNote=function(e){var t="policy-type-";t+=e.policy_type===2?"2":"other",e.severity_status===3&&(t+="-3");var n=/^[0-9]/.test(e.code.toString())?"CPT4":"HCPCS";e.intro=x[t].replace("{0}",'<a class="code" href="javascript:void(0)" data-code-type="'+n+'">'+
e.code+"</a>")},t.prototype.render=function(){var e=this.model.get("editGroups"),t={MCE:[],OCE:[],TruCode:[],MNE:[],RAC:[]};return e&&e.length?(v.extend(t,d.groupBy(e.toJSON(),function(e){return e.type})),this.$el.html(this.template({keys:d.keys(t),groups:t,TextEdits:x}))):this.$el.html(this.emptyTemplate()),this.$("a[data-code-type]").addClass("code"),this},t.prototype.showOverflow=function(e){var t=v(e.currentTarget);t.closest(".overflow").prev(".description").removeClass("hide"),t.closest(".overflow").remove()},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$(".tc-loading"
).remove():this.$(this.contentContainerSelector).prepend('<span class="k-loading k-icon tc-loading">Loading</span>')},t.prototype.clear=function(e){if(typeof e=="undefined"||typeof e.pane=="undefined"||e.pane==="edits")this.model.get("editGroups").reset(),this.$el.html(this.emptyTemplate())},t.prototype.toggleView=function(e,t){e.stopPropagation(),v(e.target).closest(".accordion-heading").toggleClass("collapsed").find(".toggle-icon").toggleClass("k-plus k-minus");var n=b.TC.current().settings.effects?600:0;v(e.target).closest(".accordion-group").find(".section-items").slideToggle(n)},t.prototype
.handleError=function(){},t.prototype.getInpatientEdits=function(e){var t=[];if(e&&e.drg_calculation_results){if(e.drg_calculation_results.drg_calculation_result&&e.drg_calculation_results.drg_calculation_result.length)for(var n=0;n<e.drg_calculation_results.drg_calculation_result.length;n++)e.drg_calculation_results.drg_calculation_result[n].edits&&(t=t.concat(e.drg_calculation_results.drg_calculation_result[n].edits.edit));e.drg_calculation_results.edits&&e.drg_calculation_results.edits.edit&&(t=t.concat(e.drg_calculation_results.edits.edit))}return t},t.prototype.getOutpatientEdits=function(
e){var t=[],n;return e&&e.outpatient_calculation_results&&(e.outpatient_calculation_results.asc_calculation_result&&(n=e.outpatient_calculation_results.asc_calculation_result.edits),e.outpatient_calculation_results.apc_calculation_result&&(n=e.outpatient_calculation_results.apc_calculation_result.edits),n&&n.edit&&(t=t.concat(n.edit)),e.outpatient_calculation_results.edits&&(t=t.concat(e.outpatient_calculation_results.edits.edit))),t},t.prototype.getMNEEdits=function(e){var t=[];return d.each(e.hcpcs_procedures,function(e){d.each(e.policies,function(n){n.code=e.code,n.sequence=e.sequence,t.push
(n)})}),t},t}(p.View);t.EditsPaneView=N}),define("text!controls/research/templates/icd10map-pane/empty.html",[],function(){return'<div class="icd10map-content content content-full pane-text pane-full-border">\r\n    <div class="heading">ICD-10 Code Mapping</div>\r\n    <p>Please select an ICD-9-CM code to see the equivalent ICD-10 code(s).</p>\r\n</div>'}),define("text!controls/research/templates/icd10map-pane/result.html",[],function(){return'<div class="icd10map-content content content-full pane-text pane-full-border">\r\n    <div class="heading">ICD-10 Code Mapping</div>\r\n    <div class="original-code">\r\n        <div class="icd9-code">ICD-9 CM Code</div>\r\n        <div class="code-wrap"><a class="code" href="javascript:void(0)" data-book="<%= data.icd9_code.code_type %>"><%= data.icd9_code.value %></a> <span class="description"><%= data.icd9_code.medium_description %></span></div>\r\n    </div>\r\n\r\n    <div class="scenario-wrapper">\r\n    <% var scenarioLength = data.scenarios.length; %>\r\n    <% if (scenarioLength > 1) { %>\r\n        <p class="alert notification">Please choose one of the scenarios below, following the instruction for that specific scenario.</p>\r\n    <% } %>\r\n    <% _.forEach(data.scenarios, function(scenario, h) { %>\r\n        <% var scenarioCodeListLength = scenario.codelists.length; %>\r\n        <div class="scenario">\r\n            <% if (scenarioLength > 1) { %>\r\n            <div class="scenario-title">Scenario <%= h + 1 %></div>\r\n                <% if (scenarioCodeListLength > 1) { %>\r\n            <p class="instruction">The single most appropriate <%= TextBook[\'MAP_\' + data.scenarios[0].code_type] || \'ICD-10-CM\' %> code from each of the lists should be selected.</p>\r\n                <% } else { %>\r\n            <p class="instruction">The single most appropriate <%= TextBook[\'MAP_\' + data.scenarios[0].code_type] || \'ICD-10-CM\' %> code should be selected.</p>\r\n                <% } %>\r\n            <% } %>\r\n            <div class="scenario-title"><%= TextBook[\'MAP_\' + scenario.code_type] || \'ICD-10-CM\' %> Code(s)</div>\r\n            <% if (scenarioLength === 1) { %>            \r\n                <% if (scenarioCodeListLength > 1) { %>\r\n                <p class="instruction">The single most appropriate <%= TextBook[\'MAP_\' + data.scenarios[0].code_type] || \'ICD-10-CM\' %> code from each of the lists should be selected.</p>\r\n                <% } else { %>\r\n                <p class="instruction">The single most appropriate <%= TextBook[\'MAP_\' + data.scenarios[0].code_type] || \'ICD-10-CM\' %> code should be selected.</p>\r\n                <% } %>\r\n            <% } %>\r\n            <% _.forEach(scenario.codelists, function(codelistWrapper, i) { %>\r\n                <% if (scenarioCodeListLength > 1) { %><span class="list-label">List <%= i + 1 %></span><% } %>\r\n                <% _.each(codelistWrapper.codelist, function(cl) { %>\r\n                    <div class="code-wrapper"><a class="code" href="javascript:void(0)" data-book="<%= cl.code_type %>"><%= cl.value %></a> <span><%= cl.medium_description %></span></div>\r\n                <% }); %>\r\n            <% }); %>\r\n        </div>\r\n    <% }); %>\r\n    </div>\r\n</div>'
});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/views/icd10mapPane",["require","exports","Backbone","underscore","jql","text!controls/research/templates/icd10map-pane/empty.html","text!controls/research/templates/icd10map-pane/result.html","text!controls/common/templates/loading-large.html","lib/api","lib/events","lib/net","lib/shortcuts","lib/templates","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=n,v=r,m=i,g=s,y=o,b=u,w=a,E=f,S=l,x=c,T=h,N=p,C=function(e){function t(t){N||!
N,this.hub=t.hub,this.contentContainerSelector=".icd10map-content",this.template=T.compile("icd10mapTab",y),this.emptyTemplate=T.compile("icd10mapTabEmpty",g),this.templateLoading=T.get(T.tk_loadingLarge,b),this.events={click:"tcSetFocus","click .code":"codeClicked"},this.scopeName="researchPane:icd10map",this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.tcInit(),w.TC.current().settings.keyboardShortcuts&&(m.extend(this,x.Get()),this.delegateShortcuts()),v.bindAll(this),this.listenTo(this.hub,E.ResearchCodeInContext,this.searchForMapping),this.listenTo
(this.hub,E.ResearchClear,this.clear)},t.prototype.codeClicked=function(e){var t=m(e.currentTarget),n;n={code:t.text(),codeType:t.attr("data-book"),pane:"icd10map"},this.hub.trigger(E.ResearchCodeSelected,n)},t.prototype.searchForMapping=function(e){if(e.book.toUpperCase().indexOf("ICD9")!==-1){var t=S.Net.mapToGetResearch(e);this.setLoading(!0),S.Net.tryAbort(this.currentReq),this.currentReq=w.TC.current()._net.researchGetICD10Mapping(t,this.renderResults,this.clear)}else this.clear()},t.prototype.renderResults=function(e){this.setLoading(!1),this.$el.html(this.template({data:e,TextBook:N}))},
t.prototype.render=function(){return this.$el.html(this.emptyTemplate()),this},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$(".tc-loading").remove():this.$(this.contentContainerSelector).html(this.templateLoading)},t.prototype.clear=function(e){if(typeof e=="undefined"||typeof e.pane=="undefined"||e.pane==="icd10map")S.Net.tryAbort(this.currentReq),this.$el.html(this.emptyTemplate())},t.prototype.handleError=function(){},t}(d.View);t.ICD10MapPaneView=C}),define("text!controls/research/templates/drg-analyze-pane/result.html",[],function(){return'<div class="drg-analyze-content content content-full pane-text pane-full-border">\r\n    <div class="heading">Suggested DRGs for <%= data.initial_drg %></div>\r\n    <% _.each(data.suggestions, function(suggestion) { %>\r\n    <div class="alternative">\r\n        <div class="drg-wrap">\r\n            <div class="drg"><%= suggestion.suggested_drg %></div>\r\n            <div class="description"><%= suggestion.drg_description %></div>\r\n            <div class="weight">(Wt: <%= suggestion.drg_weight %>)</div>\r\n        </div>\r\n        <% _.each(suggestion.requirements, function(requirement) { %>\r\n        <div class="requirement">\r\n            <strong>Requirement</strong>\r\n            <p><%= requirement.description %></p>\r\n            <% _.each(requirement.codelists, function(codelistWrapper) { %>\r\n                <% var len = (codelistWrapper.codelist && codelistWrapper.codelist.length) ? codelistWrapper.codelist.length : 0; %>\r\n                <% if (len > 0) { %>\r\n                    <strong>Codes</strong>\r\n                    <% if (codelistWrapper.display_name) { %><p><%= codelistWrapper.display_name %></p><% } %>\r\n                    <% _.forEach(codelistWrapper.codelist, function(code, i) { %>\r\n                        <% if (i === 9) { %>\r\n                            <a class="show-all" href="javascript:void(0)">Show all <%= len %> codes</a>\r\n                            <div class="overflow hide">\r\n                        <% } %>\r\n                        <div class="code-wrapper">\r\n                            <a class="code" href="javascript:void(0)" data-code-type="<%= code.code_type %>"><%= code.value %></a> <span><%= code.medium_description %></span>\r\n                        </div>\r\n                        <% if (i > 8 && i + 1 === len) { %>\r\n                            </div>\r\n                        <% } %>\r\n                    <% }); %>\r\n                <% } %>\r\n        <% }); %>\r\n        </div>\r\n        <% }); %>\r\n    </div>\r\n    <% }); %>\r\n</div>\r\n'
}),define("text!controls/research/templates/drg-analyze-pane/empty.html",[],function(){return'<div class="drg-analyze-content content content-full pane-text pane-full-border">\r\n    <div class="warning notification">\r\n        <p>There are no likely alternatives to your current DRG.</p>\r\n    </div>\r\n</div>'});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/views/drgAnalyzePane",["require","exports","Backbone","underscore","jql","text!controls/common/templates/loading-large.html","text!controls/research/templates/drg-analyze-pane/result.html"
,"text!controls/research/templates/drg-analyze-pane/empty.html","controls/research/models/edits/editsViewModel","lib/api","lib/events","lib/net","lib/shortcuts","lib/templates","i18n!locale/nls/edits"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=n,m=r,g=i,y=s,b=o,w=u,E=a,S=f,x=l,T=c,N=h,C=p,k=d,L=function(e){function t(t){k||!k,this.hub=t.hub,this.model=new E.EditsViewModel,this.contentContainerSelector=".content",this.template=C.compile(C.tk_drgAnalysisTab,b),this.emptyTemplate=C.compile(C.tk_drgAnalysisTabNone,w),this.templateLoading=C.get(C.tk_loadingLarge,y),this.events={click:"tcSetFocus"
,"click .show-all":"showOverflow","click a.code":"handleCodeClick"},this.scopeName="researchPane:drgAnalysis",this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.tcInit(),S.TC.current().settings.keyboardShortcuts&&(g.extend(this,N.Get()),this.delegateShortcuts()),m.bindAll(this),this.listenTo(this.hub,x.ResearchAnalyzeDRG,this.analyze),this.listenTo(this.hub,x.ResearchClear,this.clear)},t.prototype.handleCodeClick=function(e){var t=g(e.currentTarget),n;n={codeType:t.attr("data-code-type"),code:t.text(),pane:"drgAnalysis"},this.hub.trigger(x.ResearchCodeSelected
,n)},t.prototype.showOverflow=function(e){var t=g(e.currentTarget);t.next().removeClass().children(":first").unwrap(),t.remove()},t.prototype.analyze=function(e){this.setLoading(!0),T.Net.tryAbort(this.currentReq),this.currentReq=S.TC.current()._net.drgAnalyze(e,this.render,this.handleError)},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$(".tc-loading").remove():this.$(this.contentContainerSelector).html(this.templateLoading)},t.prototype.clear=function(e){if(typeof e=="undefined"||typeof e.pane=="undefined"||e.pane==="drgAnalysis")T.Net.tryAbort(this.currentReq),this.$el.html
(this.emptyTemplate())},t.prototype.render=function(e){return e&&e.suggestions.length>0?this.$el.html(this.template({data:e})):this.$el.html(this.emptyTemplate()),this},t.prototype.handleError=function(){this.setLoading(!1),this.$el.html(this.emptyTemplate())},t}(v.View);t.DRGAnalyzePaneView=L});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/research/models/researchViewModel",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults={activePane:t.activePane||"research"
,visiblePanes:["drgAnalysis","icd10map","research","edits"]},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){this.get("visiblePanes").length===0&&this.set("visiblePanes",["drgAnalysis","icd10map","research","edits"])},t}(r.Model);t.ResearchViewModel=i}),define("kendoui/kendo.tabstrip",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.data","kendoui/kendo.fx"],function(e,t){function I(t){t.children(h).addClass(w),t.children("a").addClass(v).children(h).addClass(w),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(O),t.filter("li[disabled]").addClass
(A).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(M+" "+P),t.attr("role","tab"),t.filter("."+M).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+v).length||t.contents().filter(function(){return!this.nodeName.match(l)&&(this.nodeType!=3||!!o(this.nodeValue))}).wrapAll("<a class='"+v+"'/>")})}function q(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(E),t.filter(".k-last:not(:last-child)").removeClass(m),t.filter(":first-child").addClass(E),t.filter(":last-child").addClass(m)}var n=
t.ui,r=t.keys,i=e.map,s=e.each,o=e.trim,u=e.extend,a=t.template,f=n.Widget,l=/^(a|div)$/i,c=".kendoTabStrip",h="img",p="href",d="prev",v="k-link",m="k-last",g="click",y="error",b=":empty",w="k-image",E="k-first",S="select",x="activate",T="k-content",N="contentUrl",C="mouseenter",k="mouseleave",L="contentLoad",A="k-state-disabled",O="k-state-default",M="k-state-active",_="k-state-focused",D="k-state-hover",P="k-tab-on-top",H=".k-item:not(."+A+")",B=".k-tabstrip-items > "+H+":not(."+M+")",j={content:a("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper
:a("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:a("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:a("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:a("<span class='k-sprite #= spriteCssClass #'></span>"),empty:a("")},F={wrapperCssClass:function(e,t){var n="k-item",r=t.index;return t.enabled===!1?n+=" k-state-disabled":n+=" k-state-default",r===0&&(n+=" k-first"),r==e.length-1&&(n+=" k-last"
),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:t.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?t.attr("content-url")+'="'+e.contentUrl+'"':""}},R=f.extend({init:function(n,r){var i=this;f.fn.init.call(i,n,r),i._animations(i.options),i.element.is("ul")?i.wrapper=i.element.wrapAll("<div />"
).parent():i.wrapper=i.element,r=i.options,i._isRtl=t.support.isRtl(i.wrapper),i._tabindex(),i._updateClasses(),i._dataSource(),r.dataSource&&i.dataSource.fetch(),i.options.contentUrls&&i.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+v).data(N,i.options.contentUrls[t])}),i.wrapper.on(C+c+" "+k+c,B,i._toggleHover).on("keydown"+c,e.proxy(i._keydown,i)).on("focus"+c,e.proxy(i._active,i)).on("blur"+c,function(){i._current(null)}),i.wrapper.children(".k-tabstrip-items").on(g+c,".k-state-disabled .k-link",!1).on(g+c," > "+H,function(t){i._click(e(t.currentTarget))&&t.preventDefault
()});var s=i.tabGroup.children("li."+M),o=i.contentHolder(s.index());o.length>0&&o[0].childNodes.length===0&&i.activateTab(s.eq(0)),i.element.attr("role","tablist"),i.element[0].id&&(i._ariaId=i.element[0].id+"_ts_active"),t.notify(i)},_active:function(){var e=this.tabGroup.children().filter("."+M);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(H)[e]()},_item:function(e,t){var n;return t===d?n="last":n="first",e?(e=e[t](),e[0]||(e=this._endItem(n)),e.hasClass(A)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var t=this,
n=t._focused,r=t._ariaId;if(e===undefined)return n;n&&(n[0].id===r&&n.removeAttr("id"),n.removeClass(_)),e&&(e.hasClass(M)||e.addClass(_),t.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),t.element.attr("aria-activedescendant",r))),t._focused=e},_keydown:function(e){var t=this,n=e.keyCode,i=t._current(),s=t._isRtl,o;if(e.target!=e.currentTarget)return;if(n==r.DOWN||n==r.RIGHT)o=s?d:"next";else if(n==r.UP||n==r.LEFT)o=s?"next":d;else if(n==r.ENTER||n==r.SPACEBAR)t._click(i),e.preventDefault();else{if(n==r.HOME){t._click(t._endItem("first")),e.preventDefault();return}if(
n==r.END){t._click(t._endItem("last")),e.preventDefault();return}}o&&(t._click(t._item(i,o)),e.preventDefault())},_dataSource:function(){var n=this;n.dataSource&&n._refreshHandler?n.dataSource.unbind("change",n._refreshHandler):n._refreshHandler=e.proxy(n.refresh,n),n.dataSource=t.data.DataSource.create(n.options.dataSource).bind("change",n._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var n=this,r=n.options,i=t
.getter(r.dataTextField),s=t.getter(r.dataContentField),o=t.getter(r.dataContentUrlField),u=t.getter(r.dataImageUrlField),a=t.getter(r.dataUrlField),f=t.getter(r.dataSpriteCssClass),l,c=[],h,p,d=n.dataSource.view(),v;e=e||{},p=e.action,p&&(d=e.items);for(l=0,v=d.length;l<v;l++)h={text:i(d[l])},r.dataContentField&&(h.content=s(d[l])),r.dataContentUrlField&&(h.contentUrl=o(d[l])),r.dataUrlField&&(h.url=a(d[l])),r.dataImageUrlField&&(h.imageUrl=u(d[l])),r.dataSpriteCssClass&&(h.spriteCssClass=f(d[l])),c[l]=h;if(e.action=="add")e.index<n.tabGroup.children().length?n.insertBefore(c,n.tabGroup.children
().eq(e.index)):n.append(c);else if(e.action=="remove")for(l=0;l<d.length;l++)n.remove(e.index);else e.action=="itemchange"?(l=n.dataSource.view().indexOf(d[0]),e.field===r.dataTextField&&n.tabGroup.children().eq(l).find(".k-link").text(d[0].get(e.field))):(n.trigger("dataBinding"),n.remove("li"),n.append(c),n.trigger("dataBound"))},value:function(t){var n=this;if(t===undefined)return n.select().text();t!=n.value()&&n.tabGroup.children().each(function(){e.trim(e(this).text())==t&&n.select(this)})},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this.options.animation
;this._animations(e),e.animation=u(!0,t,e.animation),f.fn.setOptions.call(this,e)},events:[S,x,y,L,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1},destroy:function(){var e=this;f.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(c),t.destroy(e.wrapper)},select:function(t){var n=this;return arguments.length===0?n.tabGroup
.children("li."+M):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,r){r=e(r),!r.hasClass(M)&&!n.trigger(S,{item:r[0],contentElement:n.contentHolder(r.index())[0]})&&n.activateTab(r)}),n)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),r=t.find("."+v).data(N),i=n.contentHolder(t.index());r&&n.ajaxRequest(t,i,null,r)}),n},append:function(e){var t=this,n=t._create(e);return s(n.tabs,function(
e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),q(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){var r=this,i=r._create(t),o=e(r.contentElement(n.index()));return s(i.tabs,function(e){n.before(this),o.before(i.contents[e])}),q(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){var r=this,i=r._create(t),o=e(r.contentElement(n.index()));return s(i.tabs,function(e){n.after(this),o.after(i.contents[e])}),q(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n=this,r=typeof t,i=e();return r==="string"?t=n.tabGroup.find(t):r==="number"&&
(t=n.tabGroup.children().eq(t)),t.each(function(){i.push(n.contentElement(e(this).index()))}),t.remove(),i.remove(),n._updateContentElements(),n},_create:function(t){var n=e.isPlainObject(t),r=this,s,o;return n||e.isArray(t)?(t=e.isArray(t)?t:[t],s=i(t,function(t,n){return e(R.renderItem({group:r.tabGroup,item:u(t,{index:n})}))}),o=i(t,function(t,n){if(t.content||t.contentUrl)return e(R.renderContent({item:u(t,{index:n})}))})):(s=e(t),o=e("<div class='"+T+"'/>"),I(s)),{tabs:s,contents:o}},_toggleDisabled:function(t,n){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(O,n).toggleClass
(A,!n)})},_updateClasses:function(){var t=this,n,r,i;t.wrapper.addClass("k-widget k-header k-tabstrip"),t.tabGroup=t.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),t.tabGroup[0]||(t.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(t.wrapper)),n=t.tabGroup.find("li").addClass("k-item"),n.length&&(r=n.filter("."+M).index(),i=r>=0?r:undefined,t.tabGroup.contents().filter(function(){return this.nodeType==3&&!o(this.nodeValue)}).remove()),r>=0&&n.eq(r).addClass(P),t.contentElements=t.wrapper.children("div"),t.contentElements.addClass(T).eq(i).addClass(M).css({display:"block"
}),n.length&&(I(n),q(t.tabGroup),t._updateContentElements())},_updateContentElements:function(){var n=this,r=n.options.contentUrls||[],i=n.element.attr("id"),s=n.wrapper.children("div");n.tabGroup.find(".k-item").each(function(t){var o=s.eq(t),u=i+"-"+(t+1);this.setAttribute("aria-controls",u),!o.length&&r[t]?e("<div id='"+u+"' class='"+T+"'/>").appendTo(n.wrapper):o.attr("id",u),o.attr("role","tabpanel"),o.filter(":not(."+M+")").attr("aria-hidden",!0).attr("aria-expanded",!1),o.filter("."+M).attr("aria-expanded",!0)}),n.contentElements=n.contentAnimators=n.wrapper.children("div"),t.kineticScrollNeeded&&
t.mobile.ui.Scroller&&(t.touchScroller(n.contentElements),n.contentElements=n.contentElements.children(".km-scroll-container"))},_toggleHover:function(t){e(t.currentTarget).toggleClass(D,t.type==C)},_click:function(e){var t=this,n=e.find("."+v),r=n.attr(p),i=t.options.collapsible,s=t.contentHolder(e.index()),o,u;if(e.closest(".k-widget")[0]!=t.wrapper[0])return;if(e.is("."+A+(i?"":",."+M)))return!0;u=n.data(N)||r&&(r.charAt(r.length-1)=="#"||r.indexOf("#"+t.element[0].id+"-")!=-1),o=!r||u;if(t.tabGroup.children("[data-animating]").length)return o;if(t.trigger(S,{item:e[0],contentElement:s[0]}))
return!0;if(o===!1)return;return i&&e.is("."+M)?(t.deactivateTab(e),!0):(t.activateTab(e)&&(o=!0),o)},deactivateTab:function(e){var n=this,r=n.options.animation,i=r.open,s=u({},r.close),o=s&&"effects"in s;e=n.tabGroup.find(e),s=u(o?s:u({reverse:!0},i),{hide:!0}),t.size(i.effects)?(e.kendoAddClass(O,{duration:i.duration}),e.kendoRemoveClass(M,{duration:i.duration})):(e.addClass(O),e.removeClass(M)),e.removeAttr("aria-selected"),n.contentAnimators.filter("."+M).kendoStop(!0,!0).kendoAnimate(s).removeClass(M).attr("aria-hidden",!0)},activateTab:function(e){e=this.tabGroup.find(e);var n=this,r=n.options
.animation,i=r.open,s=u({},r.close),o=s&&"effects"in s,a=e.parent().children(),f=a.filter("."+M),l=a.index(e);s=u(o?s:u({reverse:!0},i),{hide:!0}),t.size(i.effects)?(f.kendoRemoveClass(M,{duration:s.duration}),e.kendoRemoveClass(D,{duration:s.duration})):(f.removeClass(M),e.removeClass(D));var c=n.contentAnimators;e.data("in-request")&&(n.xhr.abort(),e.removeAttr("data-in-request"));if(c.length===0)return f.removeClass(P),e.addClass(P).css("z-index"),e.addClass(M),n._current(e),n.trigger("change"),!1;var h=c.filter("."+M),p=n.contentHolder(l),d=p.closest(".k-content");if(p.length===0)return h.removeClass
(M).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(s),!1;e.attr("data-animating",!0);var m=(e.children("."+v).data(N)||!1)&&p.is(b),g=function(){f.removeClass(P),e.addClass(P).css("z-index"),t.size(i.effects)?(f.kendoAddClass(O,{duration:i.duration}),e.kendoAddClass(M,{duration:i.duration})):(f.addClass(O),e.addClass(M)),f.removeAttr("aria-selected"),e.attr("aria-selected",!0),n._current(e),d.addClass(M).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(u({init:function(){n.trigger(x,{item:e[0],contentElement:p[0]})}},i,{complete:function(){e.removeAttr("data-animating"
)}}))},y=function(){m?(e.removeAttr("data-animating"),n.ajaxRequest(e,p,function(){e.attr("data-animating",!0),g(),n.trigger("change")})):(g(),n.trigger("change"))};return h.removeClass(M),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(u({complete:y},s)):y(),!0},contentElement:function(e){if(isNaN(e-0))return undefined;var n=this.contentElements&&this.contentElements[0]&&!t.kineticScrollNeeded?this.contentElements:this.contentAnimators,r=new RegExp("-"+(e+1)+"$");if(n)for(var i=0,s=n.length;i<s;i++)if(r.test(n.closest(".k-content")[i].id))return n[i
];return undefined},contentHolder:function(n){var r=e(this.contentElement(n)),i=r.children(".km-scroll-container");return t.support.touch&&i[0]?i:r},ajaxRequest:function(t,n,r,i){t=this.tabGroup.find(t);if(t.find(".k-loading").length)return;var s=this,o=t.find("."+v),u={},a=null,f=setTimeout(function(){a=e("<span class='k-icon k-loading'/>").prependTo(o)},100);i=i||o.data(N)||o.attr(p),t.attr("data-in-request",!0),s.xhr=e.ajax({type:"GET",cache:!1,url:i,dataType:"html",data:u,error:function(e,t){s.trigger("error",{xhr:e,status:t})&&this.complete()},complete:function(){t.removeAttr("data-in-request"
),clearTimeout(f),a!==null&&a.remove()},success:function(e){try{n.html(e)}catch(o){var u=window.console;u&&u.error&&u.error(o.name+": "+o.message+" in "+i),this.error(this.xhr,"error")}r&&r.call(s,n),s.trigger(L,{item:t[0],contentElement:n[0]})}})}});u(R,{renderItem:function(e){e=u({tabStrip:{},group:{}},e);var t=j.empty,n=e.item;return j.item(u(e,{image:n.imageUrl?j.image:t,sprite:n.spriteCssClass?j.sprite:t,itemWrapper:j.itemWrapper},F))},renderContent:function(e){return j.content(u(e,F))}}),t.ui.plugin(R)});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=
t.prototype,e.prototype=new n};define("controls/research/views/research",["require","exports","Backbone","underscore","jql","text!controls/research/templates/research.html","controls/research/views/researchPane","controls/research/views/editsPane","controls/research/views/icd10mapPane","controls/research/views/drgAnalyzePane","controls/research/models/researchViewModel","kendoui/kendo.core","kendoui/kendo.tabstrip","lib/api","lib/templates","lib/events"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n,g=r,y=i,b=s,w=o,E=u,S=a,x=f,T=l,N=c,C=h,k=p,L=d,A=v,O=function(e){function t(t){N||!N,C||!C,
this.template=L.compile(L.tk_research,b),this.model=new T.ResearchViewModel(t),this.childRefs=[],this.codeType=t&&t.codeType?t.codeType:null,this.researchSections=t&&t.researchSections?t.researchSections:{},this.allResearch=t&&typeof t.allResearch=="boolean"?t.allResearch:!1,this.encounterType=t&&t.encounterType?t.encounterType:null,this.handleResourceClick=t&&typeof t.handleResourceClick=="boolean"?t.handleResourceClick:!0,this.visible=!0,this.isEmbedded=t&&typeof t.embedded=="boolean"?t.embedded:!1,e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.hub=e.hub||A.Get()
,this.globalHub=e.globalHub||A.GetGlobal(),this.tcInit(),g.bindAll(this),this.listenTo(this.hub,A.ResearchTabToggle,this.toggleTab),this.listenTo(this.hub,A.ResearchTabSelect,this.selectTab)},t.prototype.onClose=function(){for(var e=0;e<this.childRefs.length;e++)this.childRefs[e].tcClose()},t.prototype.selectTab=function(e){var t=this.$(".tabstrip").data("kendoTabStrip"),n=this.$(".tabstrip ."+e.name).closest(".k-item");t&&n&&t.select(n)},t.prototype.toggleTab=function(e){var t=this.$(".tabstrip ."+e.name).closest(".k-item");t&&(typeof e.action=="string"?e.action==="hide"?t.hide():e.action==="show"&&
t.show():t.toggle())},t.prototype.render=function(){var e,t,n=this.model.get("visiblePanes"),r=n?n.length:0,i={research:'Research<span class="research" />',drgAnalysis:'DRG Analysis<span class="drgAnalysis" />',edits:'Edits<span class="edits" />',icd10map:'ICD-10<span class="icd10map" />'},s,o,u;this.$el.html(this.template({hasTabs:r>1}));if(r>1){s=this.$(".tabstrip"),o=s.find("ul");for(var a=0;a<r;a++)o.append("<li>"+i[n[a]]||n[a]+'<span class="'+n[a]+'" /></li>'),u=y("<div />").appendTo(s),this.renderView(n[a],u);e=this.createTabs(),t=this.$(".tabstrip ."+this.model.get("activePane")).closest
(".k-item"),e.select(t)}else this.renderView(n[0],this.$el.find(".research-pane").get(0));return this.isEmbedded||this.checkStyleVersions(),this},t.prototype.renderView=function(e,t){switch(e){case"research":this.childRefs.push((new w.ResearchTabView({el:t,codeType:this.codeType,researchSections:this.researchSections,allResearch:this.allResearch,encounterType:this.encounterType,handleResourceClick:this.handleResourceClick,hub:this.hub,globalHub:this.globalHub})).render());break;case"drgAnalysis":this.childRefs.push((new x.DRGAnalyzePaneView({el:t,hub:this.hub})).render());break;case"edits":this
.childRefs.push((new E.EditsPaneView({el:t,encounterType:this.encounterType,hub:this.hub})).render());break;case"icd10map":this.childRefs.push((new S.ICD10MapPaneView({el:t,hub:this.hub})).render());break;default:}},t.prototype.createTabs=function(){var e={};return k.TC.current().settings.effects||(e.animation=!1),this.$(".tabstrip").kendoTabStrip(e).data("kendoTabStrip")},t.prototype.onSplitterCreated=function(){var e=this.$el.closest(".k-splitter").data("kendoSplitter");e.bind("layoutChange",this.fixScrollHeight),this.fixScrollHeight()},t.prototype.fixScrollHeight=function(){var e=this.$el.closest
(".research-mid-wrap.pane-scrollable");e.length>0&&(this.contentHeight=e.height()-39,e.find(".pane-content").css("height",this.contentHeight))},t}(m.View);t.ResearchView=O});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/models/sharedModel",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults=function(){return{pcsSections:{columns:null}}},e.call(this,t)}return __extends(t,e),t}(r.Model);t.SharedModel=i});var __extends=this.__extends||function(e,t){function n
(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/codebooks/views/codebooks",["require","exports","Backbone","underscore","jql","text!controls/codebooks/templates/codebooks.html","controls/codebooks/views/searchbar","controls/codebooks/views/index","controls/codebooks/views/tabular","controls/research/views/research","controls/codebooks/models/sharedModel","kendoui/kendo.core","kendoui/kendo.splitter","lib/api","lib/templates","lib/events","lib/shortcuts","lib/config","lib/dom"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=n,w=r,E=i,S=s,x=o,T=u,N=a,C=f,k=
l,L=c,A=h,O=p,M=d,_=v,D=m,P=g,H=y,B=function(e){function t(t){L||!L,A||!A,this.searchbarSelector=".searchbar",this.indexHeaderSelector=".index-header",this.indexSelector=".index-results",this.tabularWrapSelector=".tabular-wrap",this.tabularHeaderSelector=".tabular-header",this.tabularSelector=".tabular-results",this.researchPaneSelector=".research-pane-wrap",this.pcsListSectionFailureCount=0,this.childRefs=[],this.events={click:"tcSetActiveWidget"},this.shortcuts={"ctrl+up":"movePaneFocus","ctrl+down":"movePaneFocus"},this.sharedProperties=new k.SharedModel,this.targetDate=t&&t.bookdate?t.bookdate
:"",this.book=t&&t.book?t.book.toUpperCase():null,this.searchQuery=t&&t.searchQuery?t.searchQuery:null,this.searchOption=t&&t.searchOption?t.searchOption:"",this.bookFilters=t&&t.bookFilters?t.bookFilters:null,this.visible=!0,this.hideResearch=t&&typeof t.hideResearch!="undefined"?t.hideResearch:!1,this.template=M.compile(M.tk_codebooksWrapper,S),typeof t=="object"&&delete t.visiblePanes,this.cachedOptionsForResearch=t,e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.hub=_.Get(),this.tcInit(),this.tcSetActiveWidget(),O.TC.current().settings.keyboardShortcuts&&(E.extend
(this,D.Get()),this.delegateShortcuts()),w.bindAll(this),this.listenTo(this.hub,_.CodeBooksClear,this.clearResearch),this.listenTo(this.hub,_.CodeBooksChangeBookdate,this.clear),this.listenTo(this.hub,_.ClearWidgetAreaFocus,this.blurSplitters),this.listenTo(this.hub,_.CodeBooksResize,this.resize),this.getPCSSections()},t.prototype.movePaneFocus=function(e,t){E.event.fix(e).preventDefault();if(!this.$el.hasClass("active-widget"))return;var n="keyboard",r=this.$("."+P.activePaneClass),i=r&&r.hasClass("k-splitbar"),s;i?s=r.hasClass("k-splitbar-vertical")?25:35:s=parseInt(r.attr("data-pane-index"),10
),this.hub.trigger(_.ClearWidgetAreaFocus),this.$("."+P.activePaneClass).removeClass(P.activePaneClass),H.blurAll(),typeof s=="number"&&t.key==="ctrl+up"&&(s*=-1),this.hideResearch&&(s*=10);switch(s){case-25:case 10:case-250:case 100:this.childRefs[1].tcSetFocus(n);break;case-30:case 20:case-300:case 200:H.focusWithoutWindowScroll(this.$(".index-wrap").next(".k-splitbar").addClass(P.activePaneClass)).click();break;case-35:case 25:case-100:case 250:this.childRefs[2].tcSetFocus(n);break;case-40:case 30:H.focusWithoutWindowScroll(this.$(".results-wrap").next(".k-splitbar").addClass(P.activePaneClass
)).click();break;case-10:case 35:this.childRefs[3].childRefs[0].tcSetFocus(n);break;case-20:case 40:case-200:case 300:this.childRefs[0].tcSetFocus(n);break;default:this.childRefs[0].tcSetFocus(n)}},t.prototype.onClose=function(){for(var e=0;e<this.childRefs.length;e++)this.childRefs[e].tcClose()},t.prototype.clear=function(){this.hub.trigger(_.CodeBooksClear)},t.prototype.clearResearch=function(){var e;e={pane:"research"},this.hub.trigger(_.ResearchClear,e)},t.prototype.render=function(){var e;return this.$el.html(this.template({hideResearch:this.hideResearch})),this.childRefs.push((new x.SearchbarView
({el:this.$(this.searchbarSelector),targetDate:this.targetDate,book:this.book,searchQuery:this.searchQuery,searchOption:this.searchOption,hub:this.hub,sharedProperties:this.sharedProperties,bookFilters:this.bookFilters,hideResearch:this.hideResearch})).render()),this.childRefs.push((new T.IndexView({el:this.$(this.indexSelector),$heading:this.$(this.indexHeaderSelector),hub:this.hub,sharedProperties:this.sharedProperties,hideResearch:this.hideResearch})).render()),this.childRefs.push((new N.TabularView({el:this.$(this.tabularWrapSelector),$content:this.$(this.tabularSelector),$heading:this.$(this
.tabularHeaderSelector),targetDate:this.targetDate,hub:this.hub,sharedProperties:this.sharedProperties,hideResearch:this.hideResearch})).render()),this.hideResearch||(e=E.extend(this.cachedOptionsForResearch,{el:this.$(this.researchPaneSelector),visiblePanes:["research"],hub:this.hub,sharedProperties:this.sharedProperties,embedded:!0}),this.childRefs.push((new C.ResearchView(e)).render())),this.createSplitter(),w.each(this.childRefs,function(e){e.onSplitterCreated&&e.onSplitterCreated()}),this.checkStyleVersions(),this},t.prototype.createSplitter=function(){var e=this.$(".codebooks-wrap"),t=this
,n=this.hideResearch?"100%":"70%",r=this.hideResearch?"100%":"25%",i=this.hideResearch?"100%":"75%",s=[{collapsible:!1,resizable:!this.hideResearch,size:n,min:r,max:i,scrollable:!1}];this.hideResearch||s.push({collapsible:!1,resizable:!0,scrollable:!1}),e.height(e.parent().parent().height()),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:"82px",scrollable:!1},{collapsible:!1,resizable:!1,scrollable:!1}]}),e=this.$(".bottom-wrap"),e.kendoSplitter({orientation:"horizontal",panes:s}),e=this.$(".results-wrap"),e.kendoSplitter({orientation:"vertical",panes:[{collapsible
:!1,resizable:!0,size:"30%",min:"10%",max:"90%",scrollable:!1},{collapsible:!1,resizable:!0,scrollable:!1}]}),e=this.$(".index-wrap"),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:"36px",scrollable:!1},{collapsible:!1,resizable:!1,scrollable:!1}]}),e=this.$(".tabular-wrap"),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:"78px",scrollable:!1},{collapsible:!1,resizable:!1,scrollable:!1}]}),e=this.$(".research-wrap"),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:"36px",scrollable:!1},{collapsible
:!1,resizable:!1,scrollable:!1}]}),this.$(".k-splitbar-draggable-horizontal, .k-splitbar-draggable-vertical").focus(function(){E(this).find(".k-resize-handle").addClass("active-border")}).blur(function(){E(this).find(".k-resize-handle").removeClass("active-border")})},t.prototype.resize=function(){var e=this.$el;this.$(".codebooks-wrap").height(e.height()),this.$(".codebooks-wrap").data("kendoSplitter").trigger("resize")},t.prototype.getPCSSections=function(){var e;e={},this.targetDate.length>0&&(e.date=this.targetDate),O.TC.current()._net.codebooksListPCSSections(e,this.setPCSSections,this.handlePCSSectionsFail
)},t.prototype.setPCSSections=function(e){this.sharedProperties.set("pcsSections",e)},t.prototype.handlePCSSectionsFail=function(){var e=this;++this.pcsListSectionFailureCount<=3&&setTimeout(function(){e.getPCSSections()},3e3)},t.prototype.blurSplitters=function(){this.$(".index-wrap").next(".k-splitbar").removeClass(P.activePaneClass).blur(),this.$(".results-wrap").next(".k-splitbar").removeClass(P.activePaneClass).blur()},t}(b.View);t.EncoderView=B}),define("text!controls/references/templates/references.html",[],function(){return'<div class="k-content references searching">\r\n    <div class="references-wrap splitter-wrap">\r\n        <div class="searchbar" data-pane-index="10"></div>\r\n        <div class="bottom-wrap">\r\n            <div class="list-wrap">\r\n                <div class="list-browse"></div>\r\n                <div class="list-title"></div>\r\n                <div class="list-content pane-scrollable" data-pane-index="20">\r\n                    <div class="pane-content pane-text pane-slim-e pane-slim-n"></div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class="detail-outer-wrap">\r\n                    <!-- splitter -->\r\n                    <div class="detail-wrap">\r\n                        <div class="detail-title"></div>\r\n                        <div class="detail-content pane-scrollable" data-pane-index="30"></div>\r\n                        <div class="detail-highlight"></div>\r\n                        <div class="detail-notes-title"></div>\r\n                        <div class="detail-notes pane-scrollable"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<iframe name="references_print_frame" width="0" height="0" frameborder="0" src="<%= printTemplate + \'?v=3.1.0.363\' %>"></iframe>'
}),define("text!controls/common/templates/loading-small.html",[],function(){return'<span class="k-loading k-icon tc-loading">Loading</span>'}),define("text!controls/references/templates/searchbar/searchbar.html",[],function(){return'<% var randomId = Math.random().toString().replace(\'0.\',\'\'); %>\r\n<div class="pane-content form-inline">\r\n    <label for="search-box-<%= randomId %>" class="pad-right">Search for</label>\r\n    <input class="search-box k-input" id="search-box-<%= randomId %>" type="text" placeholder="search terms or code..." />\r\n    <span class="pad-right pad-left">in</span>\r\n    <select class="book-list">\r\n        <% _.each(books, function(item) { %>\r\n        <option value="<%= item.id %>"><%= item.title %></option>\r\n        <% }); %>\r\n    </select>\r\n    <button type="submit" class="search-btn k-button pad-left"<% if (books.length === 0) print(\' disabled="disabled"\'); %>>Search</button>\r\n\r\n    <% if (books.length === 0) { %>\r\n    <span class="k-loading k-icon tc-loading">Loading</span>\r\n    <% } %>\r\n</div>'
}),define("text!controls/references/templates/searchbar/books-error.html",[],function(){return'<span class="alert alert-error books-error">Trouble listing books. <a href="javascript:void(0)" class="books-retry">Try again.</a></span>'});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/views/searchbar",["require","exports","Backbone","underscore","jql","text!controls/common/templates/loading-small.html","text!controls/references/templates/searchbar/searchbar.html","text!controls/references/templates/searchbar/books-error.html"
,"kendoui/kendo.dropdownlist","lib/api","lib/dom","lib/templates","lib/events","lib/shortcuts","controls/references/models/bookCollection"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=n,m=r,g=i,y=s,b=o,w=u,E=a,S=f,x=l,T=c,N=h,C=p,k=d,L=function(e){function t(t){E||!E,this.hub=t.hub,this.template=T.compile(T.tk_referencesSearchbar,b),this.templateBooksError=T.get(T.tk_referencesBooksError,w),this.templateLoading=T.get(T.tk_loadingSmall,y),this.events={click:"tcSetFocus",keydown:"keypressHandler","click .search-btn":"searchOnEvent","click .books-retry":"getBooks","click .search-box":"selectAllSearchbox"
,"focusout .search-box":"searchBlur"},this.scopeName="references:searchbar",this.shortcuts={},this.termSelector=".search-box",this.bookSelector=".book-list option:selected",this.books=new k.BookCollection,this.tryLocalStorage(),this.currentBookId=this.initialBook=t&&t.book?t.book:this.getBookDefault(),this.currentTerm="",this.bookFilters=t.bookFilters||null,e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),S.TC.current().settings.keyboardShortcuts&&(g.extend(this,C.Get()),this.delegateShortcuts()),m.bindAll(this),this.listenTo(this.books,"reset",this.render),
this.listenTo(this.hub,N.ReferencesSearch,this.mockSearch),this.listenTo(this.hub,N.ReferencesClear,this.clear),this.listenTo(this.hub,N.ReferencesSelectBook,this.onSelectBook),this.getBooks()},t.prototype.tryLocalStorage=function(){var e,t;try{t=new Date,(this.storage=window.localStorage).setItem(t,t),e=this.storage.getItem(t)!==t.toString(),this.storage.removeItem(t),e&&(this.storage=!1)}catch(n){}},t.prototype.bookChanging=function(e){this.storage&&this.storage.setItem("references-lastBook",this.$(this.bookSelector).val())},t.prototype.getBookDefault=function(){return this.storage?this.storage
.getItem("references-lastBook")||"":""},t.prototype.onKeyboardFocus=function(){this.selectAllSearchbox()},t.prototype.onClearFocus=function(){},t.prototype.selectAllSearchbox=function(e){var t=this.$(this.termSelector);t.hasClass("focused")||this.$(this.termSelector).select(),t.addClass("focused")},t.prototype.searchBlur=function(e){this.$(this.termSelector).removeClass("focused")},t.prototype.clear=function(){this.$(this.termSelector).val("")},t.prototype.getBooks=function(){this.removeBooksFailure(),this.setLoading(!0),S.TC.current()._net.referencesListBooks(this.setBooks,this.showBooksFailure
)},t.prototype.setBooks=function(e){var t;this.books.reset(e),this.setLoading(!1),t={books:this.books},this.hub.trigger(N.ReferencesListBooksComplete,t)},t.prototype.showBooksFailure=function(){this.setLoading(!1),this.$(".search-btn").attr("disabled","disabled"),this.$(".pane-content").append(this.templateBooksError),this.hub.trigger(N.ReferencesListBooksFailure)},t.prototype.removeBooksFailure=function(){this.$(".books-error").remove()},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?(this.$(".tc-loading").remove(),this.$(".search-btn").removeAttr("disabled")):this.$(".pane-content"
).append(this.templateLoading)},t.prototype.keypressHandler=function(e){if(e.which===13){e.preventDefault(),this.searchOnEvent(e);return}this.bookChanging()},t.prototype.searchOnEvent=function(e){var t;t={term:this.$(this.termSelector).val(),bookId:this.$(this.bookSelector).val(),bookName:this.$(this.bookSelector).text()},g.trim(t.term)!==""&&(this.hub.trigger(N.ReferencesSearch,t),this.$el.closest(".references").addClass("searching").removeClass("browsing"))},t.prototype.mockSearch=function(e){var t;this.currentTerm=e.term,this.currentBookId=e.bookId.toUpperCase(),this.blurAndSetListFocus(),e.
mockUser&&this.selectBook(this.currentBookId)},t.prototype.blurAndSetListFocus=function(){x.blurAll(),this.hub.trigger(N.ReferencesFocusList)},t.prototype.render=function(){var e=this.books.toJSON(),t={close:{duration:0}};return S.TC.current().settings.effects||(t=!1),this.$el.html(this.template({books:e})),this.$("select.book-list").val(this.currentBookId||this.initialBook).kendoDropDownList({animation:t,change:this.bookChanging,dataBound:this.booksSetComplete,height:500}),this.$(this.termSelector).val(this.currentTerm),this},t.prototype.booksSetComplete=function(e){var t=this.$("select.book-list"
).data("kendoDropDownList");this.bookFilters?e.sender.dataSource.data().length&&(t.unbind("dataBound"),e.sender.dataSource.filter(this.bookFilters)):t.unbind("dataBound")},t.prototype.handleError=function(e){},t.prototype.onSelectBook=function(e){this.selectBook(e.bookId)},t.prototype.selectBook=function(e){e&&e.length&&(e=e.toUpperCase());var t=this.$("select.book-list").data("kendoDropDownList");t&&(t.select(function(t){return t.value===e}),this.bookChanging())},t}(v.View);t.SearchbarView=L}),define("text!controls/references/templates/list/browse.html",[],function(){return'<div class="pane-content">\r\n    <div class="button-holder">\r\n        <select class="book-list ddl-menu">\r\n            <option value="-1">Browse...</option>\r\n    <% if (canListBooks.length > 0) { %>\r\n        <% _.each(canListBooks, function(item) { %>\r\n            <option value="<%= item.id %>">Browse <%= item.title %></option>\r\n        <% }); %>\r\n    <% } %>\r\n        </select>\r\n    </div>\r\n</div>'
}),define("text!controls/references/templates/list/search.html",[],function(){return'<div class="pane-content pane-slim-n pane-slim-e pane-text search" style="height: <%= resultsHeight %>">\r\n<% _.each(results, function(group) { %>\r\n\r\n    <!-- CDR only supports code searching -->\r\n\r\n    <% switch (group.book) {\r\n        case \'DRUGS\': { %>\r\n            <div class="accordion-group">\r\n                <div class="section-heading accordion-heading<% if (group.results.length > 0) { print(\' collapsible\'); } else { print(\' empty\'); } %>">\r\n                    <div class="accordion-toggle">\r\n                        <a href="javascript:void(0)" class="section-expander">\r\n                            <span class="toggle-icon k-icon k-minus"></span>\r\n                            <span class="section-title"><%= group.name || TextBook[group.book] || group.book %></span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="section-items accordion-body">\r\n                    <div class="accordion-inner">\r\n                    <% if (group.results.length === 0) { %>\r\n                        <div class="not-found"><em>The terms you entered could not be found.</em></div>\r\n                    <% } %>\r\n                    <% _.each(group.results, function(articleGroup) { %>\r\n                        <ul data-book="<%= group.book %>"<% if (group.type === \'indication\') { print(\' class="indication-group"\'); } else { print(\' class="results-\' + articleGroup.name.toLowerCase() + \'"\'); } %>>\r\n                        <% if (group.type === \'indication\') { %>\r\n                            <li class="indication"><span class="k-icon k-plus"></span><span class="indication-group-name"><%= articleGroup.name %></span>\r\n                                <ul>\r\n                            <% _.forEach(articleGroup.articles, function(article, i) { %>\r\n                                    <li id="indication-<%= article.article_id %>" class="indication-child<% if (i === 0) { print(\' first\'); } %><% if (i === articleGroup.articles.length - 1) { print(\' last\'); } %>" data-article-id="<%= article.article_id %>"><a href="javascript:void(0)"><%= article.article_title.replace(/(\\w)([\\\\\\/])(\\w)/g, "$1 $2 $3") %></a></li>\r\n                            <% }); %>\r\n                                </ul>\r\n                            </li>\r\n                        <% } else { %>\r\n                            <% _.each(articleGroup.articles, function(article) { %>\r\n                            <li id="article-<%= article.article_id %>" data-book="<%= group.book %>" data-article-id="<%= article.article_id %>" title="<%= articleGroup.name %> Result">\r\n                                <a href="javascript:void(0)"><%= article.article_title.replace(/(\\w)([\\\\\\/])(\\w)/g, "$1 $2 $3") %></a></em>\r\n                            </li>\r\n                            <% }); %>\r\n                        <% } %>\r\n                        </ul>\r\n                    <% }); %>\r\n                    </div>\r\n                </div>\r\n            </div>   \r\n        <% }\r\n        break;\r\n        case \'DICTIONARY\': { %>\r\n            <% if (group.results.length === 0) { %>\r\n                <div class="not-found"><em>The terms you entered could not be found.</em></div>\r\n            <% } %>\r\n            <% _.each(group.results, function(articleGroup) { %>\r\n                <ul data-book="<%= group.book %>" class="results-<%= articleGroup.name.toLowerCase() %>">\r\n                <% _.each(articleGroup.articles, function(article) { %>\r\n                    <li id="article-<%= article.article_id %>" data-book="<%= group.book %>" id="article-<%= article.article_id %>" data-article-id="<%= article.article_id %>" title="<%= articleGroup.name %> Result">\r\n                        <a href="javascript:void(0)"><%= article.article_title.replace(/(\\w)([\\\\\\/])(\\w)/g, "$1 $2 $3") %></a></em>\r\n                    </li>\r\n                <% }); %>\r\n                </ul>\r\n            <% }); %>\r\n        <% }\r\n        break;\r\n        case \'INTERVENTIONAL_RADIOLOGY\': { %>\r\n            <% if (group.type === \'code\') { %>\r\n            <div class="accordion-group">\r\n                <div class="section-heading accordion-heading<% if (group.results.length > 0) { print(\' collapsible\'); } else { print(\' empty\'); } %>">\r\n                    <div class="accordion-toggle">\r\n                        <a href="javascript:void(0)" class="section-expander">\r\n                            <span class="toggle-icon k-icon k-minus"></span>\r\n                            <span class="section-title"><%= TextBook[group.name] || TextBook[group.book] || group.name || group.book %></span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="section-items accordion-body">\r\n                    <div class="accordion-inner">\r\n            <% } %>\r\n\r\n                    <% if (group.results.length === 0) { %>\r\n                        <% if (group.type === \'code\') { %>\r\n                        <div class="not-found"><em>The code you entered could not be found.</em></div>\r\n                        <% } else { %>\r\n                        <div class="not-found"><em>The terms you entered could not be found.</em></div>\r\n                        <% } %>\r\n                    <% } %>\r\n                    <% _.each(group.results, function(articleGroup) { %>\r\n                        <ul data-book="<%= group.book %>" class="results-<%= articleGroup.name.toLowerCase() %>">\r\n                        <% _.each(articleGroup.articles, function(article) { %>\r\n                            <li id="article-<%= article.article_id %>" data-issue-title="<%= article.details.issue_title %>" data-book="<%= group.book %>" data-issue-year="<%= article.details.issue_year %>" data-article-id="<%= article.article_id %>" title="<%= articleGroup.name %> Result">\r\n                                <a href="javascript:void(0)"><%= article.article_title.replace(/(\\w)([\\\\\\/])(\\w)/g, "$1 $2 $3") %></a>, <em><%= article.details.issue_year %></em>\r\n                            </li>\r\n                        <% }); %>\r\n                        </ul>\r\n                    <% }); %>\r\n\r\n            <% if (group.type === \'code\') { %>\r\n                    </div>\r\n                </div>\r\n            </div>       \r\n            <% } %>\r\n    \r\n        <% }\r\n        break;\r\n        default: { %>\r\n            <% if (group.type === \'code\') { %>\r\n            <div class="accordion-group">\r\n                <div class="section-heading accordion-heading<% if (group.results.length > 0) { print(\' collapsible\'); } else { print(\' empty\'); } %>">\r\n                    <div class="accordion-toggle">\r\n                        <a href="javascript:void(0)" class="section-expander">\r\n                            <span class="toggle-icon k-icon k-minus"></span>\r\n                            <span class="section-title"><%= TextBook[group.name] || TextBook[group.book] || group.name || group.book %></span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="section-items accordion-body">\r\n                    <div class="accordion-inner">\r\n            <% } %>\r\n\r\n                    <% if (group.results.length === 0) { %>\r\n                        <% if (group.type === \'code\') { %>\r\n                        <div class="not-found"><em>The code you entered could not be found.</em></div>\r\n                        <% } else { %>\r\n                            <% if (group.book === \'CDR\') { %>\r\n                            <div class="not-found"><em>This reference cannot be searched by term. Please enter a full or partial CPT code.</em></div>\r\n                            <% } else { %>\r\n                            <div class="not-found"><em>The terms you entered could not be found.</em></div>\r\n                            <% } %>\r\n                        <% } %>\r\n                    <% } %>\r\n                    <% _.each(group.results, function(articleGroup) { %>\r\n                        <ul data-book="<%= group.book %>" class="results-<%= articleGroup.name.toLowerCase() %>">\r\n                        <% _.each(articleGroup.articles, function(article) { %>\r\n                            <li id="article-<%= article.article_id %>" data-issue-title="<%= article.details.issue_title %>" data-book="<%= group.book %>" data-issue-year="<%= article.details.issue_year %>" data-article-id="<%= article.article_id %>" title="<%= articleGroup.name %> Result">\r\n                                <a href="javascript:void(0)"><%= article.article_title.replace(/(\\w)([\\\\\\/])(\\w)/g, "$1 $2 $3") %></a>, <em><%= article.details.issue_title %></em>\r\n                            </li>\r\n                        <% }); %>\r\n                        </ul>\r\n                    <% }); %>\r\n\r\n            <% if (group.type === \'code\') { %>\r\n                    </div>\r\n                </div>\r\n            </div>       \r\n            <% } %>\r\n    \r\n        <% }\r\n        break;\r\n    } %>\r\n<% }); %>\r\n</div>'
}),define("text!controls/references/templates/list/title.html",[],function(){return'<div class="pane-content pane-slim-s pane-slim-e">\r\n    <div class="heading-slim"><span><% if (type === \'browse\') { %>Browse <%= bookTitle %><% } else { %>Search Results<% } %></span></div>\r\n</div>'}),define("text!controls/references/templates/list/tree.html",[],function(){return'<div class="pane-content pane-slim-n pane-slim-e pane-text tree" style="height: <%= resultsHeight %>">\r\n    <div class="tree k-content">\r\n        <ul class="treeview">\r\n        <% if (data) { %>\r\n            <% _.each(data.Years, function(year) { %>\r\n            <li data-book="<%= data.Book %>" data-year="<%= year %>"><%= year %>\r\n                <ul>\r\n                    <li><span class="k-loading k-icon tc-loading"></span></li>\r\n                </ul>\r\n            </li>\r\n            <% }); %>\r\n        <% } %>\r\n        </ul>\r\n    </div>\r\n</div>'
});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/models/searchResult",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults={name:"",type:"",book:"",results:[]},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(){},t}(r.Model);t.SearchResult=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/models/searchResultCollection",["require","exports"
,"Backbone","controls/references/models/searchResult"],function(e,t,n,r){var i=n,s=r,o=function(e){function t(t,n){this.model=s.SearchResult,e.call(this,t,n)}return __extends(t,e),t.prototype.initialize=function(){},t}(i.Collection);t.SearchResultCollection=o});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/models/browse",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults=function(){return{Book:null,Years:null,Issues:null,Articles:null}},e.call(this
,t)}return __extends(t,e),t.prototype.initialize=function(){},t}(r.Model);t.Browse=i}),define("kendoui/kendo.treeview",["kendoui/kendo.jquery","kendoui/kendo.core","kendoui/kendo.draganddrop","kendoui/kendo.userevents","kendoui/kendo.data","kendoui/kendo.fx"],function(e,t){function q(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function R(e){return t.template(e,{useWithBlock:!1})}function U(e){return e.children("div").find(".k-checkbox:first :checkbox")}function z(e){return function(t,n){n=n.closest(O);var r=n.parent(),i;return r.parent(
).is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,r){return this._insert(t.data(),r,n.index()+e)})}}function W(t){var n=t.children("div"),r=t.children("ul"),i=n.children(".k-icon"),s=t.children(":checkbox"),o=n.children(".k-in"),u,a;if(t.hasClass("k-treeview"))return;n.length||(n=e("<div />").prependTo(t));if(!i.length&&r.length)i=e("<span class='k-icon' />").prependTo(n);else if(!r.length||!r.children().length)i.remove(),r.remove();s.length&&e("<span class='k-checkbox' />").appendTo(n).append(s);if(!o.length&&n.length){o=e("<span class='k-in' />").appendTo(n)[0],u=n[0].nextSibling
,o=n.find(".k-in")[0];while(u&&u.nodeName.toLowerCase()!="ul")a=u,u=u.nextSibling,a.nodeType==3&&(a.nodeValue=e.trim(a.nodeValue)),o.appendChild(a)}}function X(e){var r=this;r.treeview=e,r.hovered=e.element,r._draggable=new n.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:t.support.touch||t.support.msPointers||t.support.pointers?-40/t.support.zoomLevel():10},dragstart:f(r.dragstart,r),dragcancel:f(r.dragcancel,r),drag:f(r.drag,r),dragend:f(r.dragend,r)})}var n=t.ui,r=
t.data,i=e.extend,s=t.template,o=e.isArray,u=n.Widget,a=r.HierarchicalDataSource,f=e.proxy,l=t.keys,c=".kendoTreeView",h="select",p="navigate",d="expand",v="change",m="error",g="checked",y="collapse",b="dragstart",w="drag",E="drop",S="dragend",x="dataBound",T="click",N="visibility",C="undefined",k="k-state-hover",L="k-treeview",A=":visible",O=".k-item",M="string",_="aria-selected",D="aria-disabled",P,H,B,j,F={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},I=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof 
e=="object"&&e.nodeType===1&&typeof e.nodeName===M};H=q(".k-group"),B=q(".k-group,.k-content"),j=function(e){return e.children("div").children(".k-icon")},P=u.extend({init:function(e,n){var r=this,i,s=!1,a=n&&!!n.dataSource,f;o(n)&&(i=!0,n={dataSource:n}),n&&typeof n.loadOnDemand==C&&o(n.dataSource)&&(n.loadOnDemand=!1),u.prototype.init.call(r,e,n),e=r.element,n=r.options,f=e.is("ul")&&e||e.hasClass(L)&&e.children("ul"),s=!a&&f.length,s&&(n.dataSource.list=f),r._animation(),r._accessors(),r._templates(),e.hasClass(L)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),f&&(r.root=e,r._group
(r.wrapper))),r._tabindex(),r.wrapper.filter("[role=tree]").length||r.wrapper.attr("role","tree"),r._dataSource(s),r._attachEvents(),r._dragging(),s?r._attachUids():n.autoBind&&(r._progress(!0),r.dataSource.fetch()),n.checkboxes&&n.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=t.format("{0}_tv_active",r.element[0].id))},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",r="mouseenter";t.wrapper.on(r+c,".k-in.k-state-selected",function(e){e.preventDefault()}).on(r+c,n,function(){e(this).addClass(k)}).on("mouseleave"+c,n,function(
){e(this).removeClass(k)}).on(T+c,n,f(t._click,t)).on("dblclick"+c,".k-in:not(.k-state-disabled)",f(t._toggleButtonClick,t)).on(T+c,".k-plus,.k-minus",f(t._toggleButtonClick,t)).on("keydown"+c,f(t._keydown,t)).on("focus"+c,f(t._focus,t)).on("blur"+c,f(t._blur,t)).on("mousedown"+c,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",f(t._mousedown,t)).on("change"+c,".k-checkbox :checkbox",f(t._checkboxChange,t)).on("click"+c,".k-checkbox :checkbox",f(t._checkboxClick,t)).on("click"+c,".k-request-retry",f(t._retryRequest,t)).on("click"+c,function(n){e(n.target).is(":focusable")||t.focus()})},_checkboxClick
:function(t){var n=e(t.target);n.data("indeterminate")&&(n.data("indeterminate",!1).prop("indeterminate",!1).prop(g,!0),this._checkboxChange(t))},_attachUids:function(n,r){var i=this,s,o=t.attr("uid");n=n||i.root,r=r||i.dataSource,s=r.view(),n.children("li").each(function(t,n){n=e(n).attr(o,s[t].uid),n.attr("role","treeitem"),i._attachUids(n.children("ul"),s[t].children)})},_animation:function(){var e=this.options,t=e.animation;if(t===!1)t={expand:{effects:{}},collapse:{hide:!0,effects:{}}};else if(!t.collapse||!("effects"in t.collapse))t.collapse=i({reverse:!0},t.expand);i(t.collapse,{hide:!0}
),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new X(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,n=e.options,r=f(e._fieldAccessor,e);n.template&&typeof n.template==M?n.template=s(n.template):n.template||(n.template=R("# var text = "+r("text")+"(data.item); #"+"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",r=t.index;return e.firstLevel&&r===0&&(n+=" k-first"
),r==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",r=t.index,i=e.length-1;return e.firstLevel&&r===0&&(n+="k-top "),r===0&&r!=i?n+="k-top":r==i?n+="k-bot":n+="k-mid",n},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return e.expanded!==!0?t+=" k-plus":t+=" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"
),t},dragClue:R("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:R("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) # role='group'>#= data.renderItems(data) #</ul>"),itemContent:R("# var imageUrl = "+r("imageUrl")+"(data.item); #"+"# var spriteCssClass = "+r("spriteCssClass")+"(data.item); #"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #'>"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #' />"+"# } #"+"#= data.treeview.template(data) #"
),itemElement:R("# var item = data.item, r = data.r; ## var url = "+r("url")+"(item); #"+"<div class='#= r.cssClass(data.group, item) #'>"+"# if (item.hasChildren) { #"+"<span class='#= r.toggleButtonClass(item) #' role='presentation' />"+"# } #"+"# if (data.treeview.checkboxes) { #"+"<span class='k-checkbox' role='presentation'>"+"#= data.treeview.checkboxes.template(data) #"+"</span>"+"# } #"+"# var tag = url ? 'a' : 'span'; #"+"# var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #"+"<#=tag#  class='#= r.textClass(item) #'#= textAttr #>"+"#= r.itemContent(data) #"+"</#=tag#>"+"</div>"),item
:R("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+t.attr("uid")+"='#= item.uid #'"+"#=item.selected ? \"aria-selected='true'\" : ''#"+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+">"+"#= r.itemElement(data) #"+"</li>"),loading:R("<div class='k-icon k-loading' /> Loading..."),retry:R("Request failed. <button class='k-button k-request-retry'>Retry</button>")}},items:function(){return this.element.find(".k-item")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},_bindDataSource
:function(){this._refreshHandler=f(this.refresh,this),this._errorHandler=f(this._error,this),this.dataSource.bind(v,this._refreshHandler),this.dataSource.bind(m,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(v,this._refreshHandler),e.unbind(m,this._errorHandler))},_dataSource:function(e){function i(e){for(var t=0;t<e.length;t++)e[t]._initChildren(),e[t].children.fetch(),i(e[t].children.view())}var t=this,n=t.options,r=n.dataSource;r=o(r)?{data:r}:r,t._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"
}]),t.dataSource=r=a.create(r),e&&(r.fetch(),i(r.view())),t._bindDataSource()},events:[b,w,E,S,x,d,y,h,v,p],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e=this,n=e.options,r,i,s,u=e.element;for(r in F)i=n[F[r]],s=u.attr(t.attr(r+"-field")),!i&&s&&(i=s),i||(i=r),o(i)||(i=[i]),n[F[r]]=i},_fieldAccessor:function(n){var r=this.options[F[n]],i=r.length,s="(function(item) {";return i===0?s+="return item['"+n+"'];"
:(s+="var levels = ["+e.map(r,function(e){return"function(d){ return "+t.expr(e)+"}"}).join(",")+"];",s+="return levels[Math.min(item.level(), "+i+"-1)](item)"),s+="})",s},setOptions:function(e){u.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(O)[0]})},_setChecked:function(t,n){if(!t||!e.isFunction(t.view))return;for(var r=0,i=t.view();r<i.length;r++)i[r][g]=n,i[r].children&&this._setChecked(i[r].children,n)},_setIndeterminate:function(e){var t=H(e),n,r,i=!0,s;if(!t.length)return;n=U(t.children()),r=n
.length;if(!r)return;if(r>1){for(s=1;s<r;s++)if(n[s].checked!=n[s-1].checked||n[s].indeterminate||n[s-1].indeterminate){i=!1;break}}else i=!n[0].indeterminate;U(e).data("indeterminate",!i).prop("indeterminate",!i).prop(g,i&&n[0].checked)},updateIndeterminate:function(e){e=e||this.wrapper;var t=H(e).children(),n;if(t.length){for(n=0;n<t.length;n++)this.updateIndeterminate(t.eq(n));this._setIndeterminate(e)}},_bubbleIndeterminate:function(e){var t=this.parent(e),n;t.length&&(this._setIndeterminate(t),n=t.children("div").find(".k-checkbox :checkbox"),n.prop("indeterminate")===!1?this.dataItem(t).set
(g,n.prop(g)):this.dataItem(t).checked=!1,this._bubbleIndeterminate(t))},_checkboxChange:function(t){var n=e(t.target),r=n.prop(g),i=n.closest(O);this.dataItem(i).set(g,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(O))},_mousedown:function(t){var n=e(t.currentTarget).closest(O);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var n=this.select(),r=this._clickTarget;if(t.support.touch)return;r&&r.length&&(n=r),this._focusable(n)||(n=this.current()),this._focusable
(n)||(n=this._nextVisible(e())),this.current(n)},focus:function(){var e=this.wrapper,t=e[0],n=[],r=[],i=document.documentElement,s;do t=t.parentNode,t.scrollHeight>t.clientHeight&&(n.push(t),r.push(t.scrollTop));while(t!=i);e.focus();for(s=0;s<n.length;s++)n[s].scrollTop=r[s]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n=/\bk-treeview\b/,r=/\bk-item\b/,i,s;typeof t==M&&(t=this.element.find(t)),I(t)||(t=t[0]),s=r.test(t.className);do t=t.parentNode
,r.test(t.className)&&(s?i=t:s=!0);while(!n.test(t.className)&&!i);return e(i)},_nextVisible:function(e){function i(e){while(e.length&&!e.next().length)e=t.parent(e);return e.next().length?e.next():e}var t=this,n=t._expanded(e),r;return!e.length||!e.is(":visible")?r=t.root.children().eq(0):n?(r=H(e).children().first(),r.length||(r=i(e))):r=i(e),t._enabled(r)||(r=t._nextVisible(r)),r},_previousVisible:function(e){var t=this,n,r;if(!e.length||e.prev().length){e.length?r=e.prev():r=t.root.children().last();while(t._expanded(r)){n=H(r).children().last();if(!n.length)break;r=n}}else r=t.parent(e)||e
;return t._enabled(r)||(r=t._previousVisible(r)),r},_keydown:function(n){var r=this,i=n.keyCode,s,o=r.current(),u=r._expanded(o),a=o.find(".k-checkbox:first :checkbox"),f=t.support.isRtl(r.element);if(n.target!=n.currentTarget)return;!f&&i==l.RIGHT||f&&i==l.LEFT?u?s=r._nextVisible(o):r.expand(o):!f&&i==l.LEFT||f&&i==l.RIGHT?u?r.collapse(o):(s=r.parent(o),r._enabled(s)||(s=undefined)):i==l.DOWN?s=r._nextVisible(o):i==l.UP?s=r._previousVisible(o):i==l.HOME?s=r._nextVisible(e()):i==l.END?s=r._previousVisible(e()):i==l.ENTER?o.find(".k-in:first").hasClass("k-state-selected")||r._trigger(h,o)||r.select
(o):i==l.SPACEBAR&&a.length&&(a.prop(g,!a.prop(g)).data("indeterminate",!1).prop("indeterminate",!1),r._checkboxChange({target:a}),s=o),s&&(n.preventDefault(),o[0]!=s[0]&&(r._trigger(p,s),r.current(s)))},_click:function(t){var n=this,r=e(t.currentTarget),i=B(r.closest(O)),s=r.attr("href"),o;s?o=s=="#"||s.indexOf("#"+this.element.id+"-")>=0:o=i.length&&!i.children().length,o&&t.preventDefault(),!r.hasClass(".k-state-selected")&&!n._trigger(h,r)&&n.select(r)},_wrapper:function(){var e=this,t=e.element,n,r,i="k-widget k-treeview";t.is("ul")?(n=t.wrap("<div />").parent(),r=t):(n=t,r=n.children("ul"
).eq(0)),e.wrapper=n.addClass(i),e.root=r},_group:function(e){var t=this,n=e.hasClass(L),r={firstLevel:n,expanded:n||t._expanded(e)},i=e.children("ul");i.addClass(t.templates.groupCssClass(r)).css("display",r.expanded?"":"none"),t._nodes(i,r)},_nodes:function(t,n){var r=this,s=t.children("li"),o;n=i({length:s.length},n),s.each(function(t,i){i=e(i),o={index:t,expanded:r._expanded(i)},W(i),r._updateNodeClasses(i,n,o),r._group(i)})},_checkboxes:function(){var e=this.options,t=e.checkboxes,n;if(t||e.checkboxTemplate)e.checkboxTemplate?n=e.checkboxTemplate:(n="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #"
,t.name&&(n+=" name='"+t.name+"'"),n+=" />"),t=i({template:n},e.checkboxes),typeof t.template==M&&(t.template=s(t.template)),e.checkboxes=t},_updateNodeClasses:function(e,t,n){var r=e.children("div"),i=e.children("ul"),s=this.templates;if(e.hasClass("k-treeview"))return;n=n||{},n.expanded=typeof n.expanded!=C?n.expanded:this._expanded(e),n.index=typeof n.index!=C?n.index:e.index(),n.enabled=typeof n.enabled!=C?n.enabled:!r.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=C?t.firstLevel:e.parent().parent().hasClass(L),t.length=typeof t.length!=C?t.length:e
.parent().children().length,e.removeClass("k-first k-last").addClass(s.wrapperCssClass(t,n)),r.removeClass("k-top k-mid k-bot").addClass(s.cssClass(t,n)),r.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(s.textClass(n));if(i.length||e.attr("data-hasChildren")=="true")r.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(s.toggleButtonClass(n)),i.addClass("k-group")},_processNodes:function(t,n){var r=this;r.element.find(t).each(function(t,i){n.call(r,t,e(i).closest(O))})},dataItem:function(n){var r=e(n).closest(O).attr(t.attr
("uid")),i=this.dataSource;return i&&i.getByUid(r)},_insertNode:function(t,n,r,i,s){var o=this,u=H(r),a=u.children().length+1,f,l={firstLevel:r.hasClass(L),expanded:!s,length:a},c,h,p,d="",v=function(e,t){e.appendTo(t)};for(h=0;h<t.length;h++)p=t[h],p.index=n+h,d+=o._renderItem({group:l,item:p});c=e(d);if(!c.length)return;u.length||(u=e(o._renderGroup({group:l})).appendTo(r)),i(c,u),r.hasClass("k-item")&&(W(r),o._updateNodeClasses(r)),o._updateNodeClasses(c.prev().first()),o._updateNodeClasses(c.next().last());for(h=0;h<t.length;h++)p=t[h],p.hasChildren&&(f=p.children.data(),f.length&&o._insertNode
(f,p.index,c.eq(h),v,!o._expanded(c.eq(h))));return c},_updateNode:function(t,n){function c(){l=!0}function h(e,t){e.find(".k-checkbox :checkbox").prop(g,t).data("indeterminate",!1).prop("indeterminate",!1)}var r=this,i,s,o,u,a,f={treeview:r.options,item:o},l=!1;if(t=="selected")o=n[0],s=r.findByUid(o.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",o[t]).end(),o[t]?(r.current(s),s.attr(_,!0)):s.attr(_,!1);else{e.inArray(t,r.options.dataTextField)>=0?l=!0:(f.item=n[0],f.item.bind("get",c),r.templates.itemContent(f),f.item.unbind("set",c));for(i=0;i<n.length;i++
)f.item=o=n[i],(t=="spriteCssClass"||t=="imageUrl"||l)&&r.findByUid(o.uid).find(">div>.k-in").html(r.templates.itemContent(f)),t==g?(s=r.findByUid(o.uid),u=o[t],h(s.children("div"),u),r.options.checkboxes.checkChildren&&(h(s.children(".k-group"),u),r._setChecked(o.children,u),r._bubbleIndeterminate(s))):t=="expanded"?r._toggle(r.findByUid(o.uid),o,o[t]):t=="enabled"&&(s=r.findByUid(o.uid),s.find(".k-checkbox :checkbox").prop("disabled",!o[t]),a=!B(s).is(A),s.removeAttr(D),o[t]||(o.selected&&o.set("selected",!1),o.expanded&&o.set("expanded",!1),a=!0,s.removeAttr(_).attr(D,!0)),r._updateNodeClasses
(s,{},{enabled:o[t],expanded:!a}))}},refresh:function(e){function c(e,n){var r=H(n),i=r.children(),s=!t._expanded(n);typeof o==C&&(o=i.length),t._insertNode(e,o,n,function(e,t){o==i.length?e.appendTo(t):e.insertBefore(i.eq(o))},s),t._expanded(n)&&(t._updateNodeClasses(n),H(n).css("display","block"))}var t=this,n=t.wrapper,r=e.node,i=e.action,s=e.items,o=e.index,u=t.options,a=u.loadOnDemand,f=u.checkboxes&&u.checkboxes.checkChildren,l;if(e.field)return t._updateNode(e.field,s);r&&(n=t.findByUid(r.uid),t._progress(n,!1));if(f&&i!="remove"&&r&&r.checked)for(l=0;l<s.length;l++)s[l].checked=!0;i=="add"?
c(s,n):i=="remove"?t._remove(t.findByUid(s[0].uid),!1):r?(H(n).empty(),s.length?c(s,n):W(n)):t.root=t.wrapper.html(t._renderGroup({items:s,group:{firstLevel:!0,expanded:!0}})).children("ul");for(l=0;l<s.length;l++)(!a||s[l].expanded)&&s[l].load();t.trigger(x,{node:r?n:undefined})},_error:function(e){var t=this,n=e.node&&t.findByUid(e.node.uid);n?(this._progress(n,!1),this._expanded(n,!1),j(n).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(this.templates.retry))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes
(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=arguments.length==2?!!t:!0,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(t){var n=this,r=n._current,i=n.element,s=n._ariaId;if(arguments.length>0&&t&&t.length){r&&(r[0].id===s&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=n._current=e(t,i).closest(O),r.find(".k-in:first").addClass("k-state-focused"),s=r[0].id||s,s&&(n.wrapper.removeAttr("aria-activedescendant"),r.attr("id",s),n.wrapper.attr
("aria-activedescendant",s));return}return r||(r=n._nextVisible(e())),r},select:function(t){var n=this,r=n.element;if(!arguments.length)return r.find(".k-state-selected").closest(O);t=e(t,r).closest(O),r.find(".k-state-selected").each(function(){var e=n.dataItem(this);e.set("selected",!1),delete e.selected}),t.length&&n.dataItem(t).set("selected",!0),n.trigger(v)},_toggle:function(e,t,n){var r=this,s=r.options,o=B(e),u=n?"expand":"collapse",a=s.animation[u],f;if(o.data("animating"))return;if(!r._trigger(u,e)){r._expanded(e,n),f=t&&t.loaded();if(f&&o.children().length>0){r._updateNodeClasses(e,{
},{expanded:n});if(o.css("display")==(n?"block":"none"))return;n||o.css("height",o.height()).css("height"),o.kendoStop(!0,!0).kendoAnimate(i({reset:!0},a,{complete:function(){n&&o.css("height","")}}))}else n&&(s.loadOnDemand&&r._progress(e,!0),o.remove(),t.load())}},toggle:function(t,n){t=e(t);if(!j(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled"))return;arguments.length==1&&(n=!this._expanded(t)),this._expanded(t,n)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(c),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),t.destroy(e.element)},_expanded:function(e,n
){var r=t.attr("expanded"),i=this.dataItem(e);if(arguments.length==1)return e.attr(r)==="true"||i&&i.expanded;if(B(e).data("animating"))return;i&&(i.set("expanded",n),n=i.expanded),n?(e.attr(r,"true"),e.attr("aria-expanded","true")):(e.removeAttr(r),e.attr("aria-expanded","false"))},_progress:function(e,t){var n=this.element;arguments.length==1?(t=e,t?n.html(this.templates.loading):n.empty()):j(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,t){var n=this.dataItem(e),r=this.options[F.text],i=n.level(),s=r.length,o=r[Math.min(i,s-1)];if(!t)return n[o];n.set(o,t)},_objectOrSelf
:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,n,r){var i,s=this._objectOrSelf(n||t),o=s.dataSource;if(n&&n[0]!=s.element[0]){i=s.dataItem(n),i.loaded()||(s._progress(n,!0),i.load());if(n!=this.root){o=i.children;if(!o||!(o instanceof a))i._initChildren(),i.loaded(!0),o=i.children}}return e=this._toObservableData(e),r.call(this,o,e)},_toObservableData:function(n){var r=n,i,s;if(n instanceof window.jQuery||I(n))i=this._objectOrSelf(n).dataSource,s=e(n).attr(t.attr("uid")),r=i.getByUid(s),r&&(r=i.remove(r));return r},_insert:function(
e,n,r){n instanceof t.data.ObservableArray?n=n.toJSON():o(n)||(n=[n]);var i=e.parent();return i&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[r,0].concat(n)),this.findByUid(e[r].uid)},insertAfter:z(1),insertBefore:z(0),append:function(t,n,r){var i=this,s=i.root;return r=r||e.noop,n&&(s=H(n)),i._dataSourceMove(t,s,n,function(e,t){function o(){n&&i._expanded(n,!0);var r=e.data(),s=Math.max(r.length,0);return i._insert(r,t,s)}var s;return e.data()?(s=o(),r(s),s):(e.one(v,function(){r(o())}),null)})},_remove:function(t,n){var r=this,i,s,o;return t=e(t,r.element),i=t.parent().parent(),s=t.
prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(W(i),r._updateNodeClasses(i)),r._updateNodeClasses(s),r._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,r){return e(r).text()==t}).closest(O)},findByUid:function(e){return this.element.find(".k-item["+t.attr("uid")+"="+e+"]")},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(
e){var t=this;return e.renderItems=function(e){var n="",r=0,i=e.items,s=i?i.length:0,o=e.group;o.length=s;for(;r<s;r++)e.group=o,e.item=i[r],e.item.index=r,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),X.prototype={_removeTouchHover:function(){var e=this;t.support.touch&&e.hovered&&(e.hovered.find("."+k).removeClass(k),e.hovered=!1)},_hintStatus:function(t){var n=this._draggable.hint.find(".k-drag-status")[0];if(!t)return e.trim(n.className.replace(/k-(icon|drag-status)/g,""));n.className="k-icon k-drag-status "+t},dragstart:function(t){var n=this,r=n.treeview,i=n.sourceNode=
t.currentTarget.closest(O);r.trigger(b,{sourceNode:i[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(N,"hidden").appendTo(r.element)},drag:function(n){var r=this,i=r.treeview,s=r.sourceNode,o=r.dropTarget=e(t.eventTarget(n)),u,a=o.closest(".k-treeview"),f,l,c,h,p,d,v,m,g;a.length?e.contains(s[0],o[0])?u="k-denied":(u="k-insert-middle",f=o.closest(".k-top,.k-mid,.k-bot"),f.length?(c=f.outerHeight(),h=t.getOffset(f).top,p=o.closest(".k-in"),d=c/(p.length>0?4:2),v=n.y.location<h+d,m=h+c-d<n.y.location,r._removeTouchHover(),g=p.length&&!v&&!m,r.hovered=g?a:!1,r.dropHint.css
(N,g?"hidden":"visible"),p.toggleClass(k,g),g?u="k-add":(l=f.position(),l.top+=v?0:c,r.dropHint.css(l)[v?"prependTo":"appendTo"](o.closest(O).children("div:first")),v&&f.hasClass("k-top")&&(u="k-insert-top"),m&&f.hasClass("k-bot")&&(u="k-insert-bottom"))):o[0]!=r.dropHint[0]&&(a[0]!=i.element[0]?u="k-add":u="k-denied")):(u="k-denied",r._removeTouchHover()),i.trigger(w,{sourceNode:s[0],dropTarget:o[0],pageY:n.y.location,pageX:n.x.location,statusClass:u.substring(2),setStatusClass:function(e){u=e}}),u.indexOf("k-insert")!==0&&r.dropHint.css(N,"hidden"),r._hintStatus(u)},dragcancel:function(){this
.dropHint.remove()},dragend:function(){function f(e){t.trigger(S,{sourceNode:e&&e[0],destinationNode:i[0],dropPosition:n})}var e=this,t=e.treeview,n="over",r=e.sourceNode,i,s=e.dropHint,o=e.dropTarget,u,a;s.css(N)=="visible"?(n=s.prevAll(".k-in").length>0?"after":"before",i=s.closest(O)):o&&(i=o.closest(O),i.length||(i=o.closest(".k-treeview"))),u={sourceNode:r[0],destinationNode:i[0],valid:e._hintStatus()!="k-denied",setValid:function(e){this.valid=e},dropTarget:o[0],dropPosition:n},a=t.trigger(E,u),s.remove(),e._removeTouchHover();if(!u.valid||a){e._draggable.dropped=u.valid;return}e._draggable
.dropped=!0,n=="over"?t.append(r,i,f):(n=="before"?r=t.insertBefore(r,i):n=="after"&&(r=t.insertAfter(r,i)),f(r))},destroy:function(){this._draggable.destroy()}},n.plugin(P)});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/views/list",["require","exports","Backbone","underscore","jql","vendor/jquery/plugins/jquery.scrollTo","text!controls/common/templates/loading-large.html","text!controls/references/templates/list/browse.html","text!controls/references/templates/list/search.html","text!controls/references/templates/list/title.html"
,"text!controls/references/templates/list/tree.html","lib/api","lib/templates","lib/net","lib/events","lib/shortcuts","controls/references/models/searchResultCollection","controls/references/models/browse","kendoui/kendo.core","kendoui/kendo.treeview","kendoui/kendo.dropdownlist","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=n,x=r,T=i,N=s,C=o,k=u,L=a,A=f,O=l,M=c,_=h,D=p,P=d,H=v,B=m,j=g,F=y,I=b,q=w,R=E,U={TREE:"tree",SEARCH:"search"},z=function(e){function t(t){N||!N,F||!F,I||!I,q||!q,this.hub=t.hub,this.templateSearch=_.compile(_.tk_referencesListSearchResults
,L),this.templateTitle=_.compile(_.tk_referencesListTitle,A),this.templateTree=_.compile(_.tk_referencesListTree,O),this.templateBrowse=_.compile(_.tk_referencesBrowse,k),this.templateLoading=_.get(_.tk_loadingLarge,C),this.contentSelector=t.contentSelector,this.titleSelector=t.titleSelector,this.browseSelector=t.browseSelector,this.cachedBook="",this.cachedTerm="",this.cachedArticleID="",this.books=null,this.browse=null,this.cachedTreeView=null,this.scrollDuration=0,this.isFirstRender=!0,this.bookFilters=t.bookFilters||null,this.mode=U.SEARCH,this.events={click:"tcSetFocus","click .section-heading.collapsible"
:"toggleView","click .search li":"selectItem"},this.scopeName="references:list",this.shortcuts={"enter references:list":"selectItemEnter","up references:list":"moveArrow","down references:list":"moveArrow","left references:list":"moveArrow","right references:list":"moveArrow"},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),M.TC.current().settings.keyboardShortcuts&&(T.extend(this,H.Get()),this.delegateShortcuts()),x.bindAll(this),this.listenTo(this.hub,P.ReferencesFocusList,this.tcSetFocus),this.listenTo(this.hub,P.ReferencesSearch,this.search),this.listenTo
(this.hub,P.ReferencesSearch,this.renderBrowseBooks),this.listenTo(this.hub,P.ReferencesListBooksComplete,this.cacheBooks),this.listenTo(this.hub,P.ReferencesBrowseBook,this.expandBrowseTree),this.listenTo(this.hub,P.ReferencesBrowseBook,this.updateBrowseBookDropdown),this.listenTo(this.hub,P.ReferencesGetArticle,this.mockSelect),this.listenTo(this.hub,P.ReferencesClear,this.clear),this.listenTo(this.hub,P.ReferencesListBooksFailure,this.clear),this.listenTo(this.hub,P.ReferencesBrowseBook,this.trySelectFirstYear)},t.prototype.clear=function(){D.Net.tryAbort(this.currentReq),this.$(this.contentSelector
).find(".tree").length===0&&this.$(this.contentSelector).find(".pane-content").html("")},t.prototype.browseBookChanging=function(e){var t=this.$("select.book-list").data("kendoDropDownList"),n,r="-1",i,s;this.tcSetFocus(),t&&(n=t.dataItem(),r=n.value,i=n.text.replace("Browse ","")),r!=="-1"&&(s={bookId:r,bookText:i},this.hub.trigger(P.ReferencesBrowseBook,s),this.$el.closest(".references").addClass("browsing").removeClass("searching"),this.onKeyboardFocus())},t.prototype.updateBrowseBookDropdown=function(e){var t=this.$(this.browseSelector).find("select.book-list").data("kendoDropDownList");t&&
t.select(function(t){return t.value===e.bookId}),this.$el.closest(".references").addClass("browsing").removeClass("searching")},t.prototype.expandBrowseTree=function(e){var t,n=this,r;this.cachedBook=e.bookId,t={book:e.bookId},D.Net.tryAbort(this.currentReq),this.currentReq=M.TC.current()._net.referencesListYears(t,this.showYears,this.handleError),e.issueYear&&(this.hub.once(P.ReferencesBrowseYearsComplete,function(){r=n.$('.k-item[data-year="'+e.issueYear+'"]'),r.find(".k-plus").click()}),e.issueTitle&&(this.hub.once(P.ReferencesBrowseIssuesComplete,function(){r.find(".k-item .k-in").each(function(
){if(T(this).text()===e.issueTitle)return T(this).prev(".k-plus").click(),!1})}),e.articleId&&this.hub.once(P.ReferencesBrowseArticlesComplete,function(){var t=n.$("#id-"+e.articleId).closest("li.k-item");n.focusEntry(t,!0),n.cachedTreeView.select(t)})))},t.prototype.showYears=function(e){this.browse=(new j.Browse).set(e,{parse:!0}),this.render("browse")},t.prototype.cacheBooks=function(e){this.books=e.books,this.renderBrowseBooks()},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$(".tc-loading").remove():this.$(this.contentSelector).find(".pane-content").html(this.templateLoading
)},t.prototype.getFocusElement=function(){return this.$(this.contentSelector)},t.prototype.moveArrow=function(e,t){if(this.mode===U.SEARCH){var n=T.event.fix(e);n.preventDefault();var r=this.$(".k-state-focused").length>0?this.$(".k-state-focused"):this.$(".item-selected"),i=r,s=i.hasClass("indication"),o=i.hasClass("indication-child"),u=i.hasClass("indication-group-name"),a=!1,f=!1;u&&(i=i.closest(".indication"));switch(t.key){case"up":i=i.prevAll("li:first"),i.length===0&&(s||u?(i=r.closest("ul.indication-group").prev(),i.find(".k-minus").length?i=i.find("li.indication").find("li:last"):i=i.find
("li.indication")):o?i=r.hasClass("first")?r.closest("li.indication").find(".indication-group-name"):r.closest("ul.indication-group").prev().find("li.indication").find("li:last"):i=r.parent().prevAll("ul:last,ol:last").find("li:last")),i.length===0&&(i=r.closest(".accordion-group").prevAll(".accordion-group:last").find("li:last"));break;case"down":i=i.nextAll("li:first"),i.length===0&&(s||u?(i=r.closest("ul.indication-group"),i.find(".k-minus").length?i=i.find("li.indication-child:first"):i=i.next().find(".indication-group-name")):o?i=r.hasClass("last")?r.closest("ul.indication-group").next().find
(".indication-group-name"):i.next():i=r.parent().nextAll("ul:first,ol:first").find("li:first")),i.length===0&&(i=r.closest(".accordion-group").nextAll(".accordion-group:first").find("li:first"));break;case"left":if(s||u)u&&(i=i.closest(".indication")),i.find(".k-minus").length&&(i.click(),f=!0);break;case"right":if(s||u){if(i.find(".k-minus").length)return;u&&(i=i.closest(".indication")),i.find(".k-plus").length&&(i.click(),a=!0,i=i.find(".indication-group-name"))}break;default:}i.hasClass("indication")&&!o&&!a&&!f&&i.find(".k-minus").length&&(i=i.find("li:first")),i.length===1&&this.focusEntry
(i)}},t.prototype.selectItemEnter=function(e,t){var n=T.event.fix(e);n.preventDefault();if(this.mode===U.SEARCH){var r=this.$(".k-state-focused").click();r.hasClass("indication")?r.find(".indication-group-name").addClass("k-state-focused"):r.hasClass("indication-group-name")&&r.addClass("k-state-focused")}else{var r=this.$(".k-state-focused").length?this.$(".k-state-focused"):this.$(".k-state-selected");r.prev(".k-icon").click()}},t.prototype.selectItem=function(e){var t=T(e.currentTarget),n=T(e.target).is("a,ul,li.indication-child"),r;typeof t.attr("data-article-id")=="string"?(this.focusEntry
(t,!1,!0),r={id:t.attr("data-article-id"),book:t.parent().attr("data-book")||t.attr("data-book")},this.books&&this.books.where({can_list:!0,id:t.attr("data-book")}).length>0&&(r.issueYear=t.attr("data-issue-year"),r.issueTitle=t.attr("data-issue-title")),this.hub.trigger(P.ReferencesGetArticle,r)):t.hasClass("indication")&&!n&&(t.find("ul").toggle(),t.find(".k-plus,.k-minus").toggleClass("k-plus k-minus"))},t.prototype.focusEntry=function(e,t,n){var r=this.$(".list-content.pane-scrollable .pane-content"),i=this.resultsHeight/2,s,o;s={duration:this.scrollDuration,offset:-i},r.stop().scrollTo(e,s
);if(typeof t=="undefined"||t===!1)n?(this.$(".item-selected").removeAttr("aria-selected").removeClass("item-selected"),e.attr("aria-selected","true").addClass("item-selected"),this.$(".k-state-focused").removeClass("k-state-focused")):(this.$(".k-state-focused").removeClass("k-state-focused"),e.addClass("k-state-focused"))},t.prototype.selectSearchItem=function(){var e=this.$("#article-"+this.cachedArticleID);e.length==0&&(e=this.$(this.contentSelector).find("li:first"),e.closest("ul").hasClass("indication-group")&&(e.find(".k-plus").click(),e=e.find("li:first"))),e.click()},t.prototype.renderBrowseBooks=
function(){var e=this,t=this.$("select.ddl-menu"),n=t.length?t.data("kendoDropDownList"):null,r=this.books&&this.books.length?x.where(this.books.toJSON(),{can_list:!0}):[],i={close:{duration:0}};M.TC.current().settings.effects||(i=!1),n&&n.destroy(),this.$(this.browseSelector).html(this.templateBrowse({canListBooks:r})).find("select.ddl-menu").kendoDropDownList({animation:i,change:this.browseBookChanging,dataBound:this.booksSetComplete,height:500})},t.prototype.booksSetComplete=function(e){var t=this.$("select.ddl-menu").data("kendoDropDownList");this.bookFilters?e.sender.dataSource.data().length&&
(t.unbind("dataBound"),e.sender.dataSource.filter(this.bookFilters)):t.unbind("dataBound")},t.prototype.render=function(e){this.isFirstRender&&(this.renderBrowseBooks(),this.isFirstRender=!1),this.$(this.contentSelector).stop().scrollTo(0),this.$(this.titleSelector).html(this.templateTitle({type:e,bookTitle:R[this.cachedBook]||this.cachedBook}));switch(e){case"browse":this.mode=U.TREE,this.$(this.contentSelector).html(this.templateTree({data:this.browse.toJSON(!0),TextBook:R,resultsHeight:this.resultsHeight+"px"})),this.initTreeView();break;default:this.mode=U.SEARCH,this.$(this.contentSelector
).html(this.templateSearch({results:this.searchResults,TextBook:R,resultsHeight:this.resultsHeight+"px"})),this.selectSearchItem()}return this.isMockSearch=!1,this},t.prototype.mockSelect=function(e){if(e.mockUser){var t=this.$('[data-article-id="'+e.id+'"]');t.length===1&&(this.focusEntry(t,!1,!0),this.tcSetFocus())}},t.prototype.initTreeView=function(){var e={template:'#= item.text #<input type="hidden" class="data-id" id="id-#= item.ID #" value="#= item.ID #" />'};M.TC.current().settings.effects||(e.animation=!1);var t=this.cachedTreeView=this.$(".treeview").kendoTreeView(e).data("kendoTreeView"
);t.bind("expand",this.onExpand),t.bind("select",this.onSelect),t.bind("navigate",this.onNavigate),this.hub.trigger(P.ReferencesBrowseYearsComplete)},t.prototype.onNavigate=function(e){this.focusEntry(T(e.node),!0)},t.prototype.onSelect=function(e){var t=this.cachedTreeView.dataItem(e.node).level(),n;if(t!==2)return;n={id:T(e.node).find(".data-id").val()},this.hub.trigger(P.ReferencesGetArticle,n)},t.prototype.onExpand=function(e){var t=this.cachedTreeView.dataItem(e.node).level(),n=T(e.node),r,i,s=this;if(!n.attr("data-loaded"))switch(t){case 0:r={book:n.attr("data-book"),year:n.attr("data-year"
)},this.currentReq=M.TC.current()._net.referencesListIssues(r,function(t){s.showIssues(t,e.node)},this.handleError);break;case 1:i={issue:n.find(".data-id").val()},this.currentReq=M.TC.current()._net.referencesListArticles(i,function(t){s.showArticles(t,e.node)},this.handleError);break;default:}},t.prototype.showArticles=function(e,t){T(t).attr("data-loaded","true"),x.each(e.Articles,function(e){e.text=e.ArticleTitle,delete e.ArticleTitle}),this.browse.set("Articles",e);var n=this.cachedTreeView.dataItem(t).children.data();n.pop(),n.push.apply(n,e.Articles),this.hub.trigger(P.ReferencesBrowseArticlesComplete
)},t.prototype.showIssues=function(e,t){T(t).attr("data-loaded","true"),x.each(e.Issues,function(e){e.text=e.IssueTitle,delete e.IssueTitle,e.items=[{text:'<span class="k-loading k-icon tc-loading"></span>',ID:""}]}),this.browse.set("Issues",e.Issues);var n=this.cachedTreeView.dataItem(t).children.data();n.pop(),n.push.apply(n,e.Issues),this.hub.trigger(P.ReferencesBrowseIssuesComplete)},t.prototype.search=function(e){var t;this.setLoading(!0),this.cachedBook=e.bookName,this.cachedTerm=e.term,this.cachedArticleID=e.articleId,this.isMockSearch=e.mockUser,t={book:e.bookId,term:e.term},D.Net.tryAbort
(this.currentReq),this.currentReq=M.TC.current()._net.referencesSearch(t,this.showSearchResults,this.handleError)},t.prototype.showSearchResults=function(e){var t=!1;this.setLoading(!1),this.searchResults=(new B.SearchResultCollection(e)).toJSON();for(var n=0;!t&&n<this.searchResults.length;n++)for(var r=0;!t&&r<this.searchResults[n].results.length;r++)t=this.searchResults[n].results[r].articles.length>0;t?this.hub.trigger(P.ReferencesSearchComplete):this.hub.trigger(P.ReferencesSearchNoResults),this.render()},t.prototype.handleError=function(e){this.hub.trigger(P.ReferencesSearchNoResults),this
.clear()},t.prototype.toggleView=function(e,t){e.stopPropagation(),T(e.target).closest(".accordion-heading").toggleClass("collapsed").find(".toggle-icon").toggleClass("k-plus k-minus");var n=M.TC.current().settings.effects?600:0;T(e.target).closest(".accordion-group").find(".section-items").slideToggle(n)},t.prototype.onSplitterCreated=function(){var e=this.$el.data("kendoSplitter");e.bind("layoutChange",this.fixScrollHeight),this.fixScrollHeight()},t.prototype.fixScrollHeight=function(e){var t=this.$(".list-content.pane-scrollable");t.length>0&&(this.resultsHeight=t.height()-31,t.find(".pane-content"
).css("height",this.resultsHeight))},t.prototype.trySelectFirstYear=function(e){if(typeof e.issueYear=="undefined"){var t=this;this.hub.once(P.ReferencesBrowseYearsComplete,function(){var n=t.cachedTreeView.select();n.length===0?t.onKeyboardFocus():n.click()})}},t.prototype.onKeyboardFocus=function(){if(this.$el.find(".tree").length!==0){var e=this.cachedTreeView.select();e=e.length!==0?e.first():this.$(".k-treeview li:first"),e.click(),this.cachedTreeView.select(e)}},t.prototype.onClearFocus=function(){this.$(".k-state-focused").removeClass("k-state-focused")},t}(S.View);t.ListView=z}),define("text!controls/references/templates/detail/details-title.html"
,[],function(){return'<div class="pane-content pane-slim-s pane-slim-w pane-slim-e">\r\n    <div class="border">\r\n        <div class="heading-slim">\r\n            <% if (bookTitle) { print(bookTitle); } else { print(\'&nbsp;\'); } %>\r\n        </div>\r\n        <div class="controls control-group">\r\n            <div class="history">\r\n                <button type="button" class="references-back references-history disabled k-state-disabled k-button"><span class="k-icon k-i-arrow-w">Back</span></button>\r\n                <button type="button" class="references-forward references-history disabled k-state-disabled k-button"><span class="k-icon k-i-arrow-e">Forward</span></button>\r\n            </div>\r\n            <div class="article-title" title="">&nbsp;</div>\r\n            <div class="actions">\r\n                <button type="button" class="references-browse-issue k-button" style="display:none">Browse Issue</button>\r\n                <button type="button" class="references-print k-button"><i class="k-icon tc-print"></i></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'
}),define("text!controls/references/templates/detail/details.html",[],function(){return'<div class="pane-content pane-slim pane-text" tabindex="-1">\r\n</div>'}),define("text!controls/references/templates/detail/notes-title.html",[],function(){return'<div class="pane-content pane-slim-s pane-slim-w pane-slim-e">\r\n    <div class="heading-slim">Notes</div>\r\n</div>'}),define("text!controls/references/templates/detail/notes.html",[],function(){return'<div class="pane-content pane-slim pane-text">\r\n</div>'});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=
t.prototype,e.prototype=new n};define("controls/references/models/detailViewModel",["require","exports","Backbone"],function(e,t,n){var r=n,i=function(e){function t(t){this.defaults={history:[]},e.call(this,t)}return __extends(t,e),t}(r.Model);t.DetailViewModel=i});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/views/detail",["require","exports","Backbone","underscore","jql","text!controls/common/templates/loading-large.html","text!controls/references/templates/detail/details-title.html","text!controls/references/templates/detail/details.html"
,"text!controls/references/templates/detail/notes-title.html","text!controls/references/templates/detail/notes.html","lib/api","lib/dom","lib/templates","lib/net","lib/events","lib/shortcuts","lib/modal","controls/references/models/detailViewModel","i18n!locale/nls/books"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=n,w=r,E=i,S=s,x=o,T=u,N=a,C=f,k=l,L=c,A=h,O=p,M=d,_=v,D=m,P=g,H=y,B=function(e){function t(t){this.hub=t.hub,this.templateContentTitle=A.compile(A.tk_referencesDetailContentTitle,x),this.templateContent=A.compile(A.tk_referencesDetailContent,T),this.templateNotesTitle=A.get
(A.tk_referencesDetailNotesTitle,N),this.templateNotes=A.compile(A.tk_referencesDetailNotes,C),this.templateLoading=A.get(A.tk_loadingLarge,S),this.contentSelector=t.detailSelector,this.contentTitleSelector=t.titleSelector,this.notesTitleSelector=t.notesTitleSelector,this.notesSelector=t.notesSelector,this.historyIndex=0,this.model=new P.DetailViewModel,this.history=this.model.get("history"),this.isShowingNoResults=!1,this.events={click:"tcSetFocus","click .references-print":"print","click .tc_drug_section_hdr":"toggle","click .tc-article-link":"handleArticleLink","click .references-browse-issue"
:"handleBrowseIssueClick","click a.ref_thumb":"handleThumbnailClick","click .references-history":"navigateHistory","click .tc-code-link":"handleCodeClick"},this.scopeName="references:detail",this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),k.TC.current().settings.keyboardShortcuts&&(E.extend(this,_.Get()),this.delegateShortcuts()),w.bindAll(this),this.listenTo(this.hub,M.ReferencesGetArticle,this.getArticle),this.listenTo(this.hub,M.ReferencesGetArticle,this.showBrowseIssue),this.listenTo(this.hub,M.ReferencesGetArticle,this.setHistoryButtons
),this.listenTo(this.hub,M.ReferencesSearch,this.updateTitleFromSearch),this.listenTo(this.hub,M.ReferencesBrowseBook,this.updateTitleFromBrowse),this.listenTo(this.hub,M.ReferencesSearch,this.onSearch),this.listenTo(this.hub,M.ReferencesBrowseBook,this.clearContent),this.listenTo(this.hub,M.ReferencesSearchNoResults,this.clearContent),this.listenTo(this.hub,M.ReferencesClear,this.clear),this.listenTo(this.hub,M.ReferencesListBooksFailure,this.clear),this.listenTo(this.hub,M.ReferencesSearchNoResults,this.onNoSearchResults)},t.prototype.handleThumbnailClick=function(e){var t=E(e.currentTarget),
n=this.$el.closest(".bottom-wrap").height()-100,r=t.find("img").clone().removeClass("ref_thumb"),i=E('<div style="position:absolute; bottom:0;right:0;z-index:-1000"/>').appendTo(this.$el).append(r),s=r.height(),o=E("<div/>").append('<strong class="ref-title">'+t.prev(".ref_image_title").text()+"</strong>").append(t.html());return e.preventDefault(),n<0&&(n=300),i.remove(),D.show({title:"Interventional Radiology Image",htmlContent:o,maxHeight:n,height:s,close:this.tcSetFocus,open:this.tcClearFocus}),!1},t.prototype.getFocusElement=function(){return this.$(".detail-content")},t.prototype.handleBrowseIssueClick=
function(e){var t=E(e.currentTarget),n=t.attr("data-issue-title"),r=t.attr("data-issue-year"),i=t.attr("data-book"),s=t.attr("data-article-id"),o;o={bookId:i,issueTitle:n,issueYear:r,articleId:s,preventClearContent:!0},this.hub.trigger(M.ReferencesBrowseBook,o)},t.prototype.showBrowseIssue=function(e){e.issueTitle&&e.issueYear&&e.book?this.$(this.contentTitleSelector).find(".references-browse-issue").show().attr("data-issue-title",e.issueTitle).attr("data-issue-year",e.issueYear).attr("data-book",e.book).attr("data-article-id",e.id):this.hideBrowseIssue()},t.prototype.handleArticleLink=function(
e){e.preventDefault();var t=E(e.currentTarget),n=t.attr("href"),r;r={id:n},this.hub.trigger(M.ReferencesGetArticle,r)},t.prototype.toggle=function(e){var t=k.TC.current().settings.effects?600:0,n=E(e.currentTarget);n.toggleClass("collapsed"),n.next().slideToggle(t)},t.prototype.print=function(e){var t;this.hub.trigger(M.ReferencesPrintRequested);if(!k.TC.current().settings.customPrintHandler){var n=E(".detail-content").clone(),r=window.frames,i=r.references_print_frame;n.find(".tc-article-note").show().before("<h2>Notes</h2>"),i.document.body.innerHTML='<div class="print">'+n.html()+"</div>",i.
window.focus();try{t=i.document.execCommand("print",!1,null),t||i.window.print()}catch(s){i.window.print()}i.document.body.innerHTML=""}},t.prototype.onSearch=function(e){this.setLoading(!0),this.isShowingNoResults=!1},t.prototype.clear=function(){O.Net.tryAbort(this.currentReq),this.clearContent(),this.collapseNotes()},t.prototype.clearContent=function(e){if(typeof e=="undefined"||typeof e.preventClearContent=="undefined"||e.preventClearContent===!1)this.$(this.contentSelector).html("&nbsp;"),this.$(this.contentTitleSelector).find(".article-title").html("&nbsp;"),this.collapseNotes(),this.hideBrowseIssue
()},t.prototype.hideBrowseIssue=function(){this.$(this.contentTitleSelector).find(".references-browse-issue").hide()},t.prototype.updateTitleFromBrowse=function(e){this.cachedBookTitle=e.bookText||H[e.bookId]||"",this.$(this.contentTitleSelector).find(".heading-slim").text(this.cachedBookTitle),this.hideBrowseIssue()},t.prototype.updateTitleFromSearch=function(e){var t=e.bookId;t.length&&(t=t.toUpperCase()),this.cachedBookTitle=e.bookName||H[t]||"",this.$(this.contentTitleSelector).find(".heading-slim").text(this.cachedBookTitle)},t.prototype.updateTitleFromHistory=function(){var e=this.history
[this.historyIndex],t="";typeof e!="undefined"&&(t=e.book),this.$(this.contentTitleSelector).find(".heading-slim").text(t)},t.prototype.getArticle=function(e){var t,n=typeof e.isHistoryEvent!="undefined"&&e.isHistoryEvent;this.currentArticleId=e.id,this.setLoading(!0),this.isShowingNoResults=!1,n||this.addHistory(e),t={id:e.id},O.Net.tryAbort(this.currentReq),this.currentReq=k.TC.current()._net.referencesGetArticle(t,this.showArticle,this.handleError)},t.prototype.showArticle=function(e){var t=this.$(this.contentSelector),n,r;this.setLoading(!1),n=t.html(e).find(".tc-article-note").hide().clone
(),t.find("a").attr("target","_blank"),r=this.$(".reference-title").remove().text(),this.$(this.contentTitleSelector).find(".article-title").html(r).attr("title",r),n.length>0?(n.show(),this.$(this.notesSelector).find(".pane-content").html(n),this.expandNotes()):this.collapseNotes(),t.find("img:last").addClass("last"),this.hub.trigger(M.ReferencesGetArticleComplete)},t.prototype.expandNotes=function(){var e=this.$el.data("kendoSplitter"),t=e.size(".detail-notes");t==="0px"&&(e.size(".detail-notes","20%"),e.size(".detail-notes-title","36px"),this.fixNotesScrollHeight())},t.prototype.collapseNotes=
function(){var e=this.$el.data("kendoSplitter"),t=e.size(".detail-notes");t!=="0px"&&(e.size(".detail-notes","0px"),e.size(".detail-notes-title","0px"))},t.prototype.setLoading=function(e){typeof e=="undefined"||!e?this.$(".tc-loading").remove():(this.clearContent(),this.$(this.contentSelector).html(this.templateLoading))},t.prototype.render=function(){return this.$(this.contentTitleSelector).html(this.templateContentTitle({bookTitle:""})),this.$(this.contentSelector.replace(" .pane-content","")).html(this.templateContent()),this.$(this.notesTitleSelector).html(this.templateNotesTitle),this.$(this
.notesSelector).html(this.templateNotes()),this.contentSelector+=" .pane-content",this},t.prototype.onSetFocus=function(e){L.focusWithoutWindowScroll(this.$(this.contentSelector))},t.prototype.handleError=function(e){this.setLoading(!1)},t.prototype.onNoSearchResults=function(){this.isShowingNoResults=!0},t.prototype.onSplitterCreated=function(){var e=this.$el.data("kendoSplitter");e.bind("layoutChange",this.fixContentScrollHeight),e.bind("layoutChange",this.fixNotesScrollHeight),this.fixContentScrollHeight()},t.prototype.fixContentScrollHeight=function(e){var t=this.$(".detail-content.pane-scrollable"
),n;t.length>0&&(n=this.$el.data("kendoSplitter"),n.size(".detail-highlight")!=="0px"?this.contentHeight=t.height()-12:this.contentHeight=t.height()-21,t.find(".pane-content").css("height",this.contentHeight))},t.prototype.fixNotesScrollHeight=function(e){var t=this.$(".detail-notes.pane-scrollable");t.length>0&&(this.detailNotesHeight=t.height()-21,t.find(".pane-content").css("height",this.detailNotesHeight))},t.prototype.handleCodeClick=function(e){e.preventDefault();var t=E(e.currentTarget),n,r=t.data("code-type");r&&r.length&&(r=r.toUpperCase());var i=t.data("code");n={code:i,codeType:r,articleId
:this.currentArticleId},this.hub.trigger(M.ReferencesCodeClick,n)},t.prototype.navigateHistory=function(e){var t=E(e.currentTarget),n;t.hasClass("disabled")||(t.hasClass("references-back")?this.historyIndex>0&&!this.isShowingNoResults&&this.historyIndex--:this.historyIndex<this.history.length-1&&this.historyIndex++,this.updateTitleFromHistory(),n=this.history[this.historyIndex],n.isHistoryEvent=!0,this.currentArticleId=n.id,this.hub.trigger(M.ReferencesGetArticle,n))},t.prototype.addHistory=function(e,t){var n=!1,r={id:e.id,book:this.cachedBookTitle};typeof t=="string"?this.history.length>0&&(n=!0
):this.historyIndex<this.history.length-1?(this.history=this.history.slice(0,this.historyIndex+1),n=!0):this.history.length>=0&&(n=!0),n&&(w.isEqual(this.history[this.historyIndex],r)===!1&&this.history.push(r),this.historyIndex=this.history.length-1),this.model.trigger("change:history")},t.prototype.setHistoryButtons=function(){this.historyIndex>0?this.$(this.contentTitleSelector).find(".references-back").removeClass("disabled k-state-disabled"):this.$(this.contentTitleSelector).find(".references-back").addClass("disabled k-state-disabled"),this.historyIndex<this.history.length-1?this.$(this.contentTitleSelector
).find(".references-forward").removeClass("disabled k-state-disabled"):this.$(this.contentTitleSelector).find(".references-forward").addClass("disabled k-state-disabled")},t}(b.View);t.DetailView=B}),define("vendor/jquery/plugins/jquery.searchHighlight",["jql"],function(e){e.fn.SearchHighlight=function(n){var r=n.debug_referrer||document.referrer;if(!r&&n.keys==undefined)return this;t.options=e.extend({exact:"exact",style_name:"hilite",style_name_suffix:!0},n),n.engines&&t.engines.unshift(n.engines);var i=n.keys!=undefined?n.keys.toLowerCase().split(/[\s,\+]+/):t.decodeURL(r,t.engines);return i&&
i.join("")?(t.buildReplaceTools(i),this.each(function(){var n=this;n==document&&(n=e("body")[0]),t.hiliteElement(n,i)})):this};var t={options:{},regex:[],engines:[],subs:{},decodeURL:function(t,n){t=decodeURIComponent(t);var r=null;return e.each(n,function(e,n){if(n[0].test(t)){var i=t.match(n[1]);if(i)return r=i[1].toLowerCase(),!1}}),r&&(r=r.replace(/(\'|")/,"$1"),r=r.split(/[\s,\+\.]+/)),r},regexAccent:[[/[\xC0-\xC5\u0100-\u0105]/ig,"a"],[/[\xC7\u0106-\u010D]/ig,"c"],[/[\xC8-\xCB]/ig,"e"],[/[\xCC-\xCF]/ig,"i"],[/\xD1/ig,"n"],[/[\xD2-\xD6\xD8]/ig,"o"],[/[\u015A-\u0161]/ig,"s"],[/[\u0162-\u0167]/ig
,"t"],[/[\xD9-\xDC]/ig,"u"],[/\xFF/ig,"y"],[/[\x91\x92\u2018\u2019]/ig,"'"]],matchAccent:/[\x91\x92\xC0-\xC5\xC7-\xCF\xD1-\xD6\xD8-\xDC\xFF\u0100-\u010D\u015A-\u0167\u2018\u2019]/ig,replaceAccent:function(e){t.matchAccent.lastIndex=0;if(t.matchAccent.test(e))for(var n=0,r=t.regexAccent.length;n<r;n++)e=e.replace(t.regexAccent[n][0],t.regexAccent[n][1]);return e},escapeRegEx:/((?:\\{2})*)([[\]{}*?|])/g,buildReplaceTools:function(n){var r=[],i;e.each(n,function(e,n){(n=t.replaceAccent(n).replace(t.escapeRegEx,"$1\\$2"))&&r.push(n)}),i=r.join("|");switch(t.options.exact){case"exact":i="\\b(?:"+i+")\\b"
;break;case"whole":i="\\b\\w*("+i+")\\w*\\b";break;case"wholestart":i="\\b("+i+")\\w*\\b"}t.regex=new RegExp(i,"gi"),e.each(r,function(e,n){t.subs[n]=t.options.style_name+(t.options.style_name_suffix?e+1:"")})},nosearch:/s(?:cript|tyle)|textarea/i,hiliteElement:function(n,r){var i=t.options,s,o;s=i.highlight?e(i.highlight):e("body"),s.length||(s=e("body")),o=i.nohighlight?e(i.nohighlight):e([]),s.each(function(){t.hiliteTree(this,r,o)})},hiliteTree:function(n,r,i){if(i.index(n)!=-1)return;var s=t.options.exact=="whole"||t.options.exact=="wholestart"?1:0;for(var o=0,u=n.childNodes.length;o<u;o++
){var a=n.childNodes[o];if(a.nodeType!=8)if(a.nodeType==3){var f=a.data,l=t.replaceAccent(f),c="",h,p=0;t.regex.lastIndex=0;while(h=t.regex.exec(l))c+=f.substr(p,h.index-p)+'<a href="javascript:void(0)" class="'+t.subs[h[s].toLowerCase()]+'">'+f.substr(h.index,h[0].length)+"</a>",p=h.index+h[0].length;if(c){c+=f.substring(p);var d=e.merge([],e("<span>"+c+"</span>")[0].childNodes);u+=d.length-1,o+=d.length-1,e(a).before(d).remove()}}else a.nodeType==1&&a.nodeName.search(t.nosearch)==-1&&t.hiliteTree(a,r,i)}}}}),define("text!controls/references/templates/detail/details-highlight.html",[],function(
){return'<% var randomId = Math.random().toString().replace(\'0.\',\'\'); %>\r\n<div class="pane-content pane-slim">\r\n    <div class="heading-slim heading-nobg form-inline">\r\n        <div class="actions">\r\n            <div class="actions-right">\r\n                <input type="checkbox" class="hightlight-toggle" id="highlight-toggle-<%= randomId %>" checked="checked" />\r\n                <label for="highlight-toggle-<%= randomId %>">Highlight matched terms</label>\r\n            </div>\r\n            <button type="button" class="highlight-previous k-button k-state-disabled disabled">Previous Term</button>\r\n            <button type="button" class="highlight-next k-button k-state-disabled disabled">Next Term</button>\r\n        </div>\r\n    </div>\r\n</div>'
});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};define("controls/references/views/highlight",["require","exports","Backbone","underscore","jql","vendor/jquery/plugins/jquery.searchHighlight","text!controls/references/templates/detail/details-highlight.html","lib/api","lib/dom","lib/templates","lib/events","lib/shortcuts"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n,p=r,d=i,v=s,m=o,g=u,y=a,b=f,w=l,E=c,S=function(e){function t(t){v||!v,this.hub=t.hub,this.template=b.compile(b.tk_referencesDetailHighlight,m),this.detailSelector=
t.detailSelector,this.parentSelector=t.parentSelector,this.highlightOn=!0,this.collapsed=!1,this.isArticleVisible=!1,this.events={click:"tcSetFocus","click .hightlight-toggle":"toggleHighlight","click .highlight-previous.enabled":"findPrev","click .highlight-next.enabled":"findNext"},this.scopeName="references:highlight",this.shortcuts={},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.tcInit(),g.TC.current().settings.keyboardShortcuts&&(d.extend(this,E.Get()),this.delegateShortcuts()),p.bindAll(this),this.listenTo(this.hub,w.ReferencesClear,this.clear),this.listenTo
(this.hub,w.ReferencesGetArticleComplete,this.highlightText),this.listenTo(this.hub,w.ReferencesBrowseBook,this.collapseHighlight),this.listenTo(this.hub,w.ReferencesSearch,this.onSearch),this.listenTo(this.hub,w.ReferencesSearchComplete,this.setArticleVisible),this.listenTo(this.hub,w.ReferencesSearchNoResults,this.unsetArticleVisible)},t.prototype.setArticleVisible=function(){this.isArticleVisible=!0},t.prototype.unsetArticleVisible=function(){this.isArticleVisible=!1},t.prototype.onSearch=function(e){this.searchTerm=e.term,this.searchBook=e.bookId.toUpperCase(),this.searchBook==="DRUGS"||this
.searchBook==="DICTIONARY"?this.collapseHighlight():this.expandHighlight()},t.prototype.collapseHighlight=function(){if(!this.collapsed){var e=this.$el.closest(".detail-wrap").data("kendoSplitter");e.size(".detail-highlight","0px")}this.collapsed=!0},t.prototype.expandHighlight=function(){if(this.collapsed){var e=this.$el.closest(".detail-wrap").data("kendoSplitter");e.size(".detail-highlight","40px")}this.collapsed=!1},t.prototype.disableHighlight=function(){this.$(".hightlight-toggle").prop("checked",!1),this.highlightOn&&this.toggleHighlight()},t.prototype.clear=function(){this.disableHighlight
(),this.searchTerm="",this.searchBook=""},t.prototype.findPrev=function(){var e=this.$detail.find(".hilite"),t=e.filter(".selected"),n,r;e.length&&(t.length?(t.removeClass("selected"),r=e.index(t),n=r-1===-1?e.last():e.eq(r-1)):n=e.last()),n&&y.focusWithoutWindowScroll(n.addClass("selected"))},t.prototype.findNext=function(){var e=this.$detail.find(".hilite"),t=e.filter(".selected"),n,r;e.length&&(t.length?(t.removeClass("selected"),r=e.index(t),n=r+1===e.length?e.first():e.eq(r+1)):n=e.first()),n&&y.focusWithoutWindowScroll(n.addClass("selected"))},t.prototype.highlightText=function(){this.$detail=
this.$el.closest(this.parentSelector).find(this.detailSelector),this.highlightOn&&!this.collapsed&&this.isArticleVisible?(this.$(".k-button").addClass("enabled").removeClass("disabled k-state-disabled"),this.$el.SearchHighlight({exact:"wholestart",style_name_suffix:!1,keys:this.searchTerm,highlight:this.$detail}),this.$detail.find(".hilite").length===0&&this.$detail.find(".pane-content").append('<p id="no-matches-found">The term or code searched for is not present in the article, but information pertinent to this term/code is included. This article matched on <a class="hilite" href="javascript:void(0)">'+
this.searchTerm+"</a>")):(this.$(".k-button").addClass("disabled k-state-disabled").removeClass("enabled"),this.$detail.find(".hilite").each(function(){d(this).replaceWith(this.childNodes)}).end().find("#no-matches-found").remove(),this.$detail=null)},t.prototype.toggleHighlight=function(e){this.highlightOn=!this.highlightOn,this.$(".hightlight-toggle").prop("checked",this.highlightOn),this.highlightText()},t.prototype.render=function(){return this.$el.html(this.template()),this},t}(h.View);t.HighlightView=S});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=
t.prototype,e.prototype=new n};define("controls/references/views/references",["require","exports","Backbone","underscore","jql","text!controls/references/templates/references.html","controls/references/views/searchbar","controls/references/views/list","controls/references/views/detail","controls/references/views/highlight","kendoui/kendo.core","kendoui/kendo.splitter","lib/api","lib/templates","lib/events","lib/shortcuts","lib/config","lib/dom"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=n,b=r,w=i,E=s,S=o,x=u,T=a,N=f,C=l,k=c,L=h,A=p,O=d,M=v,_=m,D=g,P=function(e){function t(t){C||!C,k||!
k,this.searchbarSelector=".searchbar",this.listParent=".list-wrap",this.listSelector=".list-content",this.listTitleSelector=".list-title",this.listBrowseSelector=".list-browse",this.detailWrapSelector=".detail-wrap",this.detailTitleSelector=".detail-title",this.detailNotesTitleSelector=".detail-notes-title",this.detailNotesSelector=".detail-notes",this.detailSelector=".detail-content",this.highlightSelector=".detail-highlight",this.lastUsedBook="",this.hideSearchbar=t&&typeof t.hideSearchbar=="boolean"?t.hideSearchbar:!1,this.hideSearchAndBrowseResults=t&&typeof t.hideSearchAndBrowseResults=="boolean"?
t.hideSearchAndBrowseResults:!1,this.book=t&&t.book?t.book.toUpperCase():"",this.bookFilters=t&&t.bookFilters?t.bookFilters:null,this.visible=!0,this.childRefs=[],this.events={click:"tcSetActiveWidget"},this.shortcuts={"ctrl+up":"movePaneFocus","ctrl+down":"movePaneFocus"},e.call(this,t)}return __extends(t,e),t.prototype.initialize=function(e){this.hub=O.Get(),this.tcInit(),this.tcSetActiveWidget(),L.TC.current().settings.keyboardShortcuts&&(w.extend(this,M.Get()),this.delegateShortcuts()),b.bindAll(this),this.listenTo(this.hub,O.ClearWidgetAreaFocus,this.blurSplitters),this.listenTo(this.hub,O
.ReferencesBrowseBook,this.updateBook),this.listenTo(this.hub,O.ReferencesSearch,this.updateBook)},t.prototype.movePaneFocus=function(e,t){w.event.fix(e).preventDefault();if(!this.$el.hasClass("active-widget"))return;var n="keyboard",r=this.$("."+_.activePaneClass),i=r.hasClass("k-splitbar"),s;s=i?25:parseInt(r.attr("data-pane-index"),10),this.hub.trigger(O.ClearWidgetAreaFocus),this.$("."+_.activePaneClass).removeClass(_.activePaneClass),D.blurAll(),typeof s=="number"&&t.key==="ctrl+up"&&(s*=-1);if(this.hideSearchbar&&this.hideSearchAndBrowseResults)s=25;else if(this.hideSearchbar){if(isNaN(s)||
s===30)s=10;s===-20&&(s=25)}else if(this.hideSearchAndBrowseResults){if(isNaN(s)||s===10||s===20)s=25;if(s===-25||s===-30)s=30}switch(s){case-25:case 10:this.childRefs[1].tcSetFocus(n);break;case-30:case 20:D.focusWithoutWindowScroll(this.$(".list-wrap").next(".k-splitbar").addClass(_.activePaneClass)).click();break;case-10:case 25:this.childRefs[2].tcSetFocus(n);break;case-20:case 30:this.childRefs[0].tcSetFocus(n);break;default:this.childRefs[0].tcSetFocus(n)}},t.prototype.onClose=function(){for(var e=0;e<this.childRefs.length;e++)this.childRefs[e].tcClose()},t.prototype.render=function(){var e=
A.compile(A.tk_referencesWrapper,E),t;return this.$el.html(e({printTemplate:L.TC.current().settings.printTemplate})),this.hideSearchbar&&(t=w("<div/>")),this.childRefs.push((new S.SearchbarView({el:t||this.$(this.searchbarSelector),book:this.book,bookFilters:this.bookFilters,hub:this.hub})).render()),this.childRefs.push((new x.ListView({el:this.$(this.listParent),contentSelector:this.listSelector,titleSelector:this.listTitleSelector,browseSelector:this.listBrowseSelector,bookFilters:this.bookFilters,hub:this.hub})).render()),this.childRefs.push((new T.DetailView({el:this.$(this.detailWrapSelector
),detailSelector:this.detailSelector,titleSelector:this.detailTitleSelector,notesTitleSelector:this.detailNotesTitleSelector,notesSelector:this.detailNotesSelector,hub:this.hub})).render()),this.childRefs.push((new N.HighlightView({el:this.$(this.highlightSelector),parentSelector:this.detailWrapSelector,detailSelector:this.detailSelector,hub:this.hub})).render()),this.createSplitter(),b.each(this.childRefs,function(e){e.onSplitterCreated&&e.onSplitterCreated()}),this.checkStyleVersions(),this},t.prototype.createSplitter=function(){var e=this.$(".references-wrap");e.height(e.parent().parent().height
()),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:this.hideSearchbar?"0px":"82px",scrollable:!1},{collapsible:!1,scrollable:!1}]}),e=this.$(".bottom-wrap"),e.kendoSplitter({orientation:"horizontal",panes:[{collapsible:!1,resizable:this.hideSearchAndBrowseResults?!1:!0,size:this.hideSearchAndBrowseResults?"0px":"360px",min:this.hideSearchAndBrowseResults?"0px":"360px",max:this.hideSearchAndBrowseResults?"0px":"50%",scrollable:!1},{collapsible:!1,resizable:this.hideSearchAndBrowseResults?!1:!0,scrollable:!1}]}),e=this.$(".list-wrap"),e.kendoSplitter({orientation
:"vertical",panes:[{collapsible:!1,resizable:!1,size:"64px",scrollable:!1},{collapsible:!1,resizable:!1,size:"36px",scrollable:!1},{collapsible:!1,resizable:!1,scrollable:!1}]}),e=this.$(".detail-wrap"),e.kendoSplitter({orientation:"vertical",panes:[{collapsible:!1,resizable:!1,size:"75px",scrollable:!1},{collapsible:!1,resizable:!1,scrollable:!1},{collapsible:!1,resizable:!1,size:"40px",scrollable:!1},{collapsible:!1,resizable:!1,size:"0px",scrollable:!1},{collapsible:!1,resizable:!1,size:"0px",scrollable:!1}]}),this.$(".k-splitbar-draggable-horizontal, .k-splitbar-draggable-vertical").focus(function(
){w(this).find(".k-resize-handle").addClass("active-border")}).blur(function(){w(this).find(".k-resize-handle").removeClass("active-border")})},t.prototype.blurSplitters=function(){this.$(".list-wrap").next(".k-splitbar").removeClass(_.activePaneClass).blur()},t.prototype.updateBook=function(e){this.lastUsedBook=e.bookId},t.prototype.tcGetBook=function(){return this.lastUsedBook},t}(y.View);t.ReferencesView=P}),define("lib/extensions",["require","exports","jql","lib/config","lib/events","lib/shortcuts","lib/net"],function(e,t,n,r,i,s,o){function h(e){e.View.prototype.tcClose=function(){return this
.hub.trigger(f.Destroy),this.onClose&&this.onClose(),this.undelegateShortcuts&&this.undelegateShortcuts(),this.remove()},e.View.prototype.tcOn=function(e,t,n){n===!0?this.hub.once(e,t):this.listenTo(this.hub,e,t)},e.View.prototype.tcOff=function(e,t){this.stopListening(this.hub,e,t)},e.View.prototype.tcTrigger=function(e,t){this.hub.trigger(e,t)},e.View.prototype.tcVisible=function(e){if(typeof e!="boolean")return this.visible;this.visible=e,e&&this.tcSetFocus(),e||this.tcClearFocus()},e.View.prototype.tcSetFocus=function(e,t){var n=this.getFocusElement?this.getFocusElement():this.$el,r=this.scopeName||"all"
,i=u("."+a.activePaneClass);this.hub.trigger(f.ClearWidgetAreaFocus),n.addClass(a.activePaneClass),l.setScope(r),this.onSetFocus&&this.onSetFocus.call(this,{scopeName:r,originalArgs:arguments}),e&&e==="keyboard"&&this.onKeyboardFocus&&this.onKeyboardFocus.apply(this,arguments)},e.View.prototype.tcSetActiveWidget=function(){this.hub.trigger(f.ClearWidgetActive),this.$el.addClass(a.activeWidgetClass)},e.View.prototype.tcClearActiveWidget=function(){var e=this.getFocusElement?this.getFocusElement():this.$el;e.removeClass(a.activeWidgetClass)},e.View.prototype.tcClearFocus=function(e){var t=this.getFocusElement?
this.getFocusElement():this.$el;t.removeClass(a.activePaneClass),l.setScope("all"),this.onClearFocus&&this.onClearFocus.apply(this,arguments)},e.View.prototype.tcDestroy=function(e){this.currentReq&&c.Net.tryAbort(this.currentReq)},e.View.prototype.tcInit=function(){this.listenTo(this.hub,f.ClearWidgetAreaFocus,this.tcClearFocus),this.listenTo(this.hub,f.ClearWidgetActive,this.tcClearActiveWidget),this.listenTo(this.hub,f.Destroy,this.tcDestroy)},e.View.prototype.checkStyleVersions=function(){}}var u=n,a=r,f=i,l=s,c=o;t.initBackboneExtensions=h}),define("lib/api",["require","exports","Backbone"
,"vendor/backbone/plugins/backbone.shortcuts","jql","underscore","controls/codebooks/views/codebooks","controls/research/views/research","controls/references/views/references","lib/config","lib/extensions","lib/net"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n,p=r,d=i,v=s,m=o,g=u,y=a,b=f,w=l,E=c,S=function(){function e(e){this.version="3.1.0.363",this.env="stage",p||!p,w.initBackboneExtensions(h),this.settings={_dirtyAuth:null,authorizationKey:null,authorizationTokenType:null,authorizationTimestamp:null,authorizationExpired:null,authorizationExpiredParser:null,proxyUrl:null,fatalErrorCallback:function(
e,t,n){},templates:null,keyboardShortcuts:null,modalId:null,codingLevel:null,effects:null,printTemplate:null,customPrintHandler:null,ajaxTimeout:null,forceProxy:null},this.settings._dirtyAuth=!0,this.settings.authorizationKey="",this.settings.authorizationTokenType="Bearer",this.settings.authorizationTimestamp=null,this.settings.authorizationExpired=function(){this.fatalErrorCallback("Expired authorization callback not provided","",null)},this.settings.authorizationExpiredParser=null,this.settings.proxyUrl=null,this.settings.fatalErrorCallback=function(e,t,n){throw new Error(e+"\n"+t+"\n"+n)},this
.settings.keyboardShortcuts=!0,this.settings.templates={},this.settings.modalId="trucode-modal",this.settings.codingLevel="beginner",this.settings.effects=!0,this.settings.printTemplate="../css/print.html",this.settings.customPrintHandler=!1,this.settings.ajaxTimeout=0,this.settings.forceProxy=!1,this._tcEvents=d.extend({},h.Events),this._shortcuts=d.extend({},new h.Shortcuts),e.env&&(this.env=e.env,delete e.env),this.settings.authorizationExpired=v.bind(this.settings.authorizationExpired,this),e&&d.extend(this.settings,e),this._net=new E.Net(this)}return e.prototype.fatalErrorCallback=function(
e,t,n){this.settings.fatalErrorCallback(e,t,n)},e.prototype.createControl=function(e,t){var n,r,i;typeof e=="string"?(n=e,r={el:t}):(n=e.type,delete e.type,r=e);switch(n){case"codeBooks":i=(new m.EncoderView(r)).render();break;case"research":i=(new g.ResearchView(r)).render();break;case"researchPane":i=(new g.ResearchView(r)).render();break;case"references":i=(new y.ReferencesView(r)).render();break;default:}return i},e.prototype.option=function(e,t){if(typeof e=="string"){if(typeof t=="undefined")return this.settings[e]?this.settings[e]:null;this.settings[e]=t,e==="authorizationKey"&&(this.settings
._dirtyAuth=!0),this._tcEvents.trigger("settings:"+e,t)}else d.extend(this.settings,e)},e.prototype.noConflict=function(){return b.global[b.ns]=N,this},e.prototype.destroy=function(){b.global[b.ns]=null,d(b.global).removeProp(b.ns),b.global[b.ns]=T},e}();t.WebControls=S;var x=function(){function e(){}return e.current=function(){if(typeof b.global[b.ns]=="undefined")throw new Error("Not yet initialized.");return b.global[b.ns]},e}();t.TC=x;var T=function(){function e(){}return e.version="3.1.0.363",e.init=function(e){return b.global[b.ns]=new S(e),b.global[b.ns]},e}();t.TCPublic=T;var N=b.global
[b.ns];d(b.global).removeProp(b.ns),N?(b.global[b.ns]=new S(N),typeof N.ready=="function"&&N.ready(b.global[b.ns],d)):b.global[b.ns]=T}),define("main-api-only",["require","exports","lib/api"],function(e,t,n){}),require(["main-api-only"])})();